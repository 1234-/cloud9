<a:application xmlns:a="http://ajax.org/2005/aml">
    <a:button id="btnSyncStatus" class="c9-sync" value="[general/@synching]" onclick="require('ext/sync/sync').setSync()" />
    
    <a:model id="mdlSyncPrj" />
    
    <a:window
      id        = "winSyncPrj"
      title     = "Select project"
      icon      = ""
      center    = "true"
      resizable = "true"
      buttons   = "close"
      modal     = "false"
      skin      = "bk-window"
      width     = "500"
      height    = "300"
      kbclose   = "true"
      draggable = "true">
        <a:vbox anchors="0 0 0 0" edge="0 0 11 0">
            <a:datagrid id = "dgSyncPrj"
              flex       = "1"

              model      = "mdlSyncPrj"
              class      = "noscrollbar"
              scrollbar  = "sbShared 20 2 2"
              autoselect = "false"
              each       = "[project]"
              eachvalue  = "[@name]"
              empty-message = "No projects to sync!">
                <a:column width="25%" value="[@name]" caption="Name" />
                <a:column width="10%" value="[@scm]" caption="Type" />
                <a:column width="25%" value="[@url]" caption="URL" /> 
                <a:column width="20%" value="[@tagline]" caption="Tagline" /> 
                <a:column width="20%" value="[@desc]" caption="Description" /> 
            </a:datagrid>
            <a:hbox edge="11 10 0 0" pack="end">
                <a:button
                  skin     = "btn-default-css3"
                  caption  = "Cancel"
                  onclick = "winSyncPrj.close()"
                />
                <a:button
                  class   = "btn-green"
                  caption = "Okay"
                  margin = "0 0 0 10"
                  skin = "btn-default-css3"
                  onclick = "
                    if(dgSyncPrj.selected) {
                        require('ext/sync/sync').syncProject(dgSyncPrj.selected.getAttribute('name'));
                        winSyncPrj.close();
                    }
                  "
                />
            </a:hbox>
        </a:vbox>
    </a:window>

    <a:window
      id        = "winCannotSync"
      title     = "Sync Error!"
      icon      = ""
      center    = "true"
      kbclose   = "true"
      buttons   = "close"
      width     = "600"
      skin      = "bk-window2"
      render    = "runtime"
      onkeydown = "
        if(event.keyCode == 78) {
            btnQuestionNo.dispatchEvent('click', {htmlEvent: {}});
        }
      "
      class     = "relative">
        <a:vbox padding="10" edge="15 20 25 20">
            <h3 id="winQuestionHeader">Your workspace must be empty in order to start syncing with an online project!</h3>
            <div id="winQuestionMsg" class="alertMsg">The current directory can only contain a settings file.</div>
        </a:vbox>

        <a:hbox edge="6 10 10" pack="end" padding="8">
            <a:button id="btnQuestionNo" onclick = "require('ext/sync/sync').removeAndEnableSync()" default="3" skin="btn-default-css3" class="btn-red">Delete everything and synch</a:button>
            <a:button id="btnQuestionYes" onclick = "require('ext/sync/sync').winCannotSync()" skin="btn-default-css3" class="btn-green">Okay</a:button>
        </a:hbox>
    </a:window>
    
    <a:window
      id        = "winConfirmSyncOff"
      title     = "Disable sync?"
      icon      = ""
      center    = "true"
      kbclose   = "true"
      buttons   = "close"
      width     = "600"
      skin      = "bk-window2"
      render    = "runtime"
      onkeydown = "
        if(event.keyCode == 89) {
            btnQuestionYes.dispatchEvent('click', {htmlEvent: {}});
        }
        if(event.keyCode == 78) {
            btnQuestionNo.dispatchEvent('click', {htmlEvent: {}});
        }
      "
      class     = "relative">
        <a:vbox padding="10" edge="15 20 25 20">
            <h3 id="winQuestionRevHeader">Are you sure you want to disable synching?</h3>
        </a:vbox>

        <a:hbox edge="6 10 10" pack="end" padding="8">
            <a:button id="btnQuestionNo" onclick = "winConfirmSyncOff.close()" default="3" skin="btn-default-css3" class="btn-green">No</a:button>
            <a:button id="btnQuestionYes" onclick = "require('ext/sync/sync').disableSync()" skin="btn-default-css3" class="btn-red">Yes, disable it</a:button>
        </a:hbox>
    </a:window>
</a:application>                                                                     