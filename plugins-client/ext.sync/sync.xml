<a:application xmlns:a="http://ajax.org/2005/aml">
    <a:menu
      id        = "mnuSyncInfo"
      skin      = "menu-bk"
      width     = "350"
      pinned    = "true"
      class     = "downward sync-info-tooltip">
        <div>
            <a class="close-sync-info" href="javascript:void(0)" onclick="mnuSyncInfo.hide()"></a>
            <span class="sync-info-title">Sync for offline use in progress...</span>
            <a:progressbar id="syncProgressBar"
              skin   = "progressbar-green" 
              value  = "20" 
              margin = "5 0 8"/>
            <a:hbox>
                <div id="syncFileName" class="sync-file-label" flex="1">Connecting...</div>
                <!--a:button id="btnPauseSync" 
                  pack="end"
                  skin="btn-default-css3" 
                  width="37"
                  height="25"
                  class="pause-sync" 
                  onclick="require('ext/sync/sync').setSync();"/-->
            </a:hbox>
        </div>
        <div class="arrow"></div>
    </a:menu>
    
    <a:model id="mdlSyncPrj" />
    <a:menu
      id        = "mnuSyncPrj"
      skin      = "menu-bk"
      width     = "283"
      style     = "margin-top:8px;margin-left:8px;">
        <a:vbox padding="10" edge="10 10 8 10">
            <a:hbox padding="5">
                <a:label width="50" style="padding:4px 0 0 0">Sync with:</a:label>
                <a:dropdown id="ddSyncPrj" 
                  skin = "black_dropdown"
                  model      = "mdlSyncPrj"
                  each       = "[project]"
                  eachvalue  = "[@newws]"
                  caption    = "{[@name] + (apf.isTrue([@newws]) ? ' [New]' : '')}"
                  empty-message = "You don't have any projects yet" 
                  flex = "1" />
            </a:hbox>
            <a:hbox visible="{apf.isTrue(ddSyncPrj.value)}" margin="-5 0 0 0" padding="5">
                <a:label width="50" style="padding:4px 0 0 0">Type:</a:label>
                <a:radiobutton skin="radio_black">Private</a:radiobutton>
                <a:radiobutton skin="radio_black" selected="true">Public</a:radiobutton>
            </a:hbox>
            
            <a:divider skin="c9-divider-hor" />
            
            <a:hbox pack="end" edge="0" padding="10">
                <a:button
                  caption = "Cancel"
                  skin    = "c9-simple-btn"
                  onclick = "mnuSyncPrj.hide()"
                  style   = "cursor:pointer"
                  margin  = "5 0 0 0"
                />
                <a:button
                  class   = "btn-green"
                  caption = "Sync"
                  skin = "btn-default-css3"
                  id = "btnSyncOK"
                  height = "24"
                />
            </a:hbox>
        </a:vbox>
    </a:menu>

    <a:window
      id        = "winCannotSync"
      title     = "Sync Error!"
      icon      = ""
      center    = "true"
      kbclose   = "true"
      buttons   = "close"
      width     = "600"
      skin      = "bk-window2"
      render    = "runtime"
      onkeydown = "
        if(event.keyCode == 78) {
            btnQuestionNo.dispatchEvent('click', {htmlEvent: {}});
        }
      "
      class     = "relative">
        <a:vbox padding="10" edge="15 20 25 20">
            <h3 id="winQuestionHeader">Your workspace must be empty in order to start syncing with an online project!</h3>
            <div id="winQuestionMsg" class="alertMsg">The current directory can only contain a settings file.</div>
        </a:vbox>

        <a:hbox edge="6 10 10" pack="end" padding="8">
            <a:button id="btnQuestionNo" onclick = "require('ext/sync/sync').removeAndEnableSync()" default="3" skin="btn-default-css3" class="btn-red">Delete everything and synch</a:button>
            <a:button id="btnQuestionYes" onclick = "winCannotSync.hide()" skin="btn-default-css3" class="btn-green">Okay</a:button>
        </a:hbox>
    </a:window>
    
    <a:window
      id        = "winConfirmSyncOff"
      title     = "Disable sync?"
      icon      = ""
      center    = "true"
      kbclose   = "true"
      buttons   = "close"
      width     = "450"
      skin      = "bk-window2"
      render    = "runtime"
      onkeydown = "
        if(event.keyCode == 89) {
            btnQuestionYes.dispatchEvent('click', {htmlEvent: {}});
        }
        if(event.keyCode == 78) {
            btnQuestionNo.dispatchEvent('click', {htmlEvent: {}});
        }
      "
      class     = "relative">
        <a:vbox padding="10" edge="15 20 25 20">
            <h3 id="winQuestionRevHeader">Are you sure you want to disable synching?</h3>
        </a:vbox>

        <a:hbox edge="6 10 10" pack="end" padding="8">
            <a:button id="btnQuestionNo" onclick = "winConfirmSyncOff.close();" default="3" skin="btn-default-css3" class="btn-green">No</a:button>
            <a:button id="btnQuestionYes" onclick = "require('ext/sync/sync').disableSync()" skin="btn-default-css3" class="btn-red">Yes, disable it</a:button>
        </a:hbox>
    </a:window>
</a:application>                                                                     