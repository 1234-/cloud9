<a:application xmlns:a="http://ajax.org/2005/aml">
    <a:tab id="tabDebugButtons" skin="dockbar" visible="false">
        <a:page id="pgDebugNav" render="runtime">
            <a:hbox padding="3" edge="4 3 5">
                <a:button id="btnResume" tooltip="Resume"
                  icon     = "play.png"
                  command  = "resume"
                  skin     = "c9-sidepanelsbutton"
                  disabled = "{dbg.state != 'stopped'}" />
                <a:button  tooltip="Suspend"
                  skin     = "c9-sidepanelsbutton"
                  icon     = "pause.png"
                  onclick  = "require('ext/debugger/debugger').suspend();"
                  disabled = "{dbg.state == 'stopped' or !dbg.state}"/>
                <a:divider skin="c9-divider" />
                <a:button id="btnStepOver" tooltip="Step Over"
                  icon     = "step.png"
                  skin     = "c9-sidepanelsbutton"
                  command  = "stepover"
                  disabled = "{dbg.state != 'stopped'}" />
                <a:button id="btnStepInto" tooltip="Step Into"
                  icon     = "stepinto.png"
                  skin     = "c9-sidepanelsbutton"
                  command  = "stepinto"
                  disabled = "{dbg.state != 'stopped'}" />
                <a:button id="btnStepOut" tooltip="Step Out"
                  icon     = "stepback.png"
                  skin     = "c9-sidepanelsbutton"
                  command  = "stepout"
                  disabled = "{dbg.state != 'stopped'}" />
                <a:divider skin="c9-divider" />
                <a:checkbox id="btnEnableBreakpoint" tooltip="Deactivate breakpoints"
                  skin     = "checkbox_black"
                  value    = "[{mdlDbgBreakpoints}::@disableBreakpoints]"/>
                <a:divider skin="c9-divider" />
                <a:checkbox id="btnBreakOnError" tooltip="Break on Exceptions"
                  skin     = "checkbox_black"
                  value    = "[{mdlDbgBreakpoints}::@breakOnExceptions]"/>
                <a:divider skin="c9-divider" />
                <!--<a:button id="btnStepThrough" tooltip="Step Through"
                  icon     = "stepthrough.png"
                  skin     = "c9-sidepanelsbutton"
                  command  = "stepout"
                  disabled = "{dbg.state != 'stopped'}" />-->
            </a:hbox>
        </a:page>
    </a:tab>
    <a:tab id="tabDebug" skin="docktab" visible="false" activepage="0" buttons="close">
        <a:page id="dbgCallStack" caption="Call Stack" render="runtime" prerender="true">
            <a:datagrid
              id         = "dgStack"
              anchors    = "0 0 0 0"
              border     = "0"
              options    = "size|move"
              caching    = "false"
              model      = "mdlDbgStack"
              class      = "noscrollbar"
              scrollbar  = "sbShared 20 2 2"
              disabled   = "{dbg.state != 'stopped'}"
              selected   = "{dbg.activeframe}">
                <a:actions />
                <a:each match="[frame]">
                    <a:column caption="Function" value="[@name]" width="60%" icon2="debugger/stckframe_obj.gif" />
                    <a:column caption="Script" value="[@script]" width="40%" />
                    <a:column caption="Ln" value="{parseInt([@line])+1}" width="30"/>
                    <a:column caption="Col" value="[@column]" width="30"/>
                </a:each>
            </a:datagrid>
        </a:page>
        <a:page id="dbgWatch" caption="Watch" render="runtime">
           <a:datagrid id="dgVars2"
              anchors    = "0 0 0 0"
              border     = "0"
              class      = "noscrollbar"
              scrollbar  = "sbShared 20 2 2"
              options    = "size|move"
              prerender  = "false"
              caching    = "false"
              model      = "[{dbg.activeframe}::vars]"
              disabled   = "{dbg.state != 'stopped'}"
              loading-message = "Calculating...">
                <a:actions />
                <a:each match="[item|globals]" sort="[@name]">
                    <a:insert match="[globals]" get="{adbg.loadFrame(dbg, {dbg.activeframe})}"/>
                    <a:insert match="[item[@children='true']]" get="{adbg.loadObject(dbg, %[.])}" />
                    <a:column caption="Property" value="{[@name] || 'Globals'}" width="40%" icon="debugger/genericvariable_obj.gif" tree="true" />
                    <a:column caption="Value" value="[@value]" width="60%" />
                    <a:column caption="Type" value="[@type]" width="50"/>
                </a:each>
            </a:datagrid>
        </a:page>
        <a:page id="dbgVariable" caption="Variables" render="runtime">
            <a:datagrid id="dgVars"
              anchors    = "0 0 0 0"
              border     = "0"
              class      = "noscrollbar"
              scrollbar  = "sbShared 20 2 2"
              options    = "size|move"
              prerender  = "false"
              caching    = "false"
              model      = "[{dbg.activeframe}::vars]"
              disabled   = "{dbg.state != 'stopped'}"
              loading-message = "Calculating...">
                <a:actions />
                <a:each match="[item|globals]" sort="[@name]">
                    <a:insert match="[globals]" get="{adbg.loadFrame(dbg, {dbg.activeframe})}"/>
                    <a:insert match="[item[@children='true']]" get="{adbg.loadObject(dbg, %[.])}" />
                    <a:column caption="Property" value="{[@name] || 'Globals'}" width="40%" icon="debugger/genericvariable_obj.gif" tree="true" />
                    <a:column caption="Value" value="[@value]" width="60%" />
                    <a:column caption="Type" value="[@type]" width="50"/>
                </a:each>
            </a:datagrid>
        </a:page>
        <a:page id="dbgBreakpoints" caption="Breakpoints" render="runtime" prerender="true">
            <a:list id="lstBreakpoints"
              reselectable = "true"
              contextmenu  = "mnuContextLstBreakpoints"
              multiselect  ="true"
              autoselect = "false"
              anchors    = "0 0 0 0"
              skin       = "breakpoints"
              scrollbar  = "sbShared 2 2 2"
              border     = "0"
              model      = "mdlDbgBreakpoints"
              mode       = "check"
              each       = "[breakpoint]"
              checked    = "[@enabled]">
                <a:caption>
                    [@text]
                    <a:remove match="[file|folder]" />
                    <div>[@content]</div>
                </a:caption>
            </a:list>
        </a:page>
    </a:tab>
    <a:hsplitbox anchors="0 0 0 0"  flex = "1" splitter="true" id="dbgInteractive">
        <a:vbox width="400" anchors="29 0 0 0"  >
            <a:toolbar>
                <a:bar border="0 0 1 0">
                    <a:button
                      caption  = "Execute"
                      tooltip  = "Ctrl+Enter"
                      onclick  = "
                        require('ext/debugger/inspector').evaluateConsoleText();
                        txtCode.focus();
                      " />
                    <a:button
                      caption  = "Clear"
                      onclick  = "
                        txtCode.clear();
                        txtInteractiveOutput.clear();
                        txtCode.focus();
                      " />
                    <a:divider skin2="c9-divider"/>
                    <a:dropdown id="lstScripts"
                      skin2       = "black_dropdown"
                      margin     = "3 0 0 4"
                      width      = "220"
                      maxitems   = "50"
                      model      = "mdlDbgSources"
                      disabled   = "{dbg.state == null}"
                      each       = "[file]"
                      caption    = "[@text]"
                      autoselect = "false"
                      icon       = "debugger/file_obj.gif" />
                </a:bar>
            </a:toolbar>
            <a:vbox anchors="0 0 0 0" flex="1" >
                <a:text id="txtInteractiveOutput"
                  class      = "interactive_output"
                  scrolldown = "true"
                  focussable = "true"
                  textselect = "true"
                  flex       = "1"
                  anchors    = "0 0 0 0"
                  scrollbar  = "sbShared 20 2 2" />
            </a:vbox>
        </a:vbox>
        <a:vsplitbox >
            <a:codeeditor id="txtCode"
              realtime          = "true"
              syntax            = "javascript"
              border            = "0"
              flex              = "1"
              minheight         = "30"
              value             = "[{require('core/settings').model}::auto/console/input]"
              softtabs          = "[{require('core/settings').model}::editors/code/@softtabs]"
              tabsize           = "[{require('core/settings').model}::editors/code/@tabsize]"
              scrollspeed       = "[{require('core/settings').model}::editors/code/@scrollspeed]"
              theme             = "[{require('core/settings').model}::editors/code/@theme]"
              selectstyle       = "[{require('core/settings').model}::editors/code/@selectstyle]"
              activeline        = "[{require('core/settings').model}::editors/code/@activeline]"
              showinvisibles    = "[{require('core/settings').model}::editors/code/@showinvisibles]"
              animatedscroll    = "[{require('core/settings').model}::editors/code/@animatedscroll]"
              fontsize          = "[{require('core/settings').model}::editors/code/@fontsize]"
              showprintmargin   = "false"
              caching           = "false"
              highlightselectedword = "[{require('core/settings').model}::editors/code/@highlightselectedword]"
              printmargincolumn = "0" />
        </a:vsplitbox>
    </a:hsplitbox>

</a:application>