/*!
    Copyright (c) 2009, 280 North Inc. http://280north.com/
    MIT License. http://github.com/280north/narwhal/blob/master/README.md
*/
/*!
    Copyright (c) 2009, 280 North Inc. http://280north.com/
    MIT License. http://github.com/280north/narwhal/blob/master/README.md
*/
/**
 * Cloud9 Language Foundation
 *
 * @copyright 2011, Ajax.org B.V.
 * @license GPLv3 <http://www.gnu.org/licenses/gpl.txt>
 */
/**
 * Cloud9 Language Foundation
 *
 * @copyright 2011, Ajax.org B.V.
 * @license GPLv3 <http://www.gnu.org/licenses/gpl.txt>
 */
/**
 * Cloud9 Language Foundation
 *
 * @copyright 2011, Ajax.org B.V.
 * @license GPLv3 <http://www.gnu.org/licenses/gpl.txt>
 */
/**
 * JavaScript scope analysis module and warning reporter.
 * 
 * This handler does a couple of things:
 * 1. It does scope analysis and attaches a scope object to every variable, variable declaration and function declaration
 * 2. It creates markers for undeclared variables
 * 3. It creates markers for unused variables
 * 4. It implements the local variable refactoring
 * 
 * @depend ext/jslanguage/parse
 *
 * @copyright 2011, Ajax.org B.V.
 * @license GPLv3 <http://www.gnu.org/licenses/gpl.txt>
 */
/**
 * Cloud9 Language Foundation
 *
 * @copyright 2011, Ajax.org B.V.
 * @license GPLv3 <http://www.gnu.org/licenses/gpl.txt>
 */
/*!
 * JSHint, by JSHint Community.
 *
 * Licensed under the same slightly modified MIT license that JSLint is.
 * It stops evil-doers everywhere.
 *
 * JSHint is a derivative work of JSLint:
 *
 *   Copyright (c) 2002 Douglas Crockford  (www.JSLint.com)
 *
 *   Permission is hereby granted, free of charge, to any person obtaining
 *   a copy of this software and associated documentation files (the "Software"),
 *   to deal in the Software without restriction, including without limitation
 *   the rights to use, copy, modify, merge, publish, distribute, sublicense,
 *   and/or sell copies of the Software, and to permit persons to whom
 *   the Software is furnished to do so, subject to the following conditions:
 *
 *   The above copyright notice and this permission notice shall be included
 *   in all copies or substantial portions of the Software.
 *
 *   The Software shall be used for Good, not Evil.
 *
 *   THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 *   IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 *   FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 *   AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 *   LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 *   FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER
 *   DEALINGS IN THE SOFTWARE.
 *
 * JSHint was forked from 2010-12-16 edition of JSLint.
 *
 */
/**
 * Cloud9 Language Foundation
 *
 * @copyright 2011, Ajax.org B.V.
 * @license GPLv3 <http://www.gnu.org/licenses/gpl.txt>
 */
function initBaseUrls(a){require.tlns=a}function initSender(){var a=require(null,"ace/lib/event_emitter").EventEmitter,b=require(null,"ace/lib/oop"),c=function(){};return function(){b.implement(this,a),this.callback=function(a,b){postMessage({type:"call",id:b,data:a})},this.emit=function(a,b){postMessage({type:"event",name:a,data:b})}}.call(c.prototype),new c}"no use strict";var console={log:function(a){postMessage({type:"log",data:a})}},window={console:console},normalizeModule=function(a,b){if(b.indexOf("!")!==-1){var c=b.split("!");return normalizeModule(a,c[0])+"!"+normalizeModule(a,c[1])}if(b.charAt(0)=="."){var d=a.split("/").slice(0,-1).join("/"),b=d+"/"+b;while(b.indexOf(".")!==-1&&e!=b)var e=b,b=b.replace(/\/\.\//,"/").replace(/[^\/]+\/\.\.\//,"")}return b},require=function(a,b){var b=normalizeModule(a,b),c=require.modules[b];if(c)return c.initialized||(c.exports=c.factory().exports,c.initialized=!0),c.exports;var d=b.split("/");d[0]=require.tlns[d[0]]||d[0];var e=d.join("/")+".js";return require.id=b,importScripts(e),require(a,b)};require.modules={},require.tlns={};var define=function(a,b,c){arguments.length==2?c=b:arguments.length==1&&(c=a,a=require.id);if(a.indexOf("text!")===0)return;var d=function(b,c){return require(a,b,c)};require.modules[a]={factory:function(){var a={exports:{}},b=c(d,a.exports,a);return b&&(a.exports=b),a}}},main,sender;onmessage=function(a){var b=a.data;if(b.command)main[b.command].apply(main,b.args);else if(b.init){initBaseUrls(b.tlns),require(null,"ace/lib/fixoldbrowsers"),sender=initSender();var c=require(null,b.module)[b.classname];main=new c(sender)}else b.event&&sender&&sender._emit(b.event,b.data)},define("ace/lib/fixoldbrowsers",["require","exports","module","ace/lib/regexp","ace/lib/es5-shim"],function(a,b,c){a("./regexp"),a("./es5-shim")}),define("ace/lib/regexp",["require","exports","module"],function(a,b,c){function g(a){return(a.global?"g":"")+(a.ignoreCase?"i":"")+(a.multiline?"m":"")+(a.extended?"x":"")+(a.sticky?"y":"")}function h(a,b,c){if(Array.prototype.indexOf)return a.indexOf(b,c);for(var d=c||0;d<a.length;d++)if(a[d]===b)return d;return-1}var d={exec:RegExp.prototype.exec,test:RegExp.prototype.test,match:String.prototype.match,replace:String.prototype.replace,split:String.prototype.split},e=d.exec.call(/()??/,"")[1]===undefined,f=function(){var a=/^/g;return d.test.call(a,""),!a.lastIndex}();RegExp.prototype.exec=function(a){var b=d.exec.apply(this,arguments),c,i;if(typeof a=="string"&&b){!e&&b.length>1&&h(b,"")>-1&&(i=RegExp(this.source,d.replace.call(g(this),"g","")),d.replace.call(a.slice(b.index),i,function(){for(var a=1;a<arguments.length-2;a++)arguments[a]===undefined&&(b[a]=undefined)}));if(this._xregexp&&this._xregexp.captureNames)for(var j=1;j<b.length;j++)c=this._xregexp.captureNames[j-1],c&&(b[c]=b[j]);!f&&this.global&&!b[0].length&&this.lastIndex>b.index&&this.lastIndex--}return b},f||(RegExp.prototype.test=function(a){var b=d.exec.call(this,a);return b&&this.global&&!b[0].length&&this.lastIndex>b.index&&this.lastIndex--,!!b})}),define("ace/lib/es5-shim",["require","exports","module"],function(a,b,c){function p(a){try{return Object.defineProperty(a,"sentinel",{}),"sentinel"in a}catch(b){}}Function.prototype.bind||(Function.prototype.bind=function(b){var c=this;if(typeof c!="function")throw new TypeError;var d=g.call(arguments,1),e=function(){if(this instanceof e){var a=function(){};a.prototype=c.prototype;var f=new a,h=c.apply(f,d.concat(g.call(arguments)));return h!==null&&Object(h)===h?h:f}return c.apply(b,d.concat(g.call(arguments)))};return e});var d=Function.prototype.call,e=Array.prototype,f=Object.prototype,g=e.slice,h=d.bind(f.toString),i=d.bind(f.hasOwnProperty),j,k,l,m,n;if(n=i(f,"__defineGetter__"))j=d.bind(f.__defineGetter__),k=d.bind(f.__defineSetter__),l=d.bind(f.__lookupGetter__),m=d.bind(f.__lookupSetter__);Array.isArray||(Array.isArray=function(b){return h(b)=="[object Array]"}),Array.prototype.forEach||(Array.prototype.forEach=function(b){var c=G(this),d=arguments[1],e=0,f=c.length>>>0;if(h(b)!="[object Function]")throw new TypeError;while(e<f)e in c&&b.call(d,c[e],e,c),e++}),Array.prototype.map||(Array.prototype.map=function(b){var c=G(this),d=c.length>>>0,e=Array(d),f=arguments[1];if(h(b)!="[object Function]")throw new TypeError;for(var g=0;g<d;g++)g in c&&(e[g]=b.call(f,c[g],g,c));return e}),Array.prototype.filter||(Array.prototype.filter=function(b){var c=G(this),d=c.length>>>0,e=[],f=arguments[1];if(h(b)!="[object Function]")throw new TypeError;for(var g=0;g<d;g++)g in c&&b.call(f,c[g],g,c)&&e.push(c[g]);return e}),Array.prototype.every||(Array.prototype.every=function(b){var c=G(this),d=c.length>>>0,e=arguments[1];if(h(b)!="[object Function]")throw new TypeError;for(var f=0;f<d;f++)if(f in c&&!b.call(e,c[f],f,c))return!1;return!0}),Array.prototype.some||(Array.prototype.some=function(b){var c=G(this),d=c.length>>>0,e=arguments[1];if(h(b)!="[object Function]")throw new TypeError;for(var f=0;f<d;f++)if(f in c&&b.call(e,c[f],f,c))return!0;return!1}),Array.prototype.reduce||(Array.prototype.reduce=function(b){var c=G(this),d=c.length>>>0;if(h(b)!="[object Function]")throw new TypeError;if(!d&&arguments.length==1)throw new TypeError;var e=0,f;if(arguments.length>=2)f=arguments[1];else do{if(e in c){f=c[e++];break}if(++e>=d)throw new TypeError}while(!0);for(;e<d;e++)e in c&&(f=b.call(void 0,f,c[e],e,c));return f}),Array.prototype.reduceRight||(Array.prototype.reduceRight=function(b){var c=G(this),d=c.length>>>0;if(h(b)!="[object Function]")throw new TypeError;if(!d&&arguments.length==1)throw new TypeError;var e,f=d-1;if(arguments.length>=2)e=arguments[1];else do{if(f in c){e=c[f--];break}if(--f<0)throw new TypeError}while(!0);do f in this&&(e=b.call(void 0,e,c[f],f,c));while(f--);return e}),Array.prototype.indexOf||(Array.prototype.indexOf=function(b){var c=G(this),d=c.length>>>0;if(!d)return-1;var e=0;arguments.length>1&&(e=E(arguments[1])),e=e>=0?e:Math.max(0,d+e);for(;e<d;e++)if(e in c&&c[e]===b)return e;return-1}),Array.prototype.lastIndexOf||(Array.prototype.lastIndexOf=function(b){var c=G(this),d=c.length>>>0;if(!d)return-1;var e=d-1;arguments.length>1&&(e=Math.min(e,E(arguments[1]))),e=e>=0?e:d-Math.abs(e);for(;e>=0;e--)if(e in c&&b===c[e])return e;return-1}),Object.getPrototypeOf||(Object.getPrototypeOf=function(b){return b.__proto__||(b.constructor?b.constructor.prototype:f)});if(!Object.getOwnPropertyDescriptor){var o="Object.getOwnPropertyDescriptor called on a non-object: ";Object.getOwnPropertyDescriptor=function(b,c){if(typeof b!="object"&&typeof b!="function"||b===null)throw new TypeError(o+b);if(!i(b,c))return;var d,e,g;d={enumerable:!0,configurable:!0};if(n){var h=b.__proto__;b.__proto__=f;var e=l(b,c),g=m(b,c);b.__proto__=h;if(e||g)return e&&(d.get=e),g&&(d.set=g),d}return d.value=b[c],d}}Object.getOwnPropertyNames||(Object.getOwnPropertyNames=function(b){return Object.keys(b)}),Object.create||(Object.create=function(b,c){var d;if(b===null)d={"__proto__":null};else{if(typeof b!="object")throw new TypeError("typeof prototype["+typeof b+"] != 'object'");var e=function(){};e.prototype=b,d=new e,d.__proto__=b}return c!==void 0&&Object.defineProperties(d,c),d});if(Object.defineProperty){var q=p({}),r=typeof document=="undefined"||p(document.createElement("div"));if(!q||!r)var s=Object.defineProperty}if(!Object.defineProperty||s){var t="Property description must be an object: ",u="Object.defineProperty called on non-object: ",v="getters & setters can not be defined on this javascript engine";Object.defineProperty=function(b,c,d){if(typeof b!="object"&&typeof b!="function"||b===null)throw new TypeError(u+b);if(typeof d!="object"&&typeof d!="function"||d===null)throw new TypeError(t+d);if(s)try{return s.call(Object,b,c,d)}catch(e){}if(i(d,"value"))if(n&&(l(b,c)||m(b,c))){var g=b.__proto__;b.__proto__=f,delete b[c],b[c]=d.value,b.__proto__=g}else b[c]=d.value;else{if(!n)throw new TypeError(v);i(d,"get")&&j(b,c,d.get),i(d,"set")&&k(b,c,d.set)}return b}}Object.defineProperties||(Object.defineProperties=function(b,c){for(var d in c)i(c,d)&&Object.defineProperty(b,d,c[d]);return b}),Object.seal||(Object.seal=function(b){return b}),Object.freeze||(Object.freeze=function(b){return b});try{Object.freeze(function(){})}catch(w){Object.freeze=function(b){return function(c){return typeof c=="function"?c:b(c)}}(Object.freeze)}Object.preventExtensions||(Object.preventExtensions=function(b){return b}),Object.isSealed||(Object.isSealed=function(b){return!1}),Object.isFrozen||(Object.isFrozen=function(b){return!1}),Object.isExtensible||(Object.isExtensible=function(b){if(Object(b)===b)throw new TypeError;var c="";while(i(b,c))c+="?";b[c]=!0;var d=i(b,c);return delete b[c],d});if(!Object.keys){var x=!0,y=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],z=y.length;for(var A in{toString:null})x=!1;Object.keys=function H(a){if(typeof a!="object"&&typeof a!="function"||a===null)throw new TypeError("Object.keys called on a non-object");var H=[];for(var b in a)i(a,b)&&H.push(b);if(x)for(var c=0,d=z;c<d;c++){var e=y[c];i(a,e)&&H.push(e)}return H}}if(!Date.prototype.toISOString||(new Date(-621987552e5)).toISOString().indexOf("-000001")===-1)Date.prototype.toISOString=function(){var b,c,d,e;if(!isFinite(this))throw new RangeError;b=[this.getUTCMonth()+1,this.getUTCDate(),this.getUTCHours(),this.getUTCMinutes(),this.getUTCSeconds()],e=this.getUTCFullYear(),e=(e<0?"-":e>9999?"+":"")+("00000"+Math.abs(e)).slice(0<=e&&e<=9999?-4:-6),c=b.length;while(c--)d=b[c],d<10&&(b[c]="0"+d);return e+"-"+b.slice(0,2).join("-")+"T"+b.slice(2).join(":")+"."+("000"+this.getUTCMilliseconds()).slice(-3)+"Z"};Date.now||(Date.now=function(){return(new Date).getTime()}),Date.prototype.toJSON||(Date.prototype.toJSON=function(b){if(typeof this.toISOString!="function")throw new TypeError;return this.toISOString()}),Date.parse("+275760-09-13T00:00:00.000Z")!==864e13&&(Date=function(a){var b=function e(b,c,d,f,g,h,i){var j=arguments.length;if(this instanceof a){var k=j==1&&String(b)===b?new a(e.parse(b)):j>=7?new a(b,c,d,f,g,h,i):j>=6?new a(b,c,d,f,g,h):j>=5?new a(b,c,d,f,g):j>=4?new a(b,c,d,f):j>=3?new a(b,c,d):j>=2?new a(b,c):j>=1?new a(b):new a;return k.constructor=e,k}return a.apply(this,arguments)},c=new RegExp("^(\\d{4}|[+-]\\d{6})(?:-(\\d{2})(?:-(\\d{2})(?:T(\\d{2}):(\\d{2})(?::(\\d{2})(?:\\.(\\d{3}))?)?(?:Z|(?:([-+])(\\d{2}):(\\d{2})))?)?)?)?$");for(var d in a)b[d]=a[d];return b.now=a.now,b.UTC=a.UTC,b.prototype=a.prototype,b.prototype.constructor=b,b.parse=function(d){var e=c.exec(d);if(e){e.shift();for(var f=1;f<7;f++)e[f]=+(e[f]||(f<3?1:0)),f==1&&e[f]--;var g=+e.pop(),h=+e.pop(),i=e.pop(),j=0;if(i){if(h>23||g>59)return NaN;j=(h*60+g)*6e4*(i=="+"?-1:1)}var k=+e[0];return 0<=k&&k<=99?(e[0]=k+400,a.UTC.apply(this,e)+j-126227808e5):a.UTC.apply(this,e)+j}return a.parse.apply(this,arguments)},b}(Date));var B="\t\n\f\r   ᠎             　\u2028\u2029﻿";if(!String.prototype.trim||B.trim()){B="["+B+"]";var C=new RegExp("^"+B+B+"*"),D=new RegExp(B+B+"*$");String.prototype.trim=function(){return String(this).replace(C,"").replace(D,"")}}var E=function(a){return a=+a,a!==a?a=0:a!==0&&a!==1/0&&a!==-Infinity&&(a=(a>0||-1)*Math.floor(Math.abs(a))),a},F="a"[0]!="a",G=function(a){if(a==null)throw new TypeError;return F&&typeof a=="string"&&a?a.split(""):Object(a)}}),define("ace/lib/event_emitter",["require","exports","module"],function(a,b,c){var d={};d._emit=d._dispatchEvent=function(a,b){this._eventRegistry=this._eventRegistry||{},this._defaultHandlers=this._defaultHandlers||{};var c=this._eventRegistry[a]||[],d=this._defaultHandlers[a];if(!c.length&&!d)return;b=b||{},b.type=a,b.stopPropagation||(b.stopPropagation=function(){this.propagationStopped=!0}),b.preventDefault||(b.preventDefault=function(){this.defaultPrevented=!0});for(var e=0;e<c.length;e++){c[e](b);if(b.propagationStopped)break}d&&!b.defaultPrevented&&d(b)},d.setDefaultHandler=function(a,b){this._defaultHandlers=this._defaultHandlers||{};if(this._defaultHandlers[a])throw new Error("The default handler for '"+a+"' is already set");this._defaultHandlers[a]=b},d.on=d.addEventListener=function(a,b){this._eventRegistry=this._eventRegistry||{};var c=this._eventRegistry[a];if(!c)var c=this._eventRegistry[a]=[];c.indexOf(b)==-1&&c.push(b)},d.removeListener=d.removeEventListener=function(a,b){this._eventRegistry=this._eventRegistry||{};var c=this._eventRegistry[a];if(!c)return;var d=c.indexOf(b);d!==-1&&c.splice(d,1)},d.removeAllListeners=function(a){this._eventRegistry&&(this._eventRegistry[a]=[])},b.EventEmitter=d}),define("ace/lib/oop",["require","exports","module"],function(a,b,c){b.inherits=function(){var a=function(){};return function(b,c){a.prototype=c.prototype,b.super_=c.prototype,b.prototype=new a,b.prototype.constructor=b}}(),b.mixin=function(a,b){for(var c in b)a[c]=b[c]},b.implement=function(a,c){b.mixin(a,c)}}),define("ace/narcissus/parser",["require","exports","module","ace/narcissus/lexer","ace/narcissus/definitions","ace/narcissus/options"],function(require,exports,module){function pushDestructuringVarDecls(a,b){for(var c in a){var d=a[c];d.type===IDENTIFIER?b.varDecls.push(d):pushDestructuringVarDecls(d,b)}}function Parser(a){a.parser=this,this.t=a,this.x=null,this.unexpectedEOF=!1,options.mozillaMode&&(this.mozillaMode=!0),options.parenFreeMode&&(this.parenFreeMode=!0)}function StaticContext(a,b,c,d,e){this.parentScript=a,this.parentBlock=b||a,this.inModule=c||!1,this.inFunction=d||!1,this.inForLoopInit=!1,this.topLevel=!0,this.allLabels=new Stack,this.currentLabels=new Stack,this.labeledTargets=new Stack,this.defaultLoopTarget=null,this.defaultTarget=null,this.strictMode=e}function Pragma(a){if(a.type===SEMICOLON){var b=a.expression;if(b.type===STRING&&b.value==="use strict")return a.pragma="strict",!0}return!1}function Node(a,b){var c=a.token;c?(this.type=c.type,this.value=c.value,this.lineno=c.lineno,this.start=c.start,this.end=c.end):this.lineno=a.lineno,this.filename=a.filename,this.children=[];for(var d in b)this[d]=b[d]}function SyntheticNode(a){this.children=[];for(var b in a)this[b]=a[b];this.synthetic=!0}function unevalableConst(a){var b=definitions.tokens[a],c=definitions.opTypeNames.hasOwnProperty(b)?definitions.opTypeNames[b]:b in definitions.keywords?b.toUpperCase():b;return{toSource:function(){return c}}}function tokenString(a){var b=definitions.tokens[a];return/^\W/.test(b)?definitions.opTypeNames[b]:b.toUpperCase()}function blockInit(){return{type:BLOCK,varDecls:[]}}function scriptInit(){return{type:SCRIPT,funDecls:[],varDecls:[],modDefns:new Dict,modAssns:new Dict,modDecls:new Dict,modLoads:new Dict,impDecls:[],expDecls:[],exports:new Dict,hasEmptyReturn:!1,hasReturnWithValue:!1,hasYield:!1}}function Export(a,b){this.node=a,this.isDefinition=b,this.resolved=null}function registerExport(a,b){function c(b,c){if(a.has(b))throw new SyntaxError("multiple exports of "+b);a.set(b,c)}switch(b.type){case MODULE:case FUNCTION:c(b.name,new Export(b,!0));break;case VAR:for(var d=0;d<b.children.length;d++)c(b.children[d].name,new Export(b.children[d],!0));break;case LET:case CONST:throw new Error("NYI: "+definitions.tokens[b.type]);case EXPORT:for(var d=0;d<b.pathList.length;d++){var e=b.pathList[d];switch(e.type){case OBJECT_INIT:for(var f=0;f<e.children.length;f++){var g=e.children[f];g.type===IDENTIFIER?c(g.value,new Export(g,!1)):c(g.children[0].value,new Export(g.children[1],!1))}break;case DOT:c(e.children[1].value,new Export(e,!1));break;case IDENTIFIER:c(e.value,new Export(e,!1));break;default:throw new Error("unexpected export path: "+definitions.tokens[e.type])}}break;default:throw new Error("unexpected export decl: "+definitions.tokens[exp.type])}}function Module(a){var b=a.body.exports,c=a.body.modDefns,d=new Dict;b.forEach(function(a,b){var e=b.node;if(e.type===MODULE)d.set(a,e);else if(!b.isDefinition&&e.type===IDENTIFIER&&c.has(e.value)){var f=c.get(e.value);d.set(a,f)}}),this.node=a,this.exports=b,this.exportedModules=d}function isPragmaToken(a){switch(a){case IDENTIFIER:case STRING:case NUMBER:case NULL:case TRUE:case FALSE:return!0}return!1}function parse(a,b,c){var d=new Tokenizer(a,b,c,options.allowHTMLComments),e=new Parser(d);return e.Script(!1,!1,!0)}function parseFunction(a,b,c,d,e){var f=new Tokenizer(a,d,e),g=new Parser(f);return g.x=new StaticContext(null,null,!1,!1,!1),g.FunctionDefinition(b,c)}function parseStdin(a,b,c,d){if(a.match(/^[\s]*\.begin[\s]*$/))return++b.value,parseMultiline(b,c);d(a.trim())&&(a="");for(;;)try{var e=new Tokenizer(a,"stdin",b.value,!1),f=new Parser(e),g=f.Script(!1,!1);return b.value=e.lineno,g}catch(h){if(!f.unexpectedEOF)throw h;var i;do{c&&putstr(c),i=readline();if(!i)throw h}while(d(i.trim()));a+="\n"+i}}function parseMultiline(a,b){var c="";for(;;){b&&putstr(b);var d=readline();if(d===null)return null;if(d.match(/^[\s]*\.end[\s]*$/))break;c+="\n"+d}var e=new Tokenizer(c,"stdin",a.value,!1),f=new Parser(e),g=f.Script(!1,!1);return a.value=e.lineno,g}var lexer=require("./lexer"),definitions=require("./definitions"),options=require("./options"),Tokenizer=lexer.Tokenizer,Dict=definitions.Dict,Stack=definitions.Stack;eval(definitions.consts),StaticContext.prototype={update:function(a){var b={};for(var c in a)b[c]={value:a[c],writable:!0,enumerable:!0,configurable:!0};return Object.create(this,b)},pushLabel:function(a){return this.update({currentLabels:this.currentLabels.push(a),allLabels:this.allLabels.push(a)})},pushTarget:function(a){var b=a.isLoop,c=b||a.type===SWITCH;return this.currentLabels.isEmpty()?(b&&this.update({defaultLoopTarget:a}),c&&this.update({defaultTarget:a}),this):(a.labels=new Dict,this.currentLabels.forEach(function(b){a.labels.set(b,!0)}),this.update({currentLabels:new Stack,labeledTargets:this.labeledTargets.push(a),defaultLoopTarget:b?a:this.defaultLoopTarget,defaultTarget:c?a:this.defaultTarget}))},nest:function(){return this.topLevel?this.update({topLevel:!1}):this},canImport:function(){return this.topLevel&&!this.inFunction},canExport:function(){return this.inModule&&this.topLevel&&!this.inFunction},banWith:function(){return this.strictMode||this.inModule},modulesAllowed:function(){return this.topLevel&&!this.inFunction}};var Pp=Parser.prototype;Pp.mozillaMode=!1,Pp.parenFreeMode=!1,Pp.withContext=function(a,b){var c=this.x;this.x=a;var d=b.call(this);return this.x=c,d},Pp.newNode=function(b){return new Node(this.t,b)},Pp.fail=function(b){throw this.t.newSyntaxError(b)},Pp.match=function(b,c,d){return this.t.match(b,c,d)},Pp.mustMatch=function(b,c){return this.t.mustMatch(b,c)},Pp.peek=function(b){return this.t.peek(b)},Pp.peekOnSameLine=function(b){return this.t.peekOnSameLine(b)},Pp.done=function(){return this.t.done},Pp.Script=function(b,c,d){var e=this.newNode(scriptInit()),f=new StaticContext(e,e,b,c);return this.withContext(f,function(){this.Statements(e,!0)}),d&&!this.done()&&this.fail("expected end of input"),e};var Np=Node.prototype=SyntheticNode.prototype={};Np.constructor=Node;var TO_SOURCE_SKIP={type:!0,value:!0,lineno:!0,start:!0,end:!0,tokenizer:!0,assignOp:!0};Np.toSource=function(){var b={},c=this;b.type=unevalableConst(this.type);if(this.generatingSource)return b.toSource();this.generatingSource=!0,"value"in this&&(b.value=this.value),"lineno"in this&&(b.lineno=this.lineno),"start"in this&&(b.start=this.start),"end"in this&&(b.end=this.end),this.assignOp&&(b.assignOp=unevalableConst(this.assignOp));for(var d in this)this.hasOwnProperty(d)&&!(d in TO_SOURCE_SKIP)&&(b[d]=this[d]);try{return b.toSource()}finally{delete this.generatingSource}},Np.push=function(a){return a!==null&&(a.start<this.start&&(this.start=a.start),this.end<a.end&&(this.end=a.end)),this.children.push(a)},Node.indentLevel=0,Np.toString=function(){var a=[];for(var b in this)this.hasOwnProperty(b)&&b!=="type"&&b!=="target"&&a.push({id:b,value:this[b]});a.sort(function(a,b){return a.id<b.id?-1:1});var c="    ",d=++Node.indentLevel,e="{\n"+c.repeat(d)+"type: "+tokenString(this.type);for(b=0;b<a.length;b++)e+=",\n"+c.repeat(d)+a[b].id+": "+a[b].value;return d=--Node.indentLevel,e+="\n"+c.repeat(d)+"}",e},Np.synth=function(a){var b=new SyntheticNode(a);return b.filename=this.filename,b.lineno=this.lineno,b.start=this.start,b.end=this.end,b};var LOOP_INIT={isLoop:!0};definitions.defineGetter(Np,"length",function(){throw new Error("Node.prototype.length is gone; use n.children.length instead")}),definitions.defineProperty(String.prototype,"repeat",function(a){var b="",c=this+b;while(--a>=0)b+=c;return b},!1,!1,!0),Pp.MaybeLeftParen=function(){return this.parenFreeMode?this.match(LEFT_PAREN)?LEFT_PAREN:END:this.mustMatch(LEFT_PAREN).type},Pp.MaybeRightParen=function(b){b===LEFT_PAREN&&this.mustMatch(RIGHT_PAREN)},Pp.Statements=function(b,c){var d=!!c;try{while(!this.done()&&this.peek(!0)!==RIGHT_CURLY){var e=this.Statement();b.push(e),d&&Pragma(e)?(this.x.strictMode=!0,b.strict=!0):d=!1}}catch(f){try{this.done()&&(this.unexpectedEOF=!0)}catch(f){}throw f}},Pp.Block=function(){this.mustMatch(LEFT_CURLY);var b=this.newNode(blockInit()),c=this.x.update({parentBlock:b}).pushTarget(b);return this.withContext(c,function(){this.Statements(b)}),this.mustMatch(RIGHT_CURLY),b};var DECLARED_FORM=0,EXPRESSED_FORM=1,STATEMENT_FORM=2;Pp.Statement=function(){var b,c,d,e,f,g,h,i=this.t.get(!0),j,k,l,m,n=this.t.blockComments;switch(i){case IMPORT:this.x.canImport()||this.fail("illegal context for import statement"),d=this.newNode(),d.pathList=this.ImportPathList(),this.x.parentScript.impDecls.push(d);break;case EXPORT:this.x.canExport()||this.fail("export statement not in module top level");switch(this.peek()){case MODULE:case FUNCTION:case LET:case VAR:case CONST:return d=this.Statement(),d.blockComments=n,d.exported=!0,this.x.parentScript.expDecls.push(d),registerExport(this.x.parentScript.exports,d),d}d=this.newNode(),d.pathList=this.ExportPathList(),this.x.parentScript.expDecls.push(d),registerExport(this.x.parentScript.exports,d);break;case FUNCTION:return this.FunctionDefinition(!0,this.x.topLevel?DECLARED_FORM:STATEMENT_FORM,n);case LEFT_CURLY:return d=this.newNode(blockInit()),l=this.x.update({parentBlock:d}).pushTarget(d).nest(),this.withContext(l,function(){this.Statements(d)}),this.mustMatch(RIGHT_CURLY),d;case IF:return d=this.newNode(),d.condition=this.HeadExpression(),l=this.x.pushTarget(d).nest(),this.withContext(l,function(){d.thenPart=this.Statement(),d.elsePart=this.match(ELSE,!0)?this.Statement():null}),d;case SWITCH:return d=this.newNode({cases:[],defaultIndex:-1}),d.discriminant=this.HeadExpression(),l=this.x.pushTarget(d).nest(),this.withContext(l,function(){this.mustMatch(LEFT_CURLY);while((i=this.t.get())!==RIGHT_CURLY){switch(i){case DEFAULT:d.defaultIndex>=0&&this.fail("More than one switch default");case CASE:e=this.newNode(),i===DEFAULT?d.defaultIndex=d.cases.length:e.caseLabel=this.Expression(COLON);break;default:this.fail("Invalid switch case")}this.mustMatch(COLON),e.statements=this.newNode(blockInit());while((i=this.peek(!0))!==CASE&&i!==DEFAULT&&i!==RIGHT_CURLY)e.statements.push(this.Statement());d.cases.push(e)}}),d;case FOR:return d=this.newNode(LOOP_INIT),d.blockComments=n,this.match(IDENTIFIER)&&(this.t.token.value==="each"?d.isEach=!0:this.t.unget()),this.parenFreeMode||this.mustMatch(LEFT_PAREN),l=this.x.pushTarget(d).nest(),m=this.x.update({inForLoopInit:!0}),e=null,(i=this.peek(!0))!==SEMICOLON&&this.withContext(m,function(){i===VAR||i===CONST?(this.t.get(),e=this.Variables()):i===LET?(this.t.get(),this.peek()===LEFT_PAREN?e=this.LetBlock(!1):(this.x.parentBlock=d,d.varDecls=[],e=this.Variables())):e=this.Expression()}),e&&this.match(IN)?(d.type=FOR_IN,this.withContext(m,function(){d.object=this.Expression();if(e.type===VAR||e.type===LET){g=e.children;if(g.length!==1&&e.destructurings.length!==1)throw new SyntaxError("Invalid for..in left-hand side",this.filename,e.lineno);e.destructurings.length>0?d.iterator=e.destructurings[0]:d.iterator=g[0],d.varDecl=e}else{if(e.type===ARRAY_INIT||e.type===OBJECT_INIT)e.destructuredNames=this.checkDestructuring(e);d.iterator=e}})):(m.inForLoopInit=!1,d.setup=e,this.mustMatch(SEMICOLON),d.isEach&&this.fail("Invalid for each..in loop"),this.withContext(m,function(){d.condition=this.peek(!0)===SEMICOLON?null:this.Expression(),this.mustMatch(SEMICOLON),j=this.peek(!0),d.update=(this.parenFreeMode?j===LEFT_CURLY||definitions.isStatementStartCode[j]:j===RIGHT_PAREN)?null:this.Expression()})),this.parenFreeMode||this.mustMatch(RIGHT_PAREN),this.withContext(l,function(){d.body=this.Statement()}),d;case WHILE:return d=this.newNode({isLoop:!0}),d.blockComments=n,d.condition=this.HeadExpression(),l=this.x.pushTarget(d).nest(),this.withContext(l,function(){d.body=this.Statement()}),d;case DO:return d=this.newNode({isLoop:!0}),d.blockComments=n,l=this.x.pushTarget(d).next(),this.withContext(l,function(){d.body=this.Statement()}),this.mustMatch(WHILE),d.condition=this.HeadExpression(),this.match(SEMICOLON),d;case BREAK:case CONTINUE:d=this.newNode(),d.blockComments=n,l=this.x.pushTarget(d),this.peekOnSameLine()===IDENTIFIER&&(this.t.get(),d.label=this.t.token.value),d.label?d.target=l.labeledTargets.find(function(a){return a.labels.has(d.label)}):i===CONTINUE?d.target=l.defaultLoopTarget:d.target=l.defaultTarget,d.target||this.fail("Invalid "+(i===BREAK?"break":"continue")),!d.target.isLoop&&i===CONTINUE&&this.fail("Invalid continue");break;case TRY:d=this.newNode({catchClauses:[]}),d.blockComments=n,d.tryBlock=this.Block();while(this.match(CATCH)){e=this.newNode(),f=this.MaybeLeftParen();switch(this.t.get()){case LEFT_BRACKET:case LEFT_CURLY:this.t.unget(),e.varName=this.DestructuringExpression(!0);break;case IDENTIFIER:e.varName=this.t.token.value;break;default:this.fail("missing identifier in catch")}this.match(IF)&&(this.mozillaMode||this.fail("Illegal catch guard"),d.catchClauses.length&&!d.catchClauses.top().guard&&this.fail("Guarded catch after unguarded"),e.guard=this.Expression()),this.MaybeRightParen(f),e.block=this.Block(),d.catchClauses.push(e)}return this.match(FINALLY)&&(d.finallyBlock=this.Block()),!d.catchClauses.length&&!d.finallyBlock&&this.fail("Invalid try statement"),d;case CATCH:case FINALLY:this.fail(definitions.tokens[i]+" without preceding try");case THROW:d=this.newNode(),d.exception=this.Expression();break;case RETURN:d=this.ReturnOrYield();break;case WITH:return this.x.banWith()&&this.fail("with statements not allowed in strict code or modules"),d=this.newNode(),d.blockComments=n,d.object=this.HeadExpression(),l=this.x.pushTarget(d).next(),this.withContext(l,function(){d.body=this.Statement()}),d;case VAR:case CONST:d=this.Variables();break;case LET:if(this.peek()===LEFT_PAREN)return d=this.LetBlock(!0),d;d=this.Variables();break;case DEBUGGER:d=this.newNode();break;case NEWLINE:case SEMICOLON:return d=this.newNode({type:SEMICOLON}),d.blockComments=n,d.expression=null,d;case IDENTIFIER:case USE:case MODULE:switch(this.t.token.value){case"use":if(!isPragmaToken(this.peekOnSameLine())){this.t.unget();break}return this.newNode({type:USE,params:this.Pragmas()});case"module":this.x.modulesAllowed()||this.fail("module declaration not at top level"),this.x.parentScript.hasModules=!0,i=this.peekOnSameLine();if(i!==IDENTIFIER&&i!==LEFT_CURLY){this.t.unget();break}d=this.newNode({type:MODULE}),d.blockComments=n,this.mustMatch(IDENTIFIER),c=this.t.token.value;if(this.match(LEFT_CURLY))return d.name=c,d.body=this.Script(!0,!1),d.module=new Module(d),this.mustMatch(RIGHT_CURLY),this.x.parentScript.modDefns.set(d.name,d),d;return this.t.unget(),this.ModuleVariables(d),d;default:i=this.peek();if(i===COLON)return c=this.t.token.value,this.x.allLabels.has(c)&&this.fail("Duplicate label: "+c),this.t.get(),d=this.newNode({type:LABEL,label:c}),d.blockComments=n,l=this.x.pushLabel(c).nest(),this.withContext(l,function(){d.statement=this.Statement()}),d.target=d.statement.type===LABEL?d.statement.target:d.statement,d};default:d=this.newNode({type:SEMICOLON}),this.t.unget(),d.blockComments=n,d.expression=this.Expression(),d.end=d.expression.end}return d.blockComments=n,this.MagicalSemicolon(),d},Pp.Pragmas=function(){var b=[];do b.push(this.Pragma());while(this.match(COMMA));return this.MagicalSemicolon(),b},Pp.Pragma=function(){var b=[],c;do c=this.t.get(!0),b.push(this.t.token);while(isPragmaToken(this.peek()));return b},Pp.MagicalSemicolon=function(){var b;this.t.lineno===this.t.token.lineno&&(b=this.peekOnSameLine(),b!==END&&b!==NEWLINE&&b!==SEMICOLON&&b!==RIGHT_CURLY&&this.fail("missing ; before statement")),this.match(SEMICOLON)},Pp.ReturnOrYield=function(){var b,c,d=this.t.token.type,e,f=this.x.parentScript;return d===RETURN?this.x.inFunction||this.fail("Return not in function"):(this.x.inFunction||this.fail("Yield not in function"),f.hasYield=!0),b=this.newNode({value:undefined}),e=d===RETURN?this.peekOnSameLine(!0):this.peek(!0),e!==END&&e!==NEWLINE&&e!==SEMICOLON&&e!==RIGHT_CURLY&&(d!==YIELD||e!==d&&e!==RIGHT_BRACKET&&e!==RIGHT_PAREN&&e!==COLON&&e!==COMMA)?d===RETURN?(b.value=this.Expression(),f.hasReturnWithValue=!0):b.value=this.AssignExpression():d===RETURN&&(f.hasEmptyReturn=!0),b},Pp.ModuleExpression=function(){return this.match(STRING)?this.newNode():this.QualifiedPath()},Pp.ImportPathList=function(){var b=[];do b.push(this.ImportPath());while(this.match(COMMA));return b},Pp.ImportPath=function(){var b=this.QualifiedPath();if(!this.match(DOT))return b.type===IDENTIFIER&&this.fail("cannot import local variable"),b;var c=this.newNode();return c.push(b),c.push(this.ImportSpecifierSet()),c},Pp.ExplicitSpecifierSet=function(b){var c,d,e,f;c=this.newNode({type:OBJECT_INIT}),this.mustMatch(LEFT_CURLY);if(!this.match(RIGHT_CURLY))do e=this.Identifier(),this.match(COLON)?(d=this.newNode({type:PROPERTY_INIT}),d.push(e),d.push(b()),c.push(d)):c.push(e);while(!this.match(RIGHT_CURLY)&&this.mustMatch(COMMA));return c},Pp.ImportSpecifierSet=function(){var b=this;return this.match(MUL)?this.newNode({type:IDENTIFIER,name:"*"}):ExplicitSpecifierSet(function(){return b.Identifier()})},Pp.Identifier=function(){return this.mustMatch(IDENTIFIER),this.newNode({type:IDENTIFIER})},Pp.IdentifierName=function(){return this.mustMatch(IDENTIFIER,!0),this.newNode({type:IDENTIFIER})},Pp.QualifiedPath=function(){var b,c;b=this.Identifier();while(this.match(DOT)){if(this.peek()!==IDENTIFIER){this.t.unget();break}c=this.newNode(),c.push(b),c.push(this.Identifier()),b=c}return b},Pp.ExportPath=function(){var b=this;return this.peek()===LEFT_CURLY?this.ExplicitSpecifierSet(function(){return b.QualifiedPath()}):this.QualifiedPath()},Pp.ExportPathList=function(){var b=[];do b.push(this.ExportPath());while(this.match(COMMA));return b},Pp.FunctionDefinition=function(b,c,d){var e,f=this.newNode({params:[],paramComments:[]});typeof d=="undefined"&&(d=null),f.blockComments=d,f.type!==FUNCTION&&(f.type=f.value==="get"?GETTER:SETTER),this.match(MUL)&&(f.isExplicitGenerator=!0),this.match(IDENTIFIER,!1,!0)?f.name=this.t.token.value:b&&this.fail("missing function identifier");var g=this.x.inModule;x2=new StaticContext(null,null,g,!0,this.x.strictMode),this.withContext(x2,function(){this.mustMatch(LEFT_PAREN);if(!this.match(RIGHT_PAREN)){do{e=this.t.get(),f.paramComments.push(this.t.lastBlockComment());switch(e){case LEFT_BRACKET:case LEFT_CURLY:this.t.unget(),f.params.push(this.DestructuringExpression());break;case IDENTIFIER:f.params.push(this.t.token.value);break;default:this.fail("missing formal parameter")}}while(this.match(COMMA));this.mustMatch(RIGHT_PAREN)}e=this.t.get(!0),e!==LEFT_CURLY&&this.t.unget(),e!==LEFT_CURLY?f.body=this.AssignExpression():f.body=this.Script(g,!0)}),e===LEFT_CURLY&&this.mustMatch(RIGHT_CURLY),f.end=this.t.token.end,f.functionForm=c,c===DECLARED_FORM&&this.x.parentScript.funDecls.push(f),this.x.inModule&&!f.isExplicitGenerator&&f.body.hasYield&&this.fail("yield in non-generator function");if(f.isExplicitGenerator||f.body.hasYield)f.body=this.newNode({type:GENERATOR,body:f.body});return f},Pp.ModuleVariables=function(b){var c,d;do c=this.Identifier(),this.match(ASSIGN)&&(d=this.ModuleExpression(),c.initializer=d,d.type===STRING?this.x.parentScript.modLoads.set(c.value,d.value):this.x.parentScript.modAssns.set(c.value,c)),b.push(c);while(this.match(COMMA))},Pp.Variables=function(b){var c,d,e,f,g,h;h=this.t.token.type;switch(h){case VAR:case CONST:g=this.x.parentScript;break;case LET:g=this.x.parentBlock;break;case LEFT_PAREN:h=LET,g=b}c=this.newNode({type:h,destructurings:[]});do{h=this.t.get();if(h===LEFT_BRACKET||h===LEFT_CURLY){this.t.unget();var i=this.DestructuringExpression(!0);d=this.newNode({type:IDENTIFIER,name:i,readOnly:c.type===CONST}),c.push(d),pushDestructuringVarDecls(d.name.destructuredNames,g),c.destructurings.push({exp:i,decl:d});if(this.x.inForLoopInit&&this.peek()===IN)continue;this.mustMatch(ASSIGN),this.t.token.assignOp&&this.fail("Invalid variable initialization"),d.blockComment=this.t.lastBlockComment(),d.initializer=this.AssignExpression();continue}h!==IDENTIFIER&&this.fail("missing variable name"),d=this.newNode({type:IDENTIFIER,name:this.t.token.value,readOnly:c.type===CONST}),c.push(d),g.varDecls.push(d);if(this.match(ASSIGN)){var j=this.t.lastBlockComment();this.t.token.assignOp&&this.fail("Invalid variable initialization"),d.initializer=this.AssignExpression()}else var j=this.t.lastBlockComment();d.blockComment=j}while(this.match(COMMA));return c},Pp.LetBlock=function(b){var c,d;return c=this.newNode({type:LET_BLOCK,varDecls:[]}),this.mustMatch(LEFT_PAREN),c.variables=this.Variables(c),this.mustMatch(RIGHT_PAREN),b&&this.peek()!==LEFT_CURLY&&(d=this.newNode({type:SEMICOLON,expression:c}),b=!1),b?c.block=this.Block():c.expression=this.AssignExpression(),c},Pp.checkDestructuring=function(b,c){b.type===ARRAY_COMP&&this.fail("Invalid array comprehension left-hand side");if(b.type!==ARRAY_INIT&&b.type!==OBJECT_INIT)return;var d={},e,f,g,h,i,j=b.children;for(var k=0,l=j.length;k<l;k++){if(!(e=j[k]))continue;e.type===PROPERTY_INIT?(i=e.children,h=i[1],g=i[0].value):b.type===OBJECT_INIT?(h=e,g=e.value):(h=e,g=k),h.type===ARRAY_INIT||h.type===OBJECT_INIT?d[g]=this.checkDestructuring(h,c):(c&&h.type!==IDENTIFIER&&this.fail("missing name in pattern"),d[g]=h)}return d},Pp.DestructuringExpression=function(b){var c=this.PrimaryExpression();return c.destructuredNames=this.checkDestructuring(c,b),c},Pp.GeneratorExpression=function(b){return this.newNode({type:GENERATOR,expression:b,tail:this.ComprehensionTail()})},Pp.ComprehensionTail=function(){var b,c,d,e,f;b=this.newNode({type:COMP_TAIL});do{c=this.newNode({type:FOR_IN,isLoop:!0}),this.match(IDENTIFIER)&&(this.mozillaMode&&this.t.token.value==="each"?c.isEach=!0:this.t.unget()),f=this.MaybeLeftParen();switch(this.t.get()){case LEFT_BRACKET:case LEFT_CURLY:this.t.unget(),c.iterator=this.DestructuringExpression();break;case IDENTIFIER:c.iterator=e=this.newNode({type:IDENTIFIER}),e.name=e.value,c.varDecl=d=this.newNode({type:VAR}),d.push(e),this.x.parentScript.varDecls.push(e);break;default:this.fail("missing identifier")}this.mustMatch(IN),c.object=this.Expression(),this.MaybeRightParen(f),b.push(c)}while(this.match(FOR));return this.match(IF)&&(b.guard=this.HeadExpression()),b},Pp.HeadExpression=function(){var b=this.MaybeLeftParen(),c=this.ParenExpression();this.MaybeRightParen(b);if(b===END&&!c.parenthesized){var d=this.peek();d!==LEFT_CURLY&&!definitions.isStatementStartCode[d]&&this.fail("Unparenthesized head followed by unbraced body")}return c},Pp.ParenExpression=function(){var b=this.x.update({inForLoopInit:this.x.inForLoopInit&&this.t.token.type===LEFT_PAREN}),c=this.withContext(b,function(){return this.Expression()});return this.match(FOR)&&(c.type===YIELD&&!c.parenthesized&&this.fail("Yield expression must be parenthesized"),c.type===COMMA&&!c.parenthesized&&this.fail("Generator expression must be parenthesized"),c=this.GeneratorExpression(c)),c},Pp.Expression=function(){var b,c;b=this.AssignExpression();if(this.match(COMMA)){c=this.newNode({type:COMMA}),c.push(b),b=c;do c=b.children[b.children.length-1],c.type===YIELD&&!c.parenthesized&&this.fail("Yield expression must be parenthesized"),b.push(this.AssignExpression());while(this.match(COMMA))}return b},Pp.AssignExpression=function(){var b,c;if(this.match(YIELD,!0))return this.ReturnOrYield();b=this.newNode({type:ASSIGN}),c=this.ConditionalExpression();if(!this.match(ASSIGN))return c;b.blockComment=this.t.lastBlockComment();switch(c.type){case OBJECT_INIT:case ARRAY_INIT:c.destructuredNames=this.checkDestructuring(c);case IDENTIFIER:case DOT:case INDEX:case CALL:break;default:this.fail("Bad left-hand side of assignment")}return b.assignOp=c.assignOp=this.t.token.assignOp,b.push(c),b.push(this.AssignExpression()),b},Pp.ConditionalExpression=function(){var b,c;b=this.OrExpression();if(this.match(HOOK)){c=b,b=this.newNode({type:HOOK}),b.push(c);var d=this.x.update({inForLoopInit:!1});this.withContext(d,function(){b.push(this.AssignExpression())}),this.match(COLON)||this.fail("missing : after ?"),b.push(this.AssignExpression())}return b},Pp.OrExpression=function(){var b,c;b=this.AndExpression();while(this.match(OR))c=this.newNode(),c.push(b),c.push(this.AndExpression()),b=c;return b},Pp.AndExpression=function(){var b,c;b=this.BitwiseOrExpression();while(this.match(AND))c=this.newNode(),c.push(b),c.push(this.BitwiseOrExpression()),b=c;return b},Pp.BitwiseOrExpression=function(){var b,c;b=this.BitwiseXorExpression();while(this.match(BITWISE_OR))c=this.newNode(),c.push(b),c.push(this.BitwiseXorExpression()),b=c;return b},Pp.BitwiseXorExpression=function(){var b,c;b=this.BitwiseAndExpression();while(this.match(BITWISE_XOR))c=this.newNode(),c.push(b),c.push(this.BitwiseAndExpression()),b=c;return b},Pp.BitwiseAndExpression=function(){var b,c;b=this.EqualityExpression();while(this.match(BITWISE_AND))c=this.newNode(),c.push(b),c.push(this.EqualityExpression()),b=c;return b},Pp.EqualityExpression=function(){var b,c;b=this.RelationalExpression();while(this.match(EQ)||this.match(NE)||this.match(STRICT_EQ)||this.match(STRICT_NE))c=this.newNode(),c.push(b),c.push(this.RelationalExpression()),b=c;return b},Pp.RelationalExpression=function(){var b,c,d=this.x.update({inForLoopInit:!1});return this.withContext(d,function(){b=this.ShiftExpression();while(this.match(LT)||this.match(LE)||this.match(GE)||this.match(GT)||!this.x.inForLoopInit&&this.match(IN)||this.match(INSTANCEOF))c=this.newNode(),c.push(b),c.push(this.ShiftExpression()),b=c}),b},Pp.ShiftExpression=function(){var b,c;b=this.AddExpression();while(this.match(LSH)||this.match(RSH)||this.match(URSH))c=this.newNode(),c.push(b),c.push(this.AddExpression()),b=c;return b},Pp.AddExpression=function(){var b,c;b=this.MultiplyExpression();while(this.match(PLUS)||this.match(MINUS))c=this.newNode(),c.push(b),c.push(this.MultiplyExpression()),b=c;return b},Pp.MultiplyExpression=function(){var b,c;b=this.UnaryExpression();while(this.match(MUL)||this.match(DIV)||this.match(MOD))c=this.newNode(),c.push(b),c.push(this.UnaryExpression()),b=c;return b},Pp.UnaryExpression=function(){var b,c,d;switch(d=this.t.get(!0)){case DELETE:case VOID:case TYPEOF:case NOT:case BITWISE_NOT:case PLUS:case MINUS:d===PLUS?b=this.newNode({type:UNARY_PLUS}):d===MINUS?b=this.newNode({type:UNARY_MINUS}):b=this.newNode(),b.push(this.UnaryExpression());break;case INCREMENT:case DECREMENT:b=this.newNode(),b.push(this.MemberExpression(!0));break;default:this.t.unget(),b=this.MemberExpression(!0),this.t.tokens[this.t.tokenIndex+this.t.lookahead-1&3].lineno===this.t.lineno&&(this.match(INCREMENT)||this.match(DECREMENT))&&(c=this.newNode({postfix:!0}),c.push(b),b=c)}return b},Pp.MemberExpression=function(b){var c,d,e,f;this.match(NEW)?(c=this.newNode(),c.push(this.MemberExpression(!1)),this.match(LEFT_PAREN)&&(c.type=NEW_WITH_ARGS,c.push(this.ArgumentList()))):c=this.PrimaryExpression();while((f=this.t.get())!==END){switch(f){case DOT:d=this.newNode(),d.push(c),d.push(this.IdentifierName());break;case LEFT_BRACKET:d=this.newNode({type:INDEX}),d.push(c),d.push(this.Expression()),this.mustMatch(RIGHT_BRACKET);break;case LEFT_PAREN:if(b){d=this.newNode({type:CALL}),d.push(c),d.push(this.ArgumentList());break};default:return this.t.unget(),c}c=d}return c},Pp.ArgumentList=function(){var b,c;b=this.newNode({type:LIST});if(this.match(RIGHT_PAREN,!0))return b;do c=this.AssignExpression(),c.type===YIELD&&!c.parenthesized&&this.peek()===COMMA&&this.fail("Yield expression must be parenthesized"),this.match(FOR)&&(c=this.GeneratorExpression(c),(b.children.length>1||this.peek(!0)===COMMA)&&this.fail("Generator expression must be parenthesized")),b.push(c);while(this.match(COMMA));return this.mustMatch(RIGHT_PAREN),b},Pp.PrimaryExpression=function(){var b,c,d=this.t.get(!0);switch(d){case FUNCTION:b=this.FunctionDefinition(!1,EXPRESSED_FORM);break;case LEFT_BRACKET:b=this.newNode({type:ARRAY_INIT});while((d=this.peek(!0))!==RIGHT_BRACKET){if(d===COMMA){this.t.get(),b.push(null);continue}b.push(this.AssignExpression());if(d!==COMMA&&!this.match(COMMA))break}b.children.length===1&&this.match(FOR)&&(c=this.newNode({type:ARRAY_COMP,expression:b.children[0],tail:this.ComprehensionTail()}),b=c),this.mustMatch(RIGHT_BRACKET);break;case LEFT_CURLY:var e,f;b=this.newNode({type:OBJECT_INIT});a:if(!this.match(RIGHT_CURLY)){do{d=this.t.get();if(this.t.token.value!=="get"&&this.t.token.value!=="set"||this.peek()!==IDENTIFIER){var g=this.t.blockComments;switch(d){case IDENTIFIER:case NUMBER:case STRING:e=this.newNode({type:IDENTIFIER});break;case RIGHT_CURLY:break a;default:if(this.t.token.value in definitions.keywords){e=this.newNode({type:IDENTIFIER});break}this.fail("Invalid property name")}this.match(COLON)?(c=this.newNode({type:PROPERTY_INIT}),c.push(e),c.push(this.AssignExpression()),c.blockComments=g,b.push(c)):(this.peek()!==COMMA&&this.peek()!==RIGHT_CURLY&&this.fail("missing : after property"),b.push(e))}else b.push(this.FunctionDefinition(!0,EXPRESSED_FORM))}while(this.match(COMMA));this.mustMatch(RIGHT_CURLY)}break;case LEFT_PAREN:b=this.ParenExpression(),this.mustMatch(RIGHT_PAREN),b.parenthesized=!0;break;case LET:b=this.LetBlock(!1);break;case NULL:case THIS:case TRUE:case FALSE:case IDENTIFIER:case NUMBER:case STRING:case REGEXP:b=this.newNode();break;default:this.fail("missing operand; found "+definitions.tokens[d])}return b},exports.parse=parse,exports.parseStdin=parseStdin,exports.parseFunction=parseFunction,exports.Node=Node,exports.DECLARED_FORM=DECLARED_FORM,exports.EXPRESSED_FORM=EXPRESSED_FORM,exports.STATEMENT_FORM=STATEMENT_FORM,exports.Tokenizer=Tokenizer,exports.Parser=Parser,exports.Module=Module,exports.Export=Export}),define("ace/narcissus/lexer",["require","exports","module","ace/narcissus/definitions"],function(require,exports,module){function isValidIdentifierChar(a,b){if(a<="")return a>="a"&&a<="z"||a>="A"&&a<="Z"||a==="$"||a==="_"||!b&&a>="0"&&a<="9"?!0:!1;var c={};c["x"+a]=!0,c[a]=!0;var d=!1;try{d=Function("x","return (x."+(b?"":"x")+a+");")(c)===!0}catch(e){}return d}function isIdentifier(a){if(typeof a!="string")return!1;if(a.length===0)return!1;if(!isValidIdentifierChar(a[0],!0))return!1;for(var b=1;b<a.length;b++)if(!isValidIdentifierChar(a[b],!1))return!1;return!0}function Tokenizer(a,b,c,d){this.cursor=0,this.source=String(a),this.tokens=[],this.tokenIndex=0,this.lookahead=0,this.scanNewlines=!1,this.filename=b||"",this.lineno=c||1,this.allowHTMLComments=d,this.blockComments=null}var definitions=require("./definitions");eval(definitions.consts);var opTokens={};for(var op in definitions.opTypeNames){if(op==="\n"||op===".")continue;var node=opTokens;for(var i=0;i<op.length;i++){var ch=op[i];ch in node||(node[ch]={}),node=node[ch],node.op=op}}Tokenizer.prototype={(get done(){return this.peek(!0)===END}),(get token(){return this.tokens[this.tokenIndex]}),match:function(a,b,c){return this.get(b,c)===a||this.unget()},mustMatch:function(a,b){if(!this.match(a,!1,b))throw this.newSyntaxError("Missing "+definitions.tokens[a].toLowerCase());return this.token},peek:function(a){var b,c;return this.lookahead?(c=this.tokens[this.tokenIndex+this.lookahead&3],b=this.scanNewlines&&c.lineno!==this.lineno?NEWLINE:c.type):(b=this.get(a),this.unget()),b},peekOnSameLine:function(a){this.scanNewlines=!0;var b=this.peek(a);return this.scanNewlines=!1,b},lastBlockComment:function(){var a=this.blockComments.length;return a?this.blockComments[a-1]:null},skip:function(){var a=this.source;this.blockComments=[];for(;;){var b=a[this.cursor++],c=a[this.cursor];if(b==="\r"){if(c==="\n")continue;b="\n"}if(b==="\n"&&!this.scanNewlines)this.lineno++;else if(b==="/"&&c==="*"){var d=++this.cursor;for(;;){b=a[this.cursor++];if(b===undefined)throw this.newSyntaxError("Unterminated comment");if(b==="*"){c=a[this.cursor];if(c==="/"){var e=this.cursor-1;this.cursor++;break}}else b==="\n"&&this.lineno++}this.blockComments.push(a.substring(d,e))}else if(b==="/"&&c==="/"||this.allowHTMLComments&&b==="<"&&c==="!"&&a[this.cursor+1]==="-"&&a[this.cursor+2]==="-"&&(this.cursor+=2)){this.cursor++;for(;;){b=a[this.cursor++],c=a[this.cursor];if(b===undefined)return;b==="\r"&&c!=="\n"&&(b="\n");if(b==="\n"){this.scanNewlines?this.cursor--:this.lineno++;break}}}else if(!(b in definitions.whitespace)){this.cursor--;return}}},lexExponent:function(){var a=this.source,b=a[this.cursor];if(b==="e"||b==="E"){this.cursor++,ch=a[this.cursor++];if(ch==="+"||ch==="-")ch=a[this.cursor++];if(ch<"0"||ch>"9")throw this.newSyntaxError("Missing exponent");do ch=a[this.cursor++];while(ch>="0"&&ch<="9");return this.cursor--,!0}return!1},lexZeroNumber:function(a){var b=this.token,c=this.source;b.type=NUMBER,a=c[this.cursor++];if(a==="."){do a=c[this.cursor++];while(a>="0"&&a<="9");this.cursor--,this.lexExponent(),b.value=parseFloat(c.substring(b.start,this.cursor))}else if(a==="x"||a==="X"){do a=c[this.cursor++];while(a>="0"&&a<="9"||a>="a"&&a<="f"||a>="A"&&a<="F");this.cursor--,b.value=parseInt(c.substring(b.start,this.cursor))}else if(a>="0"&&a<="7"){do a=c[this.cursor++];while(a>="0"&&a<="7");this.cursor--,b.value=parseInt(c.substring(b.start,this.cursor))}else this.cursor--,this.lexExponent(),b.value=0},lexNumber:function(a){var b=this.token,c=this.source;b.type=NUMBER;var d=!1;do a=c[this.cursor++],a==="."&&!d&&(d=!0,a=c[this.cursor++]);while(a>="0"&&a<="9");this.cursor--;var e=this.lexExponent();d=d||e;var f=c.substring(b.start,this.cursor);b.value=d?parseFloat(f):parseInt(f)},lexDot:function(a){var b=this.token,c=this.source,d=c[this.cursor];if(d>="0"&&d<="9"){do a=c[this.cursor++];while(a>="0"&&a<="9");this.cursor--,this.lexExponent(),b.type=NUMBER,b.value=parseFloat(c.substring(b.start,this.cursor))}else b.type=DOT,b.assignOp=null,b.value="."},lexString:function(ch){var token=this.token,input=this.source;token.type=STRING;var hasEscapes=!1,delim=ch;if(input.length<=this.cursor)throw this.newSyntaxError("Unterminated string literal");while((ch=input[this.cursor++])!==delim){if(ch=="\n"||ch=="\r")throw this.newSyntaxError("Unterminated string literal");if(this.cursor==input.length)throw this.newSyntaxError("Unterminated string literal");if(ch==="\\"){hasEscapes=!0;if(++this.cursor==input.length)throw this.newSyntaxError("Unterminated string literal")}}token.value=hasEscapes?eval(input.substring(token.start,this.cursor)):input.substring(token.start+1,this.cursor-1)},lexRegExp:function(ch){var token=this.token,input=this.source;token.type=REGEXP;do{ch=input[this.cursor++];if(ch==="\\")this.cursor++;else if(ch==="["){do{if(ch===undefined)throw this.newSyntaxError("Unterminated character class");ch==="\\"&&this.cursor++,ch=input[this.cursor++]}while(ch!=="]")}else if(ch===undefined)throw this.newSyntaxError("Unterminated regex")}while(ch!=="/");do ch=input[this.cursor++];while(ch>="a"&&ch<="z");this.cursor--,token.value=eval(input.substring(token.start,this.cursor))},lexOp:function(a){var b=this.token,c=this.source,d=opTokens[a],e=c[this.cursor];e in d&&(d=d[e],this.cursor++,e=c[this.cursor],e in d&&(d=d[e],this.cursor++,e=c[this.cursor]));var f=d.op;definitions.assignOps[f]&&c[this.cursor]==="="?(this.cursor++,b.type=ASSIGN,b.assignOp=definitions.tokenIds[definitions.opTypeNames[f]],f+="="):(b.type=definitions.tokenIds[definitions.opTypeNames[f]],b.assignOp=null),b.value=f},lexIdent:function(a,b){var c=this.token,d=a;while((a=this.getValidIdentifierChar(!1))!==null)d+=a;c.type=IDENTIFIER,c.value=d;if(b)return;var e;if(this.parser.mozillaMode){e=definitions.mozillaKeywords[d];if(e){c.type=e;return}}if(this.parser.x.strictMode){e=definitions.strictKeywords[d];if(e){c.type=e;return}}e=definitions.keywords[d],e&&(c.type=e)},get:function(a,b){var c;while(this.lookahead){--this.lookahead,this.tokenIndex=this.tokenIndex+1&3,c=this.tokens[this.tokenIndex];if(c.type!==NEWLINE||this.scanNewlines)return c.type}this.skip(),this.tokenIndex=this.tokenIndex+1&3,c=this.tokens[this.tokenIndex],c||(this.tokens[this.tokenIndex]=c={});var d=this.source;if(this.cursor>=d.length)return c.type=END;c.start=this.cursor,c.lineno=this.lineno;var e=this.getValidIdentifierChar(!0),f=e===null?d[this.cursor++]:null;if(e!==null)this.lexIdent(e,b);else if(a&&f==="/")this.lexRegExp(f);else if(f in opTokens)this.lexOp(f);else if(f===".")this.lexDot(f);else if(f>="1"&&f<="9")this.lexNumber(f);else if(f==="0")this.lexZeroNumber(f);else if(f==='"'||f==="'")this.lexString(f);else{if(!this.scanNewlines||f!=="\n"&&f!=="\r")throw this.newSyntaxError("Illegal token");f==="\r"&&d[this.cursor]==="\n"&&this.cursor++,c.type=NEWLINE,c.value="\n",this.lineno++}return c.end=this.cursor,c.type},unget:function(){if(++this.lookahead===4)throw"PANIC: too much lookahead!";this.tokenIndex=this.tokenIndex-1&3},newSyntaxError:function(a){a=(this.filename?this.filename+":":"")+this.lineno+": "+a;var b=new SyntaxError(a,this.filename,this.lineno);return b.source=this.source,b.cursor=this.lookahead?this.tokens[this.tokenIndex+this.lookahead&3].start:this.cursor,b},getValidIdentifierChar:function(a){var b=this.source;if(this.cursor>=b.length)return null;var c=b[this.cursor];if(c==="\\"&&b[this.cursor+1]==="u"){try{c=String.fromCharCode(parseInt(b.substring(this.cursor+2,this.cursor+6),16))}catch(d){return null}this.cursor+=5}var e=isValidIdentifierChar(c,a);return e&&this.cursor++,e?c:null}},exports.isIdentifier=isIdentifier,exports.Tokenizer=Tokenizer}),define("ace/narcissus/definitions",["require","exports","module"],function(require,exports,module){function defineGetter(a,b,c,d,e){Object.defineProperty(a,b,{get:c,configurable:!d,enumerable:!e})}function defineGetterSetter(a,b,c,d,e,f){Object.defineProperty(a,b,{get:c,set:d,configurable:!e,enumerable:!f})}function defineMemoGetter(a,b,c,d,e){Object.defineProperty(a,b,{get:function(){var f=c();return defineProperty(a,b,f,d,!0,e),f},configurable:!0,enumerable:!e})}function defineProperty(a,b,c,d,e,f){Object.defineProperty(a,b,{value:c,writable:!e,configurable:!d,enumerable:!f})}function isNativeCode(a){return typeof a=="function"&&a.toString().match(/\[native code\]/)}function apply(a,b,c){return Fpapply.call(a,[b].concat(c))}function getPropertyDescriptor(a,b){while(a){if({}.hasOwnProperty.call(a,b))return Object.getOwnPropertyDescriptor(a,b);a=Object.getPrototypeOf(a)}}function getPropertyNames(a){var b=Object.create(null,{});while(a){var c=Object.getOwnPropertyNames(a);for(var d=0,e=c.length;d<e;d++)b[c[d]]=!0;a=Object.getPrototypeOf(a)}return Object.keys(b)}function getOwnProperties(a){var b={};for(var c in Object.getOwnPropertyNames(a))b[c]=Object.getOwnPropertyDescriptor(a,c);return b}function blacklistHandler(a,b){var c=Object.create(null,{}),d=Dict.create(b).mapObject(function(a){return c});return mixinHandler(d,a)}function whitelistHandler(a,b){var c=Object.create(null,{}),d=Dict.create(b).mapObject(function(b){return a});return mixinHandler(d,c)}function mixinHandler(a,b){function c(c){return hasOwn(a,c)?a[c]:b}function d(a){var b=getPropertyDescriptor(c(a),a);return b&&(b.configurable=!0),b}function e(){var c=Object.getOwnPropertyNames(a).filter(function(b){return b in a[b]}),d=getPropertyNames(b).filter(function(b){return!hasOwn(a,b)});return c.concat(d)}function f(){var c=Object.getOwnPropertyNames(a).filter(function(b){return b in a[b]});for(name in b)hasOwn(a,name)||c.push(name);return c}function g(a){return a in c(a)}return{getOwnPropertyDescriptor:d,getPropertyDescriptor:d,getOwnPropertyNames:e,defineProperty:function(a,b){Object.defineProperty(c(a),a,b)},"delete":function(a){var b=c(a);return delete b[a]},fix:function(){},has:g,hasOwn:g,get:function(a,b){var d=c(b);return d[b]},set:function(a,b,d){var e=c(b);return e[b]=d,!0},enumerate:f,keys:f}}function makePassthruHandler(a){return{getOwnPropertyDescriptor:function(b){var c=Object.getOwnPropertyDescriptor(a,b);return c.configurable=!0,c},getPropertyDescriptor:function(b){var c=getPropertyDescriptor(a,b);return c.configurable=!0,c},getOwnPropertyNames:function(){return Object.getOwnPropertyNames(a)},defineProperty:function(b,c){Object.defineProperty(a,b,c)},"delete":function(b){return delete a[b]},fix:function(){return Object.isFrozen(a)?getOwnProperties(a):undefined},has:function(b){return b in a},hasOwn:function(b){return{}.hasOwnProperty.call(a,b)},get:function(b,c){return a[c]},set:function(b,c,d){return a[c]=d,!0},enumerate:function(){var b=[];for(name in a)b.push(name);return b},keys:function(){return Object.keys(a)}}}function hasOwn(a,b){return hasOwnProperty.call(a,b)}function Dict(a,b){this.table=a||Object.create(null,{}),this.size=b||0}function Stack(a){this.elts=a||null}var tokens=["END","\n",";",",","=","?",":","CONDITIONAL","||","&&","|","^","&","==","!=","===","!==","<","<=",">=",">","<<",">>",">>>","+","-","*","/","%","!","~","UNARY_PLUS","UNARY_MINUS","++","--",".","[","]","{","}","(",")","SCRIPT","BLOCK","LABEL","FOR_IN","CALL","NEW_WITH_ARGS","INDEX","ARRAY_INIT","OBJECT_INIT","PROPERTY_INIT","GETTER","SETTER","GROUP","LIST","LET_BLOCK","ARRAY_COMP","GENERATOR","COMP_TAIL","IMPLEMENTS","INTERFACE","LET","MODULE","PACKAGE","PRIVATE","PROTECTED","PUBLIC","STATIC","USE","YIELD","IDENTIFIER","NUMBER","STRING","REGEXP","break","case","catch","const","continue","debugger","default","delete","do","else","export","false","finally","for","function","if","import","in","instanceof","new","null","return","switch","this","throw","true","try","typeof","var","void","while","with"],strictKeywords={"__proto__":null,"implements":!0,"interface":!0,let:!0,"package":!0,"private":!0,"protected":!0,"public":!0,"static":!0,use:!0,yield:!0},statementStartTokens=["break","const","continue","debugger","do","for","if","let","return","switch","throw","try","var","yield","while","with"],whitespaceChars=["\t","","\f"," "," ","﻿"," ","᠎"," "," "," "," "," "," "," "," "," "," "," "," "," ","　"],whitespace={};for(var i=0;i<whitespaceChars.length;i++)whitespace[whitespaceChars[i]]=!0;var opTypeNames={"\n":"NEWLINE",";":"SEMICOLON",",":"COMMA","?":"HOOK",":":"COLON","||":"OR","&&":"AND","|":"BITWISE_OR","^":"BITWISE_XOR","&":"BITWISE_AND","===":"STRICT_EQ","==":"EQ","=":"ASSIGN","!==":"STRICT_NE","!=":"NE","<<":"LSH","<=":"LE","<":"LT",">>>":"URSH",">>":"RSH",">=":"GE",">":"GT","++":"INCREMENT","--":"DECREMENT","+":"PLUS","-":"MINUS","*":"MUL","/":"DIV","%":"MOD","!":"NOT","~":"BITWISE_NOT",".":"DOT","[":"LEFT_BRACKET","]":"RIGHT_BRACKET","{":"LEFT_CURLY","}":"RIGHT_CURLY","(":"LEFT_PAREN",")":"RIGHT_PAREN"},keywords={"__proto__":null},mozillaKeywords={"__proto__":null},tokenIds={},hostSupportsEvalConst=function(){try{return eval("(function(s) { eval(s); return x })('const x = true;')")}catch(e){return!1}}(),consts=hostSupportsEvalConst?"const ":"var ";for(var i=0,j=tokens.length;i<j;i++){i>0&&(consts+=", ");var t=tokens[i],name;if(/^[a-z]/.test(t)){name=t.toUpperCase();if(name==="LET"||name==="YIELD")mozillaKeywords[name]=i;strictKeywords[name]&&(strictKeywords[name]=i),keywords[t]=i}else name=/^\W/.test(t)?opTypeNames[t]:t;consts+=name+" = "+i,tokenIds[name]=i,tokens[t]=i}consts+=";";var isStatementStartCode={"__proto__":null};for(i=0,j=statementStartTokens.length;i<j;i++)isStatementStartCode[keywords[statementStartTokens[i]]]=!0;var assignOps=["|","^","&","<<",">>",">>>","+","-","*","/","%"];for(i=0,j=assignOps.length;i<j;i++)t=assignOps[i],assignOps[t]=tokens[t];var Fpapply=Function.prototype.apply,applyNew;Function.prototype.bind?applyNew=function(b,c){return new(b.bind.apply(b,[,].concat(Array.prototype.slice.call(c))))}:applyNew=function applyNew(f,a){switch(a.length){case 0:return new f;case 1:return new f(a[0]);case 2:return new f(a[0],a[1]);case 3:return new f(a[0],a[1],a[2]);default:var argStr="a[0]";for(var i=1,n=a.length;i<n;i++)argStr+=",a["+i+"]";return eval("new f("+argStr+")")}};var hasOwnProperty={}.hasOwnProperty;Dict.create=function(a){var b=Object.create(null,{}),c=0,d=Object.getOwnPropertyNames(a);for(var e=0,f=d.length;e<f;e++){var g=d[e];b[g]=a[g],c++}return new Dict(b,c)},Dict.prototype={has:function(a){return hasOwnProperty.call(this.table,a)},set:function(a,b){hasOwnProperty.call(this.table,a)||this.size++,this.table[a]=b},get:function(a){return this.table[a]},getDef:function(a,b){return hasOwnProperty.call(this.table,a)||(this.size++,this.table[a]=b()),this.table[a]},forEach:function(a){var b=this.table;for(var c in b)a.call(this,c,b[c])},map:function(a){var b=this.table,c=Object.create(null,{});return this.forEach(function(b,d){c[b]=a.call(this,d,b)}),new Dict(c,this.size)},mapObject:function(a){var b=this.table,c=Object.create(null,{});return this.forEach(function(b,d){c[b]=a.call(this,d,b)}),c},toObject:function(){return this.mapObject(function(a){return a})},choose:function(){return Object.getOwnPropertyNames(this.table)[0]},remove:function(a){hasOwnProperty.call(this.table,a)&&(this.size--,delete this.table[a])},copy:function(){var a=Object.create(null,{});for(var b in this.table)a[b]=this.table[b];return new Dict(a,this.size)},keys:function(){return Object.keys(this.table)},toString:function(){return"[object Dict]"}};var _WeakMap=typeof WeakMap=="function"?WeakMap:function(){function a(a){this.array=a||[]}function b(a,b,c,d){var e=a.array;for(var f=0,g=e.length;f<g;f++){var h=e[f];if(h.key===b)return c(h,f)}return d()}return a.prototype={has:function(a){return b(this,a,function(){return!0},function(){return!1})},set:function(a,c){var d=this.array;b(this,a,function(a){a.value=c},function(){d.push({key:a,value:c})})},get:function(a){return b(this,a,function(a){return a.value},function(){return null})},"delete":function(a){var c=this.array;b(this,a,function(a,b){c.splice(b,1)},function(){})},toString:function(){return"[object WeakMap]"}},a}();Stack.prototype={push:function(a){return new Stack({top:a,rest:this.elts})},top:function(){if(!this.elts)throw new Error("empty stack");return this.elts.top},isEmpty:function(){return this.top===null},find:function(a){for(var b=this.elts;b;b=b.rest)if(a(b.top))return b.top;return null},has:function(a){return Boolean(this.find(function(b){return b===a}))},forEach:function(a){for(var b=this.elts;b;b=b.rest)a(b.top)}},Array.prototype.copy||defineProperty(Array.prototype,"copy",function(){var a=[];for(var b=0,c=this.length;b<c;b++)a[b]=this[b];return a},!1,!1,!0),Array.prototype.top||defineProperty(Array.prototype,"top",function(){return this.length&&this[this.length-1]},!1,!1,!0),exports.tokens=tokens,exports.whitespace=whitespace,exports.opTypeNames=opTypeNames,exports.keywords=keywords,exports.mozillaKeywords=mozillaKeywords,exports.strictKeywords=strictKeywords,exports.isStatementStartCode=isStatementStartCode,exports.tokenIds=tokenIds,exports.consts=consts,exports.assignOps=assignOps,exports.defineGetter=defineGetter,exports.defineGetterSetter=defineGetterSetter,exports.defineMemoGetter=defineMemoGetter,exports.defineProperty=defineProperty,exports.isNativeCode=isNativeCode,exports.apply=apply,exports.applyNew=applyNew,exports.mixinHandler=mixinHandler,exports.whitelistHandler=whitelistHandler,exports.blacklistHandler=blacklistHandler,exports.makePassthruHandler=makePassthruHandler,exports.Dict=Dict,exports.WeakMap=_WeakMap,exports.Stack=Stack}),define("ace/narcissus/options",["require","exports","module"],function(a,b,c){b.hiddenHostGlobals={Narcissus:!0},b.desugarExtensions=!1,b.allowHTMLComments=!1,b.mozillaMode=!0,b.parenFreeMode=!1}),define("ext/language/worker",["require","exports","module","ace/lib/oop","ace/worker/mirror","treehugger/tree"],function(a,b,c){var d=a("ace/lib/oop"),e=a("ace/worker/mirror").Mirror,f=a("treehugger/tree");disabledFeatures={};var g=b.LanguageWorker=function(a){var b=this;this.handlers=[],this.currentMarkers=[],this.$lastAggregateActions={},e.call(this,a),this.setTimeout(500),a.on("complete",function(a){b.complete(a)}),a.on("documentClose",function(a){b.documentClose(a)}),a.on("analyze",function(a){b.analyze(a)}),a.on("cursormove",function(a){b.onCursorMove(a)}),a.on("inspect",function(a){b.inspect(a)}),a.on("change",function(){b.scheduledUpdate=!0}),a.on("fetchVariablePositions",function(a){b.sendVariablePositions(a)})};d.inherits(g,e),function(){function b(a,b){if(!a)return;var c=a.getAnnotation("error");if(!c)return;for(var d=0;d<b.length;d++){var e=b[d];e.type!=="error"&&e.pos.sl>=c.line&&e.pos.el<=c.line+2&&(b.splice(d,1),d--)}}function c(a){a.sort(function(a,b){return a.name<b.name?1:a.name>b.name?-1:0});for(var b=0;b<a.length-1;b++){var c=a[b],d=a[b+1];c.name===d.name&&(c.priority<d.priority?a.splice(b,1):c.priority>d.priority?a.splice(b+1,1):c.score<d.score?a.splice(b,1):c.score>d.score?a.splice(b+1,1):a.splice(b,1),b--)}}this.getLastAggregateActions=function(){return this.$lastAggregateActions[this.$path]||(this.$lastAggregateActions[this.$path]={markers:[],hint:null}),this.$lastAggregateActions[this.$path]},this.setLastAggregateActions=function(a){this.$lastAggregateActions[this.$path]=a},this.enableFeature=function(a){disabledFeatures[a]=!1},this.disableFeature=function(a){disabledFeatures[a]=!0},this.register=function(b){var c=a(b);this.handlers.push(c)},this.parse=function(){for(var a=0;a<this.handlers.length;a++){var b=this.handlers[a];if(b.handlesLanguage(this.$language))try{var c=b.parse(this.doc.getValue());if(c)return this.cachedAst=c,c}catch(d){}}return this.cachedAst=null,null},this.scheduleEmit=function(a,b){this.sender.emit(a,b)},this.analyze=function(){var a=this.parse(),c=[],d=0;for(var e=0;e<this.handlers.length;e++){var f=this.handlers[e];if(f.handlesLanguage(this.$language)&&(a||!f.analysisRequiresParsing())){var g=f.analyze(this.doc,a);g&&(c=c.concat(g)),d++}}var h=c;b(a,c),this.getLastAggregateActions().markers.length>0&&(h=c.concat(this.getLastAggregateActions().markers)),d>0&&this.scheduleEmit("markers",h),this.currentMarkers=c,this.postponedCursorMove&&this.onCursorMove(this.postponedCursorMove)},this.checkForMarker=function(a){var b={line:a.row,col:a.column};for(var c=0;c<this.currentMarkers.length;c++){var d=this.currentMarkers[c];if(d.message&&f.inRange(d.pos,b))return d.message}},this.inspect=function(a){var b=this;if(this.cachedAst){var c=this.cachedAst,d=c.findNode({line:a.data.row,col:a.data.col}),e=this.handlers.filter(function(a){return a.handlesLanguage(b.$language)&&a.buildExpression});if(e&&e.length){var f=e[0].buildExpression(d);this.scheduleEmit("inspect",f)}}},this.onCursorMove=function(a){if(this.scheduledUpdate){this.postponedCursorMove=a;return}var b=a.data,c=this.checkForMarker(b)||"",d={markers:[],hint:null,enableRefactorings:[]};if(this.cachedAst){var e=this.cachedAst,f=e.findNode({line:b.row,col:b.column});if(f!==this.lastCurrentNode||b.force){for(var g=0;g<this.handlers.length;g++){var h=this.handlers[g];if(h.handlesLanguage(this.$language)){var i=h.onCursorMovedNode(this.doc,e,b,f);if(!i)continue;i.markers&&i.markers.length>0&&(d.markers=d.markers.concat(i.markers)),i.enableRefactorings&&i.enableRefactorings.length>0&&(d.enableRefactorings=d.enableRefactorings.concat(i.enableRefactorings)),i.hint&&(d.hint=i.hint)}}d.hint&&!c&&(c=d.hint),this.scheduleEmit("markers",this.currentMarkers.concat(d.markers)),this.scheduleEmit("enableRefactorings",d.enableRefactorings),this.lastCurrentNode=f,this.setLastAggregateActions(d)}}else this.setLastAggregateActions(d);this.scheduleEmit("hint",c)},this.sendVariablePositions=function(a){var b=a.data;if(this.cachedAst){var c=this.cachedAst,d=c.findNode({line:b.row,col:b.column});for(var e=0;e<this.handlers.length;e++){var f=this.handlers[e];if(f.handlesLanguage(this.$language)){var g=f.getVariablePositions(this.doc,c,b,d);g&&this.sender.emit("variableLocations",g)}}}},this.onUpdate=function(){this.scheduledUpdate=!1;for(var a=0;a<this.handlers.length;a++){var b=this.handlers[a];b.handlesLanguage(this.$language)&&b.onUpdate(this.doc)}this.analyze()},this.switchFile=function(a,b,c){var d=this.$path;c=c||"",this.$path=a,this.$language=b,this.cachedAst=null,this.lastCurrentNode=null,this.setValue(c);for(var e=0;e<this.handlers.length;e++){var f=this.handlers[e];f.path=a,f.language=b,f.onDocumentOpen(a,this.doc,d)}},this.documentClose=function(a){var b=a.data;for(var c=0;c<this.handlers.length;c++){var d=this.handlers[c];d.onDocumentClose(b)}},this.complete=function(a){var b=a.data,d,e;for(var f=0;f<this.handlers.length;f++){var g=this.handlers[f];if(g.handlesLanguage(this.$language)&&g.completionRequiresParsing()){d=this.parse(),e=d.findNode({line:b.row,col:b.column});break}}var h=[];for(var f=0;f<this.handlers.length;f++){var g=this.handlers[f];if(g.handlesLanguage(this.$language)){var i=g.complete(this.doc,d,b,e);i&&(h=h.concat(i))}}c(h),h.sort(function(a,b){return a.priority<b.priority?1:a.priority>b.priority?-1:a.score<b.score?1:a.score>b.score?-1:0}),h=h.slice(0,50),this.sender.emit("complete",h)}}.call(g.prototype)}),define("ace/worker/mirror",["require","exports","module","ace/document","ace/lib/lang"],function(a,b,c){var d=a("../document").Document,e=a("../lib/lang"),f=b.Mirror=function(a){this.sender=a;var b=this.doc=new d(""),c=this.deferredUpdate=e.deferredCall(this.onUpdate.bind(this)),f=this;a.on("change",function(a){b.applyDeltas([a.data]),c.schedule(f.$timeout)})};((function(){this.$timeout=500,this.setTimeout=function(a){this.$timeout=a},this.setValue=function(a){this.doc.setValue(a),this.deferredUpdate.schedule(this.$timeout)},this.getValue=function(a){this.sender.callback(this.doc.getValue(),a)},this.onUpdate=function(){}})).call(f.prototype)}),define("ace/document",["require","exports","module","ace/lib/oop","ace/lib/event_emitter","ace/range","ace/anchor"],function(a,b,c){var d=a("./lib/oop"),e=a("./lib/event_emitter").EventEmitter,f=a("./range").Range,g=a("./anchor").Anchor,h=function(a){this.$lines=[],Array.isArray(a)?this.insertLines(0,a):a.length==0?this.$lines=[""]:this.insert({row:0,column:0},a)};((function(){d.implement(this,e),this.setValue=function(a){var b=this.getLength();this.remove(new f(0,0,b,this.getLine(b-1).length)),this.insert({row:0,column:0},a)},this.getValue=function(){return this.getAllLines().join(this.getNewLineCharacter())},this.createAnchor=function(a,b){return new g(this,a,b)},"aaa".split(/a/).length==0?this.$split=function(a){return a.replace(/\r\n|\r/g,"\n").split("\n")}:this.$split=function(a){return a.split(/\r\n|\r|\n/)},this.$detectNewLine=function(a){var b=a.match(/^.*?(\r\n|\r|\n)/m);b?this.$autoNewLine=b[1]:this.$autoNewLine="\n"},this.getNewLineCharacter=function(){switch(this.$newLineMode){case"windows":return"\r\n";case"unix":return"\n";case"auto":return this.$autoNewLine}},this.$autoNewLine="\n",this.$newLineMode="auto",this.setNewLineMode=function(a){if(this.$newLineMode===a)return;this.$newLineMode=a},this.getNewLineMode=function(){return this.$newLineMode},this.isNewLine=function(a){return a=="\r\n"||a=="\r"||a=="\n"},this.getLine=function(a){return this.$lines[a]||""},this.getLines=function(a,b){return this.$lines.slice(a,b+1)},this.getAllLines=function(){return this.getLines(0,this.getLength())},this.getLength=function(){return this.$lines.length},this.getTextRange=function(a){if(a.start.row==a.end.row)return this.$lines[a.start.row].substring(a.start.column,a.end.column);var b=[];return b.push(this.$lines[a.start.row].substring(a.start.column)),b.push.apply(b,this.getLines(a.start.row+1,a.end.row-1)),b.push(this.$lines[a.end.row].substring(0,a.end.column)),b.join(this.getNewLineCharacter())},this.$clipPosition=function(a){var b=this.getLength();return a.row>=b&&(a.row=Math.max(0,b-1),a.column=this.getLine(b-1).length),a},this.insert=function(a,b){if(!b||b.length===0)return a;a=this.$clipPosition(a),this.getLength()<=1&&this.$detectNewLine(b);var c=this.$split(b),d=c.splice(0,1)[0],e=c.length==0?null:c.splice(c.length-1,1)[0];return a=this.insertInLine(a,d),e!==null&&(a=this.insertNewLine(a),a=this.insertLines(a.row,c),a=this.insertInLine(a,e||"")),a},this.insertLines=function(a,b){if(b.length==0)return{row:a,column:0};var c=[a,0];c.push.apply(c,b),this.$lines.splice.apply(this.$lines,c);var d=new f(a,0,a+b.length,0),e={action:"insertLines",range:d,lines:b};return this._emit("change",{data:e}),d.end},this.insertNewLine=function(a){a=this.$clipPosition(a);var b=this.$lines[a.row]||"";this.$lines[a.row]=b.substring(0,a.column),this.$lines.splice(a.row+1,0,b.substring(a.column,b.length));var c={row:a.row+1,column:0},d={action:"insertText",range:f.fromPoints(a,c),text:this.getNewLineCharacter()};return this._emit("change",{data:d}),c},this.insertInLine=function(a,b){if(b.length==0)return a;var c=this.$lines[a.row]||"";this.$lines[a.row]=c.substring(0,a.column)+b+c.substring(a.column);var d={row:a.row,column:a.column+b.length},e={action:"insertText",range:f.fromPoints(a,d),text:b};return this._emit("change",{data:e}),d},this.remove=function(a){a.start=this.$clipPosition(a.start),a.end=this.$clipPosition(a.end);if(a.isEmpty())return a.start;var b=a.start.row,c=a.end.row;if(a.isMultiLine()){var d=a.start.column==0?b:b+1,e=c-1;a.end.column>0&&this.removeInLine(c,0,a.end.column),e>=d&&this.removeLines(d,e),d!=b&&(this.removeInLine(b,a.start.column,this.getLine(b).length),this.removeNewLine(a.start.row))}else this.removeInLine(b,a.start.column,a.end.column);return a.start},this.removeInLine=function(a,b,c){if(b==c)return;var d=new f(a,b,a,c),e=this.getLine(a),g=e.substring(b,c),h=e.substring(0,b)+e.substring(c,e.length);this.$lines.splice(a,1,h);var i={action:"removeText",range:d,text:g};return this._emit("change",{data:i}),d.start},this.removeLines=function(a,b){var c=new f(a,0,b+1,0),d=this.$lines.splice(a,b-a+1),e={action:"removeLines",range:c,nl:this.getNewLineCharacter(),lines:d};return this._emit("change",{data:e}),d},this.removeNewLine=function(a){var b=this.getLine(a),c=this.getLine(a+1),d=new f(a,b.length,a+1,0),e=b+c;this.$lines.splice(a,2,e);var g={action:"removeText",range:d,text:this.getNewLineCharacter()};this._emit("change",{data:g})},this.replace=function(a,b){if(b.length==0&&a.isEmpty())return a.start;if(b==this.getTextRange(a))return a.end;this.remove(a);if(b)var c=this.insert(a.start,b);else c=a.start;return c},this.applyDeltas=function(a){for(var b=0;b<a.length;b++){var c=a[b],d=f.fromPoints(c.range.start,c.range.end);c.action=="insertLines"?this.insertLines(d.start.row,c.lines):c.action=="insertText"?this.insert(d.start,c.text):c.action=="removeLines"?this.removeLines(d.start.row,d.end.row-1):c.action=="removeText"&&this.remove(d)}},this.revertDeltas=function(a){for(var b=a.length-1;b>=0;b--){var c=a[b],d=f.fromPoints(c.range.start,c.range.end);c.action=="insertLines"?this.removeLines(d.start.row,d.end.row-1):c.action=="insertText"?this.remove(d):c.action=="removeLines"?this.insertLines(d.start.row,c.lines):c.action=="removeText"&&this.insert(d.start,c.text)}}})).call(h.prototype),b.Document=h}),define("ace/range",["require","exports","module"],function(a,b,c){var d=function(a,b,c,d){this.start={row:a,column:b},this.end={row:c,column:d}};((function(){this.isEqual=function(a){return this.start.row==a.start.row&&this.end.row==a.end.row&&this.start.column==a.start.column&&this.end.column==a.end.column},this.toString=function(){return"Range: ["+this.start.row+"/"+this.start.column+"] -> ["+this.end.row+"/"+this.end.column+"]"},this.contains=function(a,b){return this.compare(a,b)==0},this.compareRange=function(a){var b,c=a.end,d=a.start;return b=this.compare(c.row,c.column),b==1?(b=this.compare(d.row,d.column),b==1?2:b==0?1:0):b==-1?-2:(b=this.compare(d.row,d.column),b==-1?-1:b==1?42:0)},this.comparePoint=function(a){return this.compare(a.row,a.column)},this.containsRange=function(a){return this.comparePoint(a.start)==0&&this.comparePoint(a.end)==0},this.intersects=function(a){var b=this.compareRange(a);return b==-1||b==0||b==1},this.isEnd=function(a,b){return this.end.row==a&&this.end.column==b},this.isStart=function(a,b){return this.start.row==a&&this.start.column==b},this.setStart=function(a,b){typeof a=="object"?(this.start.column=a.column,this.start.row=a.row):(this.start.row=a,this.start.column=b)},this.setEnd=function(a,b){typeof a=="object"?(this.end.column=a.column,this.end.row=a.row):(this.end.row=a,this.end.column=b)},this.inside=function(a,b){return this.compare(a,b)==0?this.isEnd(a,b)||this.isStart(a,b)?!1:!0:!1},this.insideStart=function(a,b){return this.compare(a,b)==0?this.isEnd(a,b)?!1:!0:!1},this.insideEnd=function(a,b){return this.compare(a,b)==0?this.isStart(a,b)?!1:!0:!1},this.compare=function(a,b){return!this.isMultiLine()&&a===this.start.row?b<this.start.column?-1:b>this.end.column?1:0:a<this.start.row?-1:a>this.end.row?1:this.start.row===a?b>=this.start.column?0:-1:this.end.row===a?b<=this.end.column?0:1:0},this.compareStart=function(a,b){return this.start.row==a&&this.start.column==b?-1:this.compare(a,b)},this.compareEnd=function(a,b){return this.end.row==a&&this.end.column==b?1:this.compare(a,b)},this.compareInside=function(a,b){return this.end.row==a&&this.end.column==b?1:this.start.row==a&&this.start.column==b?-1:this.compare(a,b)},this.clipRows=function(a,b){if(this.end.row>b)var c={row:b+1,column:0};if(this.start.row>b)var e={row:b+1,column:0};if(this.start.row<a)var e={row:a,column:0};if(this.end.row<a)var c={row:a,column:0};return d.fromPoints(e||this.start,c||this.end)},this.extend=function(a,b){var c=this.compare(a,b);if(c==0)return this;if(c==-1)var e={row:a,column:b};else var f={row:a,column:b};return d.fromPoints(e||this.start,f||this.end)},this.fixOrientation=function(){if(this.start.row<this.end.row||this.start.row==this.end.row&&this.start.column<this.end.column)return!1;var a=this.start;return this.end=this.start,this.start=a,!0},this.isEmpty=function(){return this.start.row==this.end.row&&this.start.column==this.end.column},this.isMultiLine=function(){return this.start.row!==this.end.row},this.clone=function(){return d.fromPoints(this.start,this.end)},this.collapseRows=function(){return this.end.column==0?new d(this.start.row,0,Math.max(this.start.row,this.end.row-1),0):new d(this.start.row,0,this.end.row,0)},this.toScreenRange=function(a){var b=a.documentToScreenPosition(this.start),c=a.documentToScreenPosition(this.end);return new d(b.row,b.column,c.row,c.column)}})).call(d.prototype),d.fromPoints=function(a,b){return new d(a.row,a.column,b.row,b.column)},b.Range=d}),define("ace/anchor",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],function(a,b,c){var d=a("./lib/oop"),e=a("./lib/event_emitter").EventEmitter,f=b.Anchor=function(a,b,c){this.document=a,typeof c=="undefined"?this.setPosition(b.row,b.column):this.setPosition(b,c),this.$onChange=this.onChange.bind(this),a.on("change",this.$onChange)};((function(){d.implement(this,e),this.getPosition=function(){return this.$clipPositionToDocument(this.row,this.column)},this.getDocument=function(){return this.document},this.onChange=function(a){var b=a.data,c=b.range;if(c.start.row==c.end.row&&c.start.row!=this.row)return;if(c.start.row>this.row)return;if(c.start.row==this.row&&c.start.column>this.column)return;var d=this.row,e=this.column;b.action==="insertText"?c.start.row===d&&c.start.column<=e?c.start.row===c.end.row?e+=c.end.column-c.start.column:(e-=c.start.column,d+=c.end.row-c.start.row):c.start.row!==c.end.row&&c.start.row<d&&(d+=c.end.row-c.start.row):b.action==="insertLines"?c.start.row<=d&&(d+=c.end.row-c.start.row):b.action=="removeText"?c.start.row==d&&c.start.column<e?c.end.column>=e?e=c.start.column:e=Math.max(0,e-(c.end.column-c.start.column)):c.start.row!==c.end.row&&c.start.row<d?(c.end.row==d&&(e=Math.max(0,e-c.end.column)+c.start.column),d-=c.end.row-c.start.row):c.end.row==d&&(d-=c.end.row-c.start.row,e=Math.max(0,e-c.end.column)+c.start.column):b.action=="removeLines"&&c.start.row<=d&&(c.end.row<=d?d-=c.end.row-c.start.row:(d=c.start.row,e=0)),this.setPosition(d,e,!0)},this.setPosition=function(a,b,c){var d;c?d={row:a,column:b}:d=this.$clipPositionToDocument(a,b);if(this.row==d.row&&this.column==d.column)return;var e={row:this.row,column:this.column};this.row=d.row,this.column=d.column,this._emit("change",{old:e,value:d})},this.detach=function(){this.document.removeEventListener("change",this.$onChange)},this.$clipPositionToDocument=function(a,b){var c={};return a>=this.document.getLength()?(c.row=Math.max(0,this.document.getLength()-1),c.column=this.document.getLine(c.row).length):a<0?(c.row=0,c.column=0):(c.row=a,c.column=Math.min(this.document.getLine(c.row).length,Math.max(0,b))),b<0&&(c.column=0),c}})).call(f.prototype)}),define("ace/lib/lang",["require","exports","module"],function(a,b,c){b.stringReverse=function(a){return a.split("").reverse().join("")},b.stringRepeat=function(a,b){return(new Array(b+1)).join(a)};var d=/^\s\s*/,e=/\s\s*$/;b.stringTrimLeft=function(a){return a.replace(d,"")},b.stringTrimRight=function(a){return a.replace(e,"")},b.copyObject=function(a){var b={};for(var c in a)b[c]=a[c];return b},b.copyArray=function(a){var b=[];for(var c=0,d=a.length;c<d;c++)a[c]&&typeof a[c]=="object"?b[c]=this.copyObject(a[c]):b[c]=a[c];return b},b.deepCopy=function(a){if(typeof a!="object")return a;var b=a.constructor();for(var c in a)typeof a[c]=="object"?b[c]=this.deepCopy(a[c]):b[c]=a[c];return b},b.arrayToMap=function(a){var b={};for(var c=0;c<a.length;c++)b[a[c]]=1;return b},b.arrayRemove=function(a,b){for(var c=0;c<=a.length;c++)b===a[c]&&a.splice(c,1)},b.escapeRegExp=function(a){return a.replace(/([.*+?^${}()|[\]\/\\])/g,"\\$1")},b.deferredCall=function(a){var b=null,c=function(){b=null,a()},d=function(a){return d.cancel(),b=setTimeout(c,a||0),d};return d.schedule=d,d.call=function(){return this.cancel(),a(),d},d.cancel=function(){return clearTimeout(b),b=null,d},d}}),define("treehugger/tree",["require","exports","module"],function(a,b,c){function d(a,b){if(a&&a.sl<=b.line&&a.el>=b.line){if(a.sl<b.line&&a.el>b.line)return!0;if(a.sl==b.line&&a.el>b.line)return a.sc<=b.col;if(a.sl==b.line&&a.el===b.line)return a.sc<=b.col&&a.ec>=b.col;if(a.sl<b.line&&a.el===b.line)return a.ec>=b.col}}function e(){}function f(a,b){this.cons=a;for(var c=0;c<b.length;c++)this[c]=b[c];this.length=b.length}function g(a){for(var b=0;b<a.length;b++)this[b]=a[b];this.length=a.length}function h(a){this.value=a}function i(a){this.value=a}function j(a){this.id=a}function l(a){function c(c){for(var d=0;d<c.length&&b+d<a.length;d++)if(c[d]!=a[b+d])return!1;return d==c.length}function d(){return a[b]>="a"&&a[b]<="z"||a[b]>="A"&&a[b]<="Z"||a[b]==="_"||a[b]>="0"&&a[b]<="9"}function e(){while(b<a.length&&(a[b]===" "||a[b]==="\n"||a[b]==="\r"||a[b]==="\t"))b++}function l(){var c=b;if(a[b]>="0"&&a[b]<="9"){var d=a[b];b++;while(b<a.length&&a[b]>="0"&&a[b]<="9")d+=a[b],b++;return e(),new h(+d,c)}return null}function m(){var d=b;if(c('"')){var f="";b++;while(!c('"')||c('"')&&a[b-1]=="\\")f+=a[b],b++;var g="";for(var h=0;h<f.length;h++)if(f[h]=="\\"){h++;switch(f[h]){case"n":g+="\n";break;case"t":g+="\t";break;default:g+=f[h]}}else g+=f[h];return b++,e(),new i(g,d)}return null}function n(){var c=b;if(d()&&a[b].toLowerCase()===a[b]){var f="";while(d()&&b<a.length)f+=a[b],b++;return e(),new j(f,c)}return null}function o(){var d=b;if(c("[")){var f=[];b++,e();while(!c("]")&&b<a.length)f.push(q()),c(",")&&(b++,e());return b++,e(),new g(f,d)}return null}function p(){var d=b,g="";while(!c("("))g+=a[b],b++;b++;var h=[];while(!c(")")&&b<a.length)h.push(q()),c(",")&&(b++,e());return b++,e(),new f(g,h,d)}function q(){var a=l();return a?a:(a=m(),a?a:(a=o(),a?a:(a=n(),a?a:p())))}var b=0;if(typeof a!="string")return null;if(a.length<200&&!k[a])k[a]=q();else if(!k[a])return q();return k[a]}e.prototype.toPrettyString=function(a){return a=a||"",a+this.toString()},e.prototype.setAnnotation=function(a,b){this.annos=this.annos||{},this.annos[a]=b},e.prototype.getAnnotation=function(a){return this.annos?this.annos[a]:undefined},e.prototype.getPos=function(){return this.annos&&this.annos.pos?this.annos.pos:null},e.prototype.findNode=function(a){var b=this.getPos();return d(b,a)?this:null},f.prototype=new e,f.prototype.toString=function(a){try{var b=this.cons+"(";for(var c=0;c<this.length;c++)b+=this[c].toString()+",";return this.length>0&&(b=b.substring(0,b.length-1)),b+")"}catch(d){console.error("Something went wrong: ",this,d)}},f.prototype.toPrettyString=function(a){a=a||"";try{if(this.length===0)return a+this.cons+"()";if(this.length===1&&(this[0]instanceof i||this[0]instanceof h))return a+this.cons+"("+this[0].toString()+")";var b=a+this.cons+"(\n";for(var c=0;c<this.length;c++)b+=this[c].toPrettyString(a+"    ")+",\n";return b=b.substring(0,b.length-2),b+="\n",b+a+")"}catch(d){console.error("Something went wrong: ",this,d)}},f.prototype.match=function(a,b){b=b||{};if(a instanceof f&&this.cons===a.cons&&this.length===a.length){for(var c=0;c<this.length;c++)if(!this[c].match(a[c],b))return!1;return b}return!1},f.prototype.build=function(a){var b=[];for(var c=0;c<this.length;c++)b.push(this[c].build(a));return new f(this.cons,b)},f.prototype.toJSON=function(){var a=[];for(var b=0;b<this.length;b++)a.push(this[b]);return{cons:this.cons,children:a}},f.prototype.getPos=function(){var a={sl:9999999999,sc:9999999999,el:0,ec:0};if(this.getAnnotation("pos")){var b=this.getAnnotation("pos");a={sl:b.sl,sc:b.sc,el:b.el,ec:b.ec}}for(var c=0;c<this.length;c++){var d=this[c].getPos();if(d){var e=a.sl;a.sl=Math.min(a.sl,d.sl),a.sl!==e?a.sc=d.sc:a.sc=Math.min(a.sc,d.sc);var f=a.el;a.el=Math.max(a.el,d.el),a.el!==f?a.ec=d.ec:a.ec=Math.max(a.ec,d.ec)}}return a},f.prototype.findNode=function(a){var b=this.getPos();if(!d(b,a))return null;for(var c=0;c<this.length;c++){var e=this[c].getPos();if(d(e,a)){var f=this[c].findNode(a);return f?f instanceof i?this:f:this[c]}}},b.cons=function(a,b){return new f(a,b)},g.prototype=new e,g.prototype.toString=function(){var a="[";for(var b=0;b<this.length;b++)a+=this[b].toString()+",";return this.length>0&&(a=a.substring(0,a.length-1)),a+"]"},g.prototype.toPrettyString=function(a){a=a||"";try{if(this.length===0)return a+"[]";var b=a+"[\n";for(var c=0;c<this.length;c++)b+=this[c].toPrettyString(a+"  ")+",\n";return b=b.substring(0,b.length-2),b+="\n",b+a+"]"}catch(d){console.error("Something went wrong: ",this)}},g.prototype.match=function(a,b){b=b||{};if(a instanceof g){if(this.length===a.length){for(var c=0;c<this.length;c++)if(!this[c].match(a[c],b))return!1;return b}return!1}return!1},g.prototype.build=function(a){var b=[];for(var c=0;c<this.length;c++)b.push(this[c].build(a));return new g(b)},g.prototype.getPos=f.prototype.getPos,g.prototype.findNode=f.prototype.findNode,g.prototype.forEach=function(a){for(var b=0;b<this.length;b++)a.call(this[b],this[b],b)},g.prototype.isEmpty=function(){return this.length===0},g.prototype.contains=function(a){for(var b=0;b<this.length;b++)if(a.match(this[b]))return!0;return!1},g.prototype.concat=function(a){var c=[];for(var d=0;d<this.length;d++)c.push(this[d]);for(d=0;d<a.length;d++)c.push(a[d]);return b.list(c)},g.prototype.toJSON=function(){var a=[];for(var b=0;b<this.length;b++)a.push(this[b]);return a},g.prototype.removeDuplicates=function(){var a=[];a:for(var c=0;c<this.length;c++){for(var d=0;d<a.length;d++)if(a[d].match(this[c]))continue a;a.push(this[c])}return new b.list(a)},g.prototype.toArray=g.prototype.toJSON,b.list=function(a){return new g(a)},h.prototype=new e,h.prototype.toString=function(){return""+this.value},h.prototype.match=function(a,b){return b=b||{},a instanceof h?this.value===a.value?b:!1:!1},h.prototype.build=function(a){return this},b.num=function(a){return new h(a)},i.prototype=new e,i.prototype.toString=function(){return'"'+this.value+'"'},i.prototype.match=function(a,b){return b=b||{},a instanceof i?this.value===a.value?b:!1:!1},i.prototype.build=function(a){return this},b.string=function(a){return new i(a)},j.prototype=new e,j.prototype.toString=function(){return this.id},j.prototype.match=function(a,b){return b=b||{},this.id==="_"?b:b[this.id]?b[this.id].match(a):(b[this.id]=a,b)},j.prototype.build=function(a){return a[this.id]},b.placeholder=function(a){return new j(a)};var k={};b.Node=e,b.ConsNode=f,b.ListNode=g,b.NumNode=h,b.StringNode=i,b.PlaceholderNode=j,b.parse=l,b.inRange=d}),define("ext/codecomplete/local_completer",["require","exports","module","ext/language/base_handler","ext/codecomplete/complete_util"],function(a,b,c){function h(a,b,c){var d=a.getValue().trim(),e=a.getLines(0,b.row-1).join("\n")+"\n",g=a.getLine(b.row);e+=g.substr(0,b.column);var h=e.trim().split(f).length,i=d.split(f),j={};for(var k=0;k<i.length;k++){var l=i[k],m=Math.max(h,k)-Math.min(h,k);Object.prototype.hasOwnProperty.call(j,l)?j[l]=Math.max(1e6-m,j[l]):j[l]=1e6-m}return j}function i(a,b){var c=a.getLine(b.row),d=e.retrievePreceedingIdentifier(c,b.column),f=h(a,b,d);return delete f[d],f}var d=a("ext/language/base_handler"),e=a("ext/codecomplete/complete_util"),f=/[^a-zA-Z_0-9\$]+/,g=c.exports=Object.create(d);g.handlesLanguage=function(a){return!0},g.completionRequiresParsing=function(){return!1},g.complete=function(a,b,c,d){var f=i(a,c),g=a.getLine(c.row),h=e.retrievePreceedingIdentifier(g,c.column),j=[];for(var k in f)j.push(k);var l=e.findCompletions(h,j);return l.map(function(a){return{name:a,replaceText:a,icon:null,score:f[a],meta:"",priority:1}})}}),define("ext/language/base_handler",["require","exports","module"],function(a,b,c){c.exports={path:null,isFeatureEnabled:function(a){return!disabledFeatures[a]},handlesLanguage:function(a){return!1},parse:function(a){return null},requiresContinuousParsing:function(){return!1},onParse:function(a){},onUpdate:function(a){},onDocumentOpen:function(a,b,c){},onDocumentClose:function(a){},onCursorMovedNode:function(a,b,c,d){},outline:function(a){return null},completionRequiresParsing:function(){return!1},complete:function(a,b,c,d){return null},analysisRequiresParsing:function(){return!0},analyze:function(a,b){return null},getVariablePositions:function(a,b,c,d){return null}}}),define("ext/codecomplete/complete_util",["require","exports","module"],function(a,b,c){function e(a,b){var c=[];for(var e=b-1;e>=0;e--)if(d.test(a[e]))c.push(a[e]);else break;return c.reverse().join("")}function f(a,b){var c=0,d=a.length-1,e=Math.floor((d+c)/2);while(d>c&&e>=0&&a[e].indexOf(b)!==0)b<a[e]?d=e-1:b>a[e]&&(c=e+1),e=Math.floor((d+d)/2);while(e>0&&a[e-1].indexOf(b)===0)e--;return e>=0?e:0}function g(a,b){b.sort();var c=f(b,a),d=[];for(var e=c;e<b.length&&b[e].indexOf(a)===0;e++)d.push(b[e]);return d}var d=/[a-zA-Z_0-9\$]/;b.retrievePreceedingIdentifier=e,b.findCompletions=g});var globalRequire=require;define("ext/codecomplete/snippet_completer",["require","exports","module","ext/codecomplete/complete_util","ext/language/base_handler"],function(a,b,c){var d=a("ext/codecomplete/complete_util"),e=a("ext/language/base_handler"),f=c.exports=Object.create(e),g={};f.handlesLanguage=function(a){return!0},f.fetchText=function(a){var b=new XMLHttpRequest;return b.open("GET","/static/"+a,!1),b.send(),b.status===200?b.responseText:!1},f.complete=function(a,b,c,e){var f=a.getLine(c.row),h=d.retrievePreceedingIdentifier(f,c.column),i=g[this.language];if(i===undefined){var j=this.fetchText("ext/codecomplete/snippets/"+this.language+".json");i=j?JSON.parse(j):{},g[this.language]=i}var k=Object.keys(i),l=d.findCompletions(h,k);return l.map(function(a){return{name:a,replaceText:i[a],icon:null,meta:"snippet",priority:2}})}}),define("ext/codecomplete/open_files_local_completer",["require","exports","module","ext/codecomplete/complete_util","ext/language/base_handler"],function(a,b,c){function j(a,b,c,d){var e=b.split(/[^a-zA-Z_0-9\$]+/);for(var f=0;f<e.length;f++){var g=e[f];if(!g)continue;Object.prototype.hasOwnProperty.call(c,g)?(c[g]++,d[g][a]=!0):(c[g]=1,d[g]={},d[g][a]=!0)}return c}function k(a){var b=f[a];if(!b)return;for(var c in b)g[c]-=b[c],delete h[c][a],g[c]===0&&(delete g[c],delete h[c]);delete f[a]}function l(a,b){f[a]||(f[a]=j(a,b,{},{}),j(a,b,g,h))}var d=a("ext/codecomplete/complete_util"),e=a("ext/language/base_handler"),f={},g={},h={},i=c.exports=Object.create(e);i.handlesLanguage=function(a){return!0},i.onDocumentOpen=function(a,b){f[a]||l(a,b.getValue())},i.onDocumentClose=function(a){k(a)},i.onUpdate=function(a){k(this.path),l(this.path,a.getValue())},i.complete=function(a,b,c,e){var f=a.getLine(c.row),i=d.retrievePreceedingIdentifier(f,c.column),j=g,k=[];for(var l in j)k.push(l);var m=d.findCompletions(i,k),n=this.path;return m=m.filter(function(a){return!h[a][n]}),m.map(function(a){var b=Object.keys(h[a])[0]||"[unknown]",c=b.split("/"),d=c[c.length-1];return{name:a,replaceText:a,icon:null,score:j[a],meta:d,priority:0}})}}),define("ext/jslanguage/parse",["require","exports","module","treehugger/js/parse","ext/language/base_handler"],function(a,b,c){var d=a("treehugger/js/parse"),e=a("ext/language/base_handler"),f=c.exports=Object.create(e);f.handlesLanguage=function(a){return a==="javascript"},f.parse=function(a){return a=a.replace(/^(#!.*\n)/,"//$1"),d.parse(a)}}),define("treehugger/js/parse",["require","exports","module","treehugger/js/uglifyparser","treehugger/tree"],function(a,b,c){function f(a,b){return a.name||(a.name=""),b.setAnnotation("pos",{sl:a.start.line,sc:a.start.col,el:a.start.line,ec:a.start.col+a.name.length}),b}var d=a("treehugger/js/uglifyparser"),e=a("treehugger/tree");b.parse=function(a){var c=d.parse(a,!1,!0),e=b.transform(c.ast);return c.error&&e.setAnnotation("error",c.error),e},b.transform=function(a){if(!a)return e.cons("None",[]);var c=b.transform,d=typeof a[0]=="string"?a[0]:a[0].name,g;switch(d){case"toplevel":g=e.list(a[1].map(c));break;case"var":g=e.cons("VarDecls",[e.list(a[1].map(function(a){var b=e.string(a[0].name);return f(a[0],b),a[1]?e.cons("VarDeclInit",[b,c(a[1])]):e.cons("VarDecl",[b])}))]);break;case"let":g=e.cons("LetDecls",[e.list(a[1].map(function(a){var b=e.string(a[0].name);return f(a[0],b),a[1]?e.cons("LetDeclInit",[b,c(a[1])]):e.cons("LetDecl",[b])}))]);break;case"const":g=e.cons("ConstDecls",[e.list(a[1].map(function(a){return e.cons("ConstDeclInit",[e.string(a[0]),c(a[1])])}))]);break;case"num":g=e.cons("Num",[e.string(a[1])]);break;case"string":g=e.cons("String",[e.string(a[1])]);break;case"stat":return c(a[1]);case"call":g=e.cons("Call",[c(a[1]),e.list(a[2].map(c))]);break;case"return":g=e.cons("Return",[c(a[1])]);break;case"new":g=e.cons("New",[c(a[1]),e.list(a[2].map(c))]);break;case"object":g=e.cons("ObjectInit",[e.list(a[1].map(function(a){return e.cons("PropertyInit",[e.string(a[0]),c(a[1])])}))]);break;case"array":g=e.cons("Array",[e.list(a[1].map(c))]);break;case"conditional":g=e.cons("TernaryIf",[c(a[1]),c(a[2]),c(a[3])]);break;case"label":g=e.cons("Label",[e.string(a[1]),c(a[2])]);break;case"continue":g=e.cons("Continue",[e.string(a[1])]);break;case"assign":typeof a[1]=="string"?g=e.cons("OpAssign",[e.string(a[1]),c(a[2]),c(a[3])]):g=e.cons("Assign",[c(a[2]),c(a[3])]);break;case"dot":g=e.cons("PropAccess",[c(a[1]),e.string(a[2])]);break;case"name":g=e.cons("Var",[e.string(a[1])]);break;case"defun":g=e.cons("Function",[f(a[1],e.string(a[1].name||"")),e.list(a[2].map(function(a){return f(a,e.cons("FArg",[e.string(a.name)]))})),e.list(a[3].map(c))]);break;case"function":var h=e.string(a[1].name||"");a[1].name&&f(a[1],h);var i=e.list(a[2].map(function(a){return f(a,e.cons("FArg",[e.string(a.name)]))}));g=e.cons("Function",[h,i,e.list(a[3].map(c))]);break;case"binary":g=e.cons("Op",[e.string(a[1]),c(a[2]),c(a[3])]);break;case"unary-postfix":g=e.cons("PostfixOp",[e.string(a[1]),c(a[2])]);break;case"unary-prefix":g=e.cons("PrefixOp",[e.string(a[1]),c(a[2])]);break;case"sub":g=e.cons("Index",[c(a[1]),c(a[2])]);break;case"for":g=e.cons("For",[c(a[1]),c(a[2]),c(a[3]),c(a[4])]);break;case"for-in":g=e.cons("ForIn",[c(a[1]),c(a[3]),c(a[4])]);break;case"while":g=e.cons("While",[c(a[1]),c(a[2])]);break;case"do":g=e.cons("Do",[c(a[2]),c(a[1])]);break;case"switch":g=e.cons("Switch",[c(a[1]),e.list(a[2].map(function(a){return e.cons("Case",[c(a[0]),e.list(a[1].map(c))])}))]);break;case"break":g=e.cons("Break",[]);break;case"seq":g=e.cons("Seq",[c(a[1]),c(a[2])]);break;case"if":g=e.cons("If",[c(a[1]),c(a[2]),c(a[3])]);break;case"block":g=e.cons("Block",[e.list(a[1]?a[1].map(c):[])]);break;case"regexp":g=e.cons("RegExp",[e.string(a[1]),e.string(a[2])]);break;case"throw":g=e.cons("Throw",[c(a[1])]);break;case"try":g=e.cons("Try",[e.list(a[1].map(c)),e.list(a[2]?[e.cons("Catch",[e.string(a[2][0]),e.list(a[2][1].map(c))])]:[]),a[3]?e.list(a[3].map(c)):e.cons("None",[])]);break;case"with":g=e.cons("With",[c(a[1]),e.list(a[2][1].map(c))]);break;case"atom":g=e.cons("Atom",[]);break;case"ERROR":g=e.cons("ERROR",[]);break;default:console.log("Not yet supported: "+d),console.log("Current node: "+JSON.stringify(a))}return g.setAnnotation("origin",a),a[0].start&&(g.length===1&&g[0]instanceof e.StringNode&&g[0].value?g.setAnnotation("pos",{sl:a[0].start.line,sc:a[0].start.col,el:a[0].start.line,ec:a[0].start.col+g[0].value.length}):g.setAnnotation("pos",{sl:a[0].start.line,sc:a[0].start.col,el:a[0].end.line,ec:a[0].end.col})),g}}),define("treehugger/js/uglifyparser",["require","exports","module"],function(a,b,c){function r(a){return q.letter.test(a)}function s(a){return a=a.charCodeAt(0),a>=48&&a<=57}function t(a){return s(a)||r(a)}function u(a){return q.non_spacing_mark.test(a)||q.space_combining_mark.test(a)}function v(a){return q.connector_punctuation.test(a)}function w(a){return a=="$"||a=="_"||r(a)}function x(a){return w(a)||u(a)||s(a)||v(a)||a=="‌"||a=="‍"}function y(a){if(i.test(a))return parseInt(a.substr(2),16);if(j.test(a))return parseInt(a.substr(1),8);if(k.test(a))return parseFloat(a)}function z(a,b,c,d){this.message=a,this.line=b,this.col=c,this.pos=d,this.stack=(new Error).stack}function A(a,b,c,d){throw new z(a,b,c,d)}function B(a,b,c){return a.type==b&&(c==null||a.value==c)}function D(a){function c(){return b.text.charAt(b.pos)}function e(a){var c=b.text.charAt(b.pos++);if(a&&!c)throw C;return c=="\n"?(b.newline_before=!0,++b.line,b.col=0):++b.col,c}function i(){return!b.peek()}function j(a,c){var d=b.text.indexOf(a,b.pos);if(c&&d==-1)throw C;return d}function k(){b.tokline=b.line,b.tokcol=b.col,b.tokpos=b.pos}function p(a,c,d){b.regex_allowed=a=="operator"&&!S(F,c)||a=="keyword"&&S(f,c)||a=="punc"&&S(n,c);var e={type:a,value:c,line:b.tokline,col:b.tokcol,pos:b.tokpos,nlb:b.newline_before};return d||(e.comments_before=b.comments_before,b.comments_before=[]),b.newline_before=!1,e}function q(){while(S(m,c()))e()}function r(a){var b="",d=c(),f=0;while(d&&a(d,f++))b+=e(),d=c();return b}function u(a){A(a,b.tokline,b.tokcol,b.tokpos)}function v(a){var b=!1,c=!1,d=!1,e=a==".",f=r(function(f,g){return f=="x"||f=="X"?d?!1:d=!0:!!d||f!="E"&&f!="e"?f=="-"?c||g==0&&!a?!0:!1:f=="+"?c:(c=!1,f=="."?!e&&!d?e=!0:!1:t(f)):b?!1:b=c=!0});a&&(f=a+f);var g=y(f);return p("num",f)}function z(){var a=e(!0);switch(a){case"n":return"\n";case"r":return"\r";case"t":return"\t";case"b":return"\b";case"v":return"";case"f":return"\f";case"0":return"\0";case"x":return String.fromCharCode(B(2));case"u":return String.fromCharCode(B(4));case"\n":return"";default:return a}}function B(a){var b=0;for(;a>0;--a){var c=parseInt(e(!0),16);isNaN(c)&&u("Invalid hex-character pattern in string"),b=b<<4|c}return b}function D(){return N("Unterminated string constant",function(){var a=e(),b="";for(;;){var c=e(!0);if(c=="\\"){var d=0,f=null;c=r(function(a){if(a>="0"&&a<="7"){if(!f)return f=a,++d;if(f<="3"&&d<=2)return++d;if(f>="4"&&d<=1)return++d}return!1}),d>0?c=String.fromCharCode(parseInt(c,8)):c=z()}else if(c==a)break;b+=c}return p("string",b)})}function E(){e();var a=j("\n"),c;return a==-1?(c=b.text.substr(b.pos),b.pos=b.text.length):(c=b.text.substring(b.pos,a),b.pos=a),p("comment1",c,!0)}function G(){return e(),N("Unterminated multiline comment",function(){var a=j("*/",!0),c=b.text.substring(b.pos,a),d=p("comment2",c,!0);return b.pos=a+2,b.line+=c.split("\n").length-1,b.newline_before=c.indexOf("\n")>=0,/^@cc_on/i.test(c)&&(T("WARNING: at line "+b.line),T('*** Found "conditional comment": '+c),T("*** UglifyJS DISCARDS ALL COMMENTS.  This means your code might no longer work properly in Internet Explorer.")),d})}function H(){var a=!1,b="",d;while((d=c())!=null)if(!a)if(d=="\\")a=!0,e();else if(x(d))b+=e();else break;else d!="u"&&u("Expecting UnicodeEscapeSequence -- uXXXX"),d=z(),x(d)||u("Unicode char: "+d.charCodeAt(0)+" is not valid in identifier"),b+=d,a=!1;return b}function I(a){return N("Unterminated regular expression",function(){var b=!1,c,d=!1;while(c=e(!0))if(b)a+="\\"+c,b=!1;else if(c=="[")d=!0,a+=c;else if(c=="]"&&d)d=!1,a+=c;else{if(c=="/"&&!d)break;c=="\\"?b=!0:a+=c}var f=H();return p("regexp",[a,f])})}function J(a){function b(a){if(!c())return a;var d=a+c();return S(l,d)?(e(),b(d)):a}return p("operator",b(a||e()))}function K(){e();var a=b.regex_allowed;switch(c()){case"/":return b.comments_before.push(E()),b.regex_allowed=a,O();case"*":return b.comments_before.push(G()),b.regex_allowed=a,O()}return b.regex_allowed?I(""):J("/")}function L(){return e(),s(c())?v("."):p("punc",".")}function M(){var a=H();return S(d,a)?S(l,a)?p("operator",a):S(g,a)?p("atom",a):p("keyword",a):p("name",a)}function N(a,b){try{return b()}catch(c){if(c===C)u(a);else throw c}}function O(a){if(a!=null)return I(a);q(),k();var b=c();if(!b)return p("eof");if(s(b))return v();if(b=='"'||b=="'")return D();if(S(o,b))return p("punc",e());if(b==".")return L();if(b=="/")return K();if(S(h,b))return J();if(b=="\\"||w(b))return M();u("Unexpected character '"+b+"'")}var b={text:a.replace(/\r\n?|[\n\u2028\u2029]/g,"\n").replace(/^\uFEFF/,""),pos:0,tokpos:0,line:0,tokline:0,col:0,tokcol:0,newline_before:!1,regex_allowed:!1,comments_before:[]};return O.context=function(a){return a&&(b=a),b},O}function K(a,b,c){this.name=a,this.start=b,this.end=c}function L(a,b,c){function e(a,b){return B(d.token,a,b)}function f(){return d.peeked||(d.peeked=d.input())}function g(a,b){b||(b=d.token),d.error||(d.error={line:b.line,col:b.col,message:a})}function h(){d.prev=d.token;var a=d.input.context();return d.line=a.line,d.col=a.col,d.peeked?(d.token=d.peeked,d.peeked=null):d.token=d.input(),d.token}function i(){return d.prev}function j(a,b,c,e){var f=d.input.context();A(a,b!=null?b:f.tokline,c!=null?c:f.tokcol,e!=null?e:f.tokpos)}function k(a,b){g(b,a)}function l(a){a==null&&(a=d.token),g("Unexpected token: "+a.type+" ("+a.value+")",a)}function m(a,b){if(e(a,b))return h();g("Unexpected token "+d.token.type+", expected "+a,d.token)}function n(a){if(e("punc",a))return h();g("Expected: "+a)}function o(){return!b&&(d.token.nlb||e("eof")||e("punc","}"))}function p(){e("punc",";")?h():o()||g("Semicolon expected")}function q(){return P(arguments)}function r(){if(!e("punc","("))return g("Expected: ("),q("ERROR");n("(");var a=bn();return n(")"),a}function s(a,b,c){return a instanceof K?a:new K(a,b,c)}function t(a){return c?function(){var b=d.token,c=a.apply(this,arguments);return c?(c[0]=s(c[0],b,i()),c):(g("Parse error"),["ERROR"])}:a}function v(a){d.labels.push(a);var c=d.token,e=u();return b&&!S(I,e[0])&&l(c),d.labels.pop(),q("label",a,e)}function w(){return q("stat",N(bn,p))}function x(a){var b;return o()||(b=e("name")?d.token.value:null),b!=null?(h(),R(b,d.labels)||j("Label "+b+" without matching loop or statement")):d.in_loop==0&&j(a+" not inside a loop or switch"),p(),q(a,b)}function y(){if(!e("punc","("))return g("Expected: ("),q("for",q("ERROR"),q("ERROR"),q("ERROR"),q("ERROR"));n("(");var a=null;if(!e("punc",";")){e("keyword","var")?a=(h(),W(!0)):e("keyword","let")?a=(h(),X(!0)):a=bn(!0,!0);if(e("operator","in"))return C(a)}return z(a)}function z(a){n(";");var b=e("punc",";")?null:bn();if(e("punc",";")){n(";");var c=e("punc",")")?null:bn();n(")")}else g("Expected: ;");return q("for",a,b,c,bo(u))}function C(a){var b;a[0]=="var"?b=q("name",a[1][0]):a[0]=="let"?b=q("name",a[1][0]):b=a,h();var c=bn();return n(")"),q("for-in",a,b,c,bo(u))}function O(){var a=r(),b=u(),c;return e("keyword","else")&&(h(),c=u()),q("if",a,b,c)}function Q(){n("{");var a=[];while(!e("punc","}")){if(e("eof"))return a;a.push(u())}return h(),a}function U(){var a=Q(),b,c;if(e("keyword","catch")){h(),n("("),e("name")||j("Name expected");var f=d.token.value;h(),n(")"),b=[f,Q()]}return e("keyword","finally")&&(h(),c=Q()),!b&&!c&&j("Missing catch/finally blocks"),q("try",a,b,c)}function V(a){var b=[];for(;;){e("name")||l();var c=d.token,f=d.token.value;h(),f=s(f,c,d.token),e("operator","=")?(h(),b.push([f,bn(!1,a)])):b.push([f]);if(!e("punc",","))break;h()}return b}function W(a){return q("var",V(a))}function X(a){return q("let",V(a))}function Y(){return q("const",V())}function Z(){var a=$(!1),b;return e("punc","(")?(h(),b=_(")")):b=[],bf(q("new",a,b),!0)}function _(a,b,c){var d=!0,f=[];while(!e("punc",a)&&!e("eof")){d?d=!1:n(",");if(b&&e("punc",a))break;e("punc",",")&&c?f.push(["atom","undefined"]):f.push(bn(!1))}return h(),f}function ba(){return q("array",_("]",!b,!0))}function bb(){var a=!0,c=[];while(!e("punc","}")&&!e("eof")){a?a=!1:n(",");if(!b&&e("punc","}"))break;var f=d.token.type,g=bc();f!="name"||g!="get"&&g!="set"||!!e("punc",":")?(n(":"),c.push([g,bn(!1)])):c.push([bd(),L(!1),g])}return h(),q("object",c)}function bc(){switch(d.token.type){case"num":case"string":return N(d.token.value,h)}return bd()}function bd(){switch(d.token.type){case"name":case"operator":case"keyword":case"atom":return N(d.token.value,h);default:return g("Name, operator, keyword or atom expected."),""}}function be(a,b){return a[0]=s(a[0],b,d.token),a}function bf(a,b){var c=d.prev;return a[0]instanceof K||(a=be(a,c)),e("punc",".")?(h(),bf(be(q("dot",a,bd()),c),b)):e("punc","[")?(h(),bf(q("sub",a,N(bn,M(n,"]"))),b)):b&&e("punc","(")?(h(),bf(q("call",a,_(")")),!0)):a}function bg(a){if(e("operator")&&S(E,d.token.value))return bh("unary-prefix",N(d.token.value,h),bg(a));var b=$(a);while(e("operator")&&S(F,d.token.value)&&!d.token.nlb)b=bh("unary-postfix",d.token.value,b),h();return b}function bh(a,b,c){return(b=="++"||b=="--")&&!bl(c)&&j("Invalid use of "+b+" operator"),q(a,b,c)}function bi(a,b,c){var f=e("operator")?d.token.value:null;f&&f=="in"&&c&&(f=null);var g=f!=null?H[f]:null;if(g!=null&&g>b){h();var i=bi(bg(!0),g,c);return bi(q("binary",f,a,i),b,c)}return a}function bj(a){return bi(bg(!0),0,a)}function bk(a){var b=bj(a);if(e("operator","?")){h();var c=bn(!1);return n(":"),q("conditional",b,c,bn(!1,a))}return b}function bl(a){if(!b)return!0;switch(a[0]+""){case"dot":case"sub":case"new":case"call":return!0;case"name":return a[1]!="this"}}function bm(a){var b=bk(a),c=d.token.value;if(e("operator")&&S(G,c)){if(bl(b))return h(),q("assign",G[c],b,bm(a));j("Invalid assignment")}return b}function bo(a){try{return++d.in_loop,a()}finally{--d.in_loop}}var d={input:typeof a=="string"?D(a,!0):a,token:null,prev:null,peeked:null,in_function:0,in_loop:0,labels:[],line:0,col:0,error:null};d.token=h();var u=t(function(){if(e("operator","/")||e("operator","/="))d.peeked=null,d.token=d.input(d.token.value.substr(1));switch(d.token.type){case"num":case"string":case"regexp":case"operator":case"atom":return w();case"name":return B(f(),"punc",":")?v(N(d.token.value,h,h)):w();case"punc":switch(d.token.value){case"{":return q("block",Q());case"[":case"(":return w();case";":return h(),q("block");default:return h(),g("Bracket expected."),q("ERROR")};case"keyword":switch(N(d.token.value,h)){case"break":return x("break");case"continue":return x("continue");case"debugger":return p(),q("debugger");case"do":return function(a){return e("keyword","while")?(m("keyword","while"),q("do",N(r,p),a)):(g("Invalid do statement."),q("do",q("ERROR"),q("ERROR")))}(bo(u));case"for":return y();case"function":return L(!0);case"if":return O();case"return":return d.in_function==0&&g("'return' outside of function"),q("return",e("punc",";")?(h(),null):o()?null:N(bn,p));case"switch":return q("switch",r(),T());case"throw":return d.token.nlb&&j("Illegal newline after 'throw'"),q("throw",N(bn,p));case"try":return U();case"var":return N(W,p);case"let":return N(X,p);case"const":return N(Y,p);case"while":return q("while",r(),bo(u));case"with":return q("with",r(),u());default:l()}}}),L=t(function(a){var b=d.token,c=e("name")?N(d.token.value,h):null;return c=s(c,b,d.token),a&&!c?(g("Invalid function definition"),q("function","",[],[])):(n("("),q(a?"defun":"function",c,function(a,b){while(!e("punc",")")&&!e("eof"))a?a=!1:n(","),e("name")||l(),b.push(s(d.token.value,d.token)),h();return h(),b}(!0,[]),function(){++d.in_function;var a=d.in_loop;d.in_loop=0;var b=Q();return--d.in_function,d.in_loop=a,b}()))}),T=M(bo,function(){e("punc","{")&&n("{");var a=[],b=null;while(!e("punc","}")){if(e("eof"))break;if(e("keyword","case"))h(),b=[],a.push([bn(),b]),n(":");else if(e("keyword","default"))h(),n(":"),b=[],a.push([null,b]);else{if(!b)return a;b.push(u())}}return h(),a}),$=t(function(a){if(e("operator","new"))return h(),Z();if(e("punc")){switch(d.token.value){case"(":return h(),bf(N(bn,function(){n(")")}),a);case"[":return h(),bf(ba(),a);case"{":return h(),bf(bb(),a)}return g("Bracket expected."),q("ERROR")}if(e("keyword","function"))return h(),bf(L(!1),a);if(S(J,d.token.type)){var b=d.token.type=="regexp"?q("regexp",d.token.value[0],d.token.value[1]):q(d.token.type,d.token.value);return bf(N(b,h),a)}l()}),bn=t(function(a,b){arguments.length==0&&(a=!0);var c=d.line,f=d.col,g=bm(b);return a&&e("punc",",")?(h(),q("seq",g,bn(!0,b))):(d.col===f&&d.line===c&&h(),g)});return{ast:q("toplevel",function(a){while(!e("eof"))a.push(u());return a}([])),error:d.error}}function M(a){var b=P(arguments,1);return function(){return a.apply(this,b.concat(P(arguments)))}}function N(a){a instanceof Function&&(a=a());for(var b=1,c=arguments.length;--c>0;++b)arguments[b]();return a}function O(a){var b={};for(var c=0;c<a.length;++c)b[a[c]]=!0;return b}function P(a,b){return Array.prototype.slice.call(a,b||0)}function Q(a){return a.split("")}function R(a,b){for(var c=b.length;--c>=0;)if(b[c]===a)return!0;return!1}function S(a,b){return Object.prototype.hasOwnProperty.call(a,b)}var d=O(["break","case","catch","const","continue","default","delete","do","else","finally","for","function","if","in","instanceof","new","return","switch","throw","try","typeof","var","void","while","with","let"]),e=O(["abstract","boolean","byte","char","class","debugger","double","enum","export","extends","final","float","goto","implements","import","int","interface","long","native","package","private","protected","public","short","static","super","synchronized","throws","transient","volatile"]),f=O(["return","new","delete","throw","else","case"]),g=O(["false","null","true","undefined"]),h=O(Q("+-*&%=<>!?|~^")),i=/^0x[0-9a-f]+$/i,j=/^0[0-7]+$/,k=/^\d*\.?\d*(?:e[+-]?\d*(?:\d\.?|\.?\d)\d*)?$/i,l=O(["in","instanceof","typeof","new","void","delete","++","--","+","-","!","~","&","|","^","*","/","%",">>","<<",">>>","<",">","<=",">=","==","===","!=","!==","?","=","+=","-=","/=","*=","%=",">>=","<<=",">>>=","|=","^=","&=","&&","||"]),m=O(Q("  \n\r\t\f​᠎             　")),n=O(Q("[{}(,.;:")),o=O(Q("[]{}(),;:")),p=O(Q("gmsiy")),q={letter:new RegExp("[\\u0041-\\u005A\\u0061-\\u007A\\u00AA\\u00B5\\u00BA\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u0523\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0621-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971\\u0972\\u097B-\\u097F\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C33\\u0C35-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D28\\u0D2A-\\u0D39\\u0D3D\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC\\u0EDD\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8B\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10D0-\\u10FA\\u10FC\\u1100-\\u1159\\u115F-\\u11A2\\u11A8-\\u11F9\\u1200-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u1676\\u1681-\\u169A\\u16A0-\\u16EA\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u1900-\\u191C\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19A9\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u2094\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2183\\u2184\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2C6F\\u2C71-\\u2C7D\\u2C80-\\u2CE4\\u2D00-\\u2D25\\u2D30-\\u2D65\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005\\u3006\\u3031-\\u3035\\u303B\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31B7\\u31F0-\\u31FF\\u3400\\u4DB5\\u4E00\\u9FC3\\uA000-\\uA48C\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA65F\\uA662-\\uA66E\\uA67F-\\uA697\\uA717-\\uA71F\\uA722-\\uA788\\uA78B\\uA78C\\uA7FB-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA90A-\\uA925\\uA930-\\uA946\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAC00\\uD7A3\\uF900-\\uFA2D\\uFA30-\\uFA6A\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),non_spacing_mark:new RegExp("[\\u0300-\\u036F\\u0483-\\u0487\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u0610-\\u061A\\u064B-\\u065E\\u0670\\u06D6-\\u06DC\\u06DF-\\u06E4\\u06E7\\u06E8\\u06EA-\\u06ED\\u0711\\u0730-\\u074A\\u07A6-\\u07B0\\u07EB-\\u07F3\\u0816-\\u0819\\u081B-\\u0823\\u0825-\\u0827\\u0829-\\u082D\\u0900-\\u0902\\u093C\\u0941-\\u0948\\u094D\\u0951-\\u0955\\u0962\\u0963\\u0981\\u09BC\\u09C1-\\u09C4\\u09CD\\u09E2\\u09E3\\u0A01\\u0A02\\u0A3C\\u0A41\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A70\\u0A71\\u0A75\\u0A81\\u0A82\\u0ABC\\u0AC1-\\u0AC5\\u0AC7\\u0AC8\\u0ACD\\u0AE2\\u0AE3\\u0B01\\u0B3C\\u0B3F\\u0B41-\\u0B44\\u0B4D\\u0B56\\u0B62\\u0B63\\u0B82\\u0BC0\\u0BCD\\u0C3E-\\u0C40\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C62\\u0C63\\u0CBC\\u0CBF\\u0CC6\\u0CCC\\u0CCD\\u0CE2\\u0CE3\\u0D41-\\u0D44\\u0D4D\\u0D62\\u0D63\\u0DCA\\u0DD2-\\u0DD4\\u0DD6\\u0E31\\u0E34-\\u0E3A\\u0E47-\\u0E4E\\u0EB1\\u0EB4-\\u0EB9\\u0EBB\\u0EBC\\u0EC8-\\u0ECD\\u0F18\\u0F19\\u0F35\\u0F37\\u0F39\\u0F71-\\u0F7E\\u0F80-\\u0F84\\u0F86\\u0F87\\u0F90-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u102D-\\u1030\\u1032-\\u1037\\u1039\\u103A\\u103D\\u103E\\u1058\\u1059\\u105E-\\u1060\\u1071-\\u1074\\u1082\\u1085\\u1086\\u108D\\u109D\\u135F\\u1712-\\u1714\\u1732-\\u1734\\u1752\\u1753\\u1772\\u1773\\u17B7-\\u17BD\\u17C6\\u17C9-\\u17D3\\u17DD\\u180B-\\u180D\\u18A9\\u1920-\\u1922\\u1927\\u1928\\u1932\\u1939-\\u193B\\u1A17\\u1A18\\u1A56\\u1A58-\\u1A5E\\u1A60\\u1A62\\u1A65-\\u1A6C\\u1A73-\\u1A7C\\u1A7F\\u1B00-\\u1B03\\u1B34\\u1B36-\\u1B3A\\u1B3C\\u1B42\\u1B6B-\\u1B73\\u1B80\\u1B81\\u1BA2-\\u1BA5\\u1BA8\\u1BA9\\u1C2C-\\u1C33\\u1C36\\u1C37\\u1CD0-\\u1CD2\\u1CD4-\\u1CE0\\u1CE2-\\u1CE8\\u1CED\\u1DC0-\\u1DE6\\u1DFD-\\u1DFF\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2CEF-\\u2CF1\\u2DE0-\\u2DFF\\u302A-\\u302F\\u3099\\u309A\\uA66F\\uA67C\\uA67D\\uA6F0\\uA6F1\\uA802\\uA806\\uA80B\\uA825\\uA826\\uA8C4\\uA8E0-\\uA8F1\\uA926-\\uA92D\\uA947-\\uA951\\uA980-\\uA982\\uA9B3\\uA9B6-\\uA9B9\\uA9BC\\uAA29-\\uAA2E\\uAA31\\uAA32\\uAA35\\uAA36\\uAA43\\uAA4C\\uAAB0\\uAAB2-\\uAAB4\\uAAB7\\uAAB8\\uAABE\\uAABF\\uAAC1\\uABE5\\uABE8\\uABED\\uFB1E\\uFE00-\\uFE0F\\uFE20-\\uFE26]"),space_combining_mark:new RegExp("[\\u0903\\u093E-\\u0940\\u0949-\\u094C\\u094E\\u0982\\u0983\\u09BE-\\u09C0\\u09C7\\u09C8\\u09CB\\u09CC\\u09D7\\u0A03\\u0A3E-\\u0A40\\u0A83\\u0ABE-\\u0AC0\\u0AC9\\u0ACB\\u0ACC\\u0B02\\u0B03\\u0B3E\\u0B40\\u0B47\\u0B48\\u0B4B\\u0B4C\\u0B57\\u0BBE\\u0BBF\\u0BC1\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCC\\u0BD7\\u0C01-\\u0C03\\u0C41-\\u0C44\\u0C82\\u0C83\\u0CBE\\u0CC0-\\u0CC4\\u0CC7\\u0CC8\\u0CCA\\u0CCB\\u0CD5\\u0CD6\\u0D02\\u0D03\\u0D3E-\\u0D40\\u0D46-\\u0D48\\u0D4A-\\u0D4C\\u0D57\\u0D82\\u0D83\\u0DCF-\\u0DD1\\u0DD8-\\u0DDF\\u0DF2\\u0DF3\\u0F3E\\u0F3F\\u0F7F\\u102B\\u102C\\u1031\\u1038\\u103B\\u103C\\u1056\\u1057\\u1062-\\u1064\\u1067-\\u106D\\u1083\\u1084\\u1087-\\u108C\\u108F\\u109A-\\u109C\\u17B6\\u17BE-\\u17C5\\u17C7\\u17C8\\u1923-\\u1926\\u1929-\\u192B\\u1930\\u1931\\u1933-\\u1938\\u19B0-\\u19C0\\u19C8\\u19C9\\u1A19-\\u1A1B\\u1A55\\u1A57\\u1A61\\u1A63\\u1A64\\u1A6D-\\u1A72\\u1B04\\u1B35\\u1B3B\\u1B3D-\\u1B41\\u1B43\\u1B44\\u1B82\\u1BA1\\u1BA6\\u1BA7\\u1BAA\\u1C24-\\u1C2B\\u1C34\\u1C35\\u1CE1\\u1CF2\\uA823\\uA824\\uA827\\uA880\\uA881\\uA8B4-\\uA8C3\\uA952\\uA953\\uA983\\uA9B4\\uA9B5\\uA9BA\\uA9BB\\uA9BD-\\uA9C0\\uAA2F\\uAA30\\uAA33\\uAA34\\uAA4D\\uAA7B\\uABE3\\uABE4\\uABE6\\uABE7\\uABE9\\uABEA\\uABEC]"),connector_punctuation:new RegExp("[\\u005F\\u203F\\u2040\\u2054\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFF3F]")};z.prototype.toString=function(){return this.message+" (line: "+this.line+", col: "+this.col+", pos: "+this.pos+")"+"\n\n"+this.stack};var C={},E=O(["typeof","void","delete","--","++","!","~","-","+"]),F=O(["--","++"]),G=function(a,b,c){while(c<a.length)b[a[c]]=a[c].substr(0,a[c].length-1),c++;return b}(["+=","-=","/=","*=","%=",">>=","<<=",">>>=","|=","^=","&="],{"=":!0},0),H=function(a,b){for(var c=0,d=1;c<a.length;++c,++d){var e=a[c];for(var f=0;f<e.length;++f)b[e[f]]=d}return b}([["||"],["&&"],["|"],["^"],["&"],["==","===","!=","!=="],["<",">","<=",">=","in","instanceof"],[">>","<<",">>>"],["+","-"],["*","/","%"]],{}),I=O(["for","do","while","switch"]),J=O(["atom","num","string","regexp","name"]);K.prototype.toString=function(){return this.name};var T=function(){};b.tokenizer=D,b.parse=L,b.slice=P,b.curry=M,b.member=R,b.array_to_hash=O,b.PRECEDENCE=H,b.KEYWORDS_ATOM=g,b.RESERVED_WORDS=e,b.KEYWORDS=d,b.ATOMIC_START_TOKEN=J,b.OPERATORS=l,b.is_alphanumeric_char=t,b.set_logger=function(a){T=a}}),define("ext/jslanguage/scope_analyzer",["require","exports","module","ext/language/base_handler","treehugger/traverse"],function(a,b,c){function g(a){this.declarations=[],a&&this.declarations.push(a),this.uses=[]}var d=a("ext/language/base_handler");a("treehugger/traverse");var e=c.exports=Object.create(d),f={"true":!0,"false":!0,"undefined":!0,"null":!0,"this":!0,arguments:!0,ArrayBuffer:!0,ArrayBufferView:!0,Audio:!0,addEventListener:!0,applicationCache:!0,blur:!0,clearInterval:!0,clearTimeout:!0,close:!0,closed:!0,DataView:!0,defaultStatus:!0,document:!0,event:!0,FileReader:!0,Float32Array:!0,Float64Array:!0,FormData:!0,getComputedStyle:!0,HTMLElement:!0,HTMLAnchorElement:!0,HTMLBaseElement:!0,HTMLBlockquoteElement:!0,HTMLBodyElement:!0,HTMLBRElement:!0,HTMLButtonElement:!0,HTMLCanvasElement:!0,HTMLDirectoryElement:!0,HTMLDivElement:!0,HTMLDListElement:!0,HTMLFieldSetElement:!0,HTMLFontElement:!0,HTMLFormElement:!0,HTMLFrameElement:!0,HTMLFrameSetElement:!0,HTMLHeadElement:!0,HTMLHeadingElement:!0,HTMLHRElement:!0,HTMLHtmlElement:!0,HTMLIFrameElement:!0,HTMLImageElement:!0,HTMLInputElement:!0,HTMLIsIndexElement:!0,HTMLLabelElement:!0,HTMLLayerElement:!0,HTMLLegendElement:!0,HTMLLIElement:!0,HTMLLinkElement:!0,HTMLMapElement:!0,HTMLMenuElement:!0,HTMLMetaElement:!0,HTMLModElement:!0,HTMLObjectElement:!0,HTMLOListElement:!0,HTMLOptGroupElement:!0,HTMLOptionElement:!0,HTMLParagraphElement:!0,HTMLParamElement:!0,HTMLPreElement:!0,HTMLQuoteElement:!0,HTMLScriptElement:!0,HTMLSelectElement:!0,HTMLStyleElement:!0,HTMLTableCaptionElement:!0,HTMLTableCellElement:!0,HTMLTableColElement:!0,HTMLTableElement:!0,HTMLTableRowElement:!0,HTMLTableSectionElement:!0,HTMLTextAreaElement:!0,HTMLTitleElement:!0,HTMLUListElement:!0,HTMLVideoElement:!0,Int16Array:!0,Int32Array:!0,Int8Array:!0,Image:!0,localStorage:!0,location:!0,navigator:!0,open:!0,openDatabase:!0,Option:!0,parent:!0,print:!0,removeEventListener:!0,resizeBy:!0,resizeTo:!0,screen:!0,scroll:!0,scrollBy:!0,scrollTo:!0,sessionStorage:!0,setInterval:!0,setTimeout:!0,SharedWorker:!0,Uint16Array:!0,Uint32Array:!0,Uint8Array:!0,WebSocket:!0,window:!0,Worker:!0,XMLHttpRequest:!0,XPathEvaluator:!0,XPathException:!0,XPathExpression:!0,XPathNamespace:!0,XPathNSResolver:!0,XPathResult:!0,alert:!0,confirm:!0,console:!0,Debug:!0,opera:!0,prompt:!0,jQuery:!0,$:!0,$$:!0,goog:!0,dojo:!0,dojox:!0,dijit:!0,apf:!0,Assets:!0,Browser:!0,Chain:!0,Class:!0,Color:!0,Cookie:!0,Core:!0,Document:!0,DomReady:!0,DOMReady:!0,Drag:!0,Element:!0,Elements:!0,Event:!0,Events:!0,Fx:!0,Group:!0,Hash:!0,HtmlTable:!0,Iframe:!0,IframeShim:!0,InputValidator:!0,instanceOf:!0,Keyboard:!0,Locale:!0,Mask:!0,MooTools:!0,Native:!0,Options:!0,OverText:!0,Request:!0,Scroller:!0,Slick:!0,Slider:!0,Sortables:!0,Spinner:!0,Swiff:!0,Tips:!0,Type:!0,typeOf:!0,URI:!0,Window:!0,$A:!0,$F:!0,$H:!0,$R:!0,$break:!0,$continue:!0,$w:!0,Abstract:!0,Ajax:!0,Enumerable:!0,Field:!0,Form:!0,Insertion:!0,ObjectRange:!0,PeriodicalExecuter:!0,Position:!0,Prototype:!0,Selector:!0,Template:!0,Toggle:!0,Try:!0,Autocompleter:!0,Builder:!0,Control:!0,Draggable:!0,Draggables:!0,Droppables:!0,Effect:!0,Sortable:!0,SortableObserver:!0,Sound:!0,Scriptaculous:!0,define:!0,__filename:!0,__dirname:!0,Buffer:!0,exports:!0,GLOBAL:!0,global:!0,module:!0,process:!0,require:!0,Array:!0,Boolean:!0,Date:!0,decodeURI:!0,decodeURIComponent:!0,encodeURI:!0,encodeURIComponent:!0,Error:!0,eval:!0,EvalError:!0,Function:!0,hasOwnProperty:!0,isFinite:!0,isNaN:!0,JSON:!0,Math:!0,Number:!0,Object:!0,parseInt:!0,parseFloat:!0,RangeError:!0,ReferenceError:!0,RegExp:!0,String:!0,SyntaxError:!0,TypeError:!0,URIError:!0,escape:!0,unescape:!0};e.handlesLanguage=function(a){return a==="javascript"},g.prototype.addUse=function(a){this.uses.push(a)},g.prototype.addDeclaration=function(a){this.declarations.push(a)},e.analyze=function(a,b){function e(a,b){b.traverseTopDown("VarDecl(x)",function(b,c){return c.setAnnotation("scope",a),a.hasOwnProperty(b.x.value)?a[b.x.value].addDeclaration(b.x):a[b.x.value]=new g(b.x),c},"VarDeclInit(x, _)",function(b,c){return c.setAnnotation("scope",a),a.hasOwnProperty(b.x.value)?a[b.x.value].addDeclaration(b.x):a[b.x.value]=new g(b.x),c},"Function(x, _, _)",function(b,c){return c.setAnnotation("scope",a),b.x.value&&(a[b.x.value]=new g(b.x)),c})}function h(a,b,i){function k(a,b){b.traverseTopDown("VarDecl(x)",function(b){j.push(a[b.x.value])},"VarDeclInit(x, _)",function(b){j.push(a[b.x.value])},"Assign(Var(x), e)",function(b,c){return a[b.x.value]?a[b.x.value].addUse(c[0]):d.push({pos:c[0].getPos(),type:"warning",message:"Assigning to undeclared variable."}),k(a,b.e),this},"ForIn(Var(x), e, stats)",function(b,c){return a[b.x.value]?a[b.x.value].addUse(c):d.push({pos:c[0].getPos(),type:"warning",message:"Using undeclared variable as iterator variable."}),k(a,b.e),k(a,b.stats),this},"Var(x)",function(b,e){return e.setAnnotation("scope",a),a[b.x.value]?a[b.x.value].addUse(e):c.isFeatureEnabled("undeclaredVars")&&!f[b.x.value]&&d.push({pos:this.getPos(),type:"warning",message:"Undeclared variable."}),e},"Function(x, fargs, body)",function(b,d){d.setAnnotation("scope",a);var e=Object.create(a);return e["this"]=new g,b.fargs.forEach(function(a){a.setAnnotation("scope",e),e[a[0].value]=new g(a),c.isFeatureEnabled("unusedFunctionArgs")&&j.push(e[a[0].value])}),h(e,b.body),d},"Catch(x, body)",function(b,c){var d=a[b.x.value];return a[b.x.value]=new g(b.x),h(a,b.body,j),a[b.x.value]=d,c},'PropAccess(_, "lenght")',function(a,b){d.push({pos:b.getPos(),type:"warning",message:"Did you mean 'length'?"})},'Call(Var("parseInt"), [_])',function(){d.push({pos:this[0].getPos(),type:"warning",message:"Missing radix argument."})})}e(a,b);var j=i||[];k(a,b);if(!i)for(var l=0;l<j.length;l++)if(j[l].uses.length===0){var m=j[l];m.declarations.forEach(function(a){d.push({pos:a.getPos(),type:"unused",message:"Unused variable."})})}}var c=this,d=[];return h({},b),d},e.onCursorMovedNode=function(a,b,c,d){function g(a){if(!a)return;a.declarations.forEach(function(a){a.getPos()&&e.push({pos:a.getPos(),type:"occurrence_main"})}),a.uses.forEach(function(a){e.push({pos:a.getPos(),type:"occurrence_other"})})}if(!d)return;var e=[],f=[];return d.rewrite("Var(x)",function(a){var b=this.getAnnotation("scope");if(!b)return;var c=b[a.x.value];g(c),a.x.value!=="this"&&c&&f.push("renameVariable")},"VarDeclInit(x, _)",function(a){g(this.getAnnotation("scope")[a.x.value]),f.push("renameVariable")},"VarDecl(x)",function(a){g(this.getAnnotation("scope")[a.x.value]),f.push("renameVariable")},"FArg(x)",function(a){g(this.getAnnotation("scope")[a.x.value]),f.push("renameVariable")},"Function(x, _, _)",function(a){if(!a.x.value)return;g(this.getAnnotation("scope")[a.x.value]),f.push("renameVariable")}),this.isFeatureEnabled("instanceHighlight")?{markers:e,enableRefactorings:f}:{enableRefactorings:f}},e.getVariablePositions=function(a,b,c,d){var e,f;d.rewrite("VarDeclInit(x, _)",function(a,b){e=b.getAnnotation("scope")[a.x.value],f=a.x},"VarDecl(x)",function(a,b){e=b.getAnnotation("scope")[a.x.value],f=a.x},"FArg(x)",function(a,b){e=b.getAnnotation("scope")[a.x.value],f=b},"Function(x, _, _)",function(a,b){if(!a.x.value)return;e=b.getAnnotation("scope")[a.x.value],f=a.x},"Var(x)",function(a,b){e=b.getAnnotation("scope")[a.x.value],f=b});var g=f.getPos(),h=[],i=g.ec-g.sc;return e.declarations.forEach(function(a){if(a!==d[0]){var b=a.getPos();h.push({column:b.sc,row:b.sl})}}),e.uses.forEach(function(a){if(a!==d){var b=a.getPos();h.push({column:b.sc,row:b.sl})}}),{length:i,pos:{row:g.sl,column:g.sc},others:h}}}),define("treehugger/traverse",["require","exports","module","treehugger/tree"],function(a,b,c){function e(a){return a.length===1&&a[0].apply?a[0]:(a=Array.prototype.slice.call(a,0),a[0]&&Object.prototype.toString.call(a[0])==="[object Array]"&&(a=a[0]),function(){var b;for(var c=0;c<a.length;c++)if(typeof a[c]=="string"){var e=d.parse(a[c]),f=e.match(this);if(f){a[c+1]&&a[c+1].apply?(b=a[c+1].call(this,f,this),c++):b=this;if(b)return b}else a[c+1]&&a[c+1].apply&&c++}else{if(!a[c].apply)throw Error("Invalid argument: ",a[c]);b=a[c].call(this);if(b)return b}return!1})}function f(){var a,b=this;for(var c=0;c<arguments.length;c++){a=arguments[c],b=a.call(b);if(!b)return!1}return this}function g(a){var b,c;b=a.call(this);if(b)return b;if(this instanceof d.ConsNode||this instanceof d.ListNode)for(c=0;c<this.length;c++)g.call(this[c],a);return this}var d=a("treehugger/tree");Function.prototype.curry||(Function.prototype.curry=function(){var a=this,b=Array.prototype.slice.call(arguments);return function(){return a.apply(this,b.concat(Array.prototype.slice.call(arguments)))}}),b.traverseAll=function(a){var b,c;a=e(arguments);if(this instanceof d.ConsNode||this instanceof d.ListNode)for(c=0;c<this.length;c++){b=a.call(this[c]);if(!b)return!1}return this},b.attempt=function(a){a=e(arguments);var b=a.call(this);return b?b:this},b.debug=function(a){return console.log(a?this.toPrettyString(""):this.toString()),this},b.traverseTopDown=function(a){return a=e(arguments),g.call(this,a)},b.traverseUp=function(a){a=e(arguments);var b=a.call(this);return b?b:this.parent?this.parent.traverseUp(a):!1},b.collectTopDown=function(a){a=e(arguments);var b=[];return this.traverseTopDown(function(){var c=a.call(this);return c&&b.push(c),c}),d.list(b)},b.map=function(a){a=e(arguments);var b,c=[];for(var f=0;f<this.length;f++){b=a.call(this[f],this[f]);if(b)c.push(b);else throw Error("Mapping failed: ",this[f])}return d.list(c)},b.each=function(a){a=e(arguments);for(var b=0;b<this.length;b++)a.call(this[b],this[b])},b.filter=function(a){a=e(arguments);var b=[];return this.forEach(function(c){var d=a.call(c);d&&b.push(d)}),d.list(b)},b.rewrite=function(a){return a=e(arguments),a.call(this)};for(var h in b)b.hasOwnProperty(h)&&(d.Node.prototype[h]=b[h]);b.addParentPointers=function(a){return a.traverseTopDown(function(){var a=this;this.traverseAll(function(){return this.parent=a,this})})}}),define("ext/jslanguage/narcissus_jshint",["require","exports","module","ext/language/base_handler","ace/worker/jshint","ace/narcissus/parser"],function(a,b,c){var d=a("ext/language/base_handler"),e=a("ace/worker/jshint").JSHINT,f=a("ace/narcissus/parser"),g=c.exports=Object.create(d),h=[/Missing radix parameter./,/Bad for in variable '(.+)'./];g.handlesLanguage=function(a){return a==="javascript"},g.analysisRequiresParsing=function(){return!1},g.analyze=function(a){var b=a.getValue();b=b.replace(/^(#!.*\n)/,"//$1");var c=[];try{f.parse(b)}catch(d){var g=d.message.split(":"),i=g.pop().trim(),j=g.pop();if(j){var k=parseInt(j.trim(),10)-1;c=[{pos:{sl:k,el:k},message:i,type:"error"}]}return c}finally{}return this.isFeatureEnabled("jshint")&&(e(b,{undef:!1,onevar:!1,passfail:!1,devel:!0,browser:!0,node:!0}),e.errors.forEach(function(a){if(!a)return;for(var b=0;b<h.length;b++)if(h[b].test(a.reason))return;c.push({pos:{sl:a.line-1,sc:a.column-1},type:"warning",message:a.reason})})),c}}),define("ace/worker/jshint",["require","exports","module"],function(a,b,c){var d=function(){function bb(){}function bc(a,b){return Object.prototype.hasOwnProperty.call(a,b)}function bd(a,b){e[a]===undefined&&c[a]===undefined&&bi("Bad option: '"+a+"'.",b)}function be(a,b){var c;for(c in b)bc(b,c)&&(a[c]=b[c])}function bf(){B.couch&&be(C,g),B.rhino&&be(C,G),B.prototypejs&&be(C,F),B.node&&(be(C,z),B.globalstrict=!0),B.devel&&be(C,h),B.dojo&&be(C,i),B.browser&&be(C,f),B.nonstandard&&be(C,K),B.jquery&&be(C,s),B.mootools&&be(C,x),B.wsh&&be(C,T),B.esnext&&R(),B.globalstrict&&B.strict!==!1&&(B.strict=!0)}function bg(a,b,c){var d=Math.floor(b/t.length*100);throw{name:"JSHintError",line:b,character:c,message:a+" ("+d+"% scanned).",raw:a}}function bh(a,b,c,e){return d.undefs.push([a,b,c,e])}function bi(a,b,c,e,f,g){var h,i,j;return b=b||y,b.id==="(end)"&&(b=P),i=b.line||0,h=b.from||0,j={id:"(error)",raw:a,evidence:t[i-1]||"",line:i,character:h,a:c,b:e,c:f,d:g},j.reason=a.supplant(j),d.errors.push(j),B.passfail&&bg("Stopping. ",i,h),S+=1,S>=B.maxerr&&bg("Too many errors.",i,h),j}function bj(a,b,c,d,e,f,g){return bi(a,{line:b,from:c},d,e,f,g)}function bk(a,b,c,d,e,f){var g=bi(a,b,c,d,e,f)}function bl(a,b,c,d,e,f,g){return bk(a,{line:b,from:c},d,e,f,g)}function bn(a,b){a==="hasOwnProperty"&&bi("'hasOwnProperty' is a really bad name."),bc(k,a)&&!k["(global)"]&&(k[a]===!0?B.latedef&&bi("'{a}' was used before it was defined.",y,a):!B.shadow&&b!=="exception"&&bi("'{a}' is already defined.",y,a)),k[a]=b,k["(global)"]?(n[a]=k,bc(o,a)&&(B.latedef&&bi("'{a}' was used before it was defined.",y,a),delete o[a])):H[a]=k}function bo(){var a,b,d,e=y.value,f,g;switch(e){case"*/":bk("Unbegun comment.");break;case"/*members":case"/*member":e="/*members",w||(w={}),b=w;break;case"/*jshint":case"/*jslint":b=B,d=c;break;case"/*global":b=C;break;default:bk("What?")}f=bm.token();a:for(;;){for(;;){if(f.type==="special"&&f.value==="*/")break a;if(f.id!=="(endline)"&&f.id!==",")break;f=bm.token()}f.type!=="(string)"&&f.type!=="(identifier)"&&e!=="/*members"&&bk("Bad option.",f),g=bm.token(),g.id===":"?(g=bm.token(),b===w&&bk("Expected '{a}' and instead saw '{b}'.",f,"*/",":"),e==="/*jshint"&&bd(f.value,f),f.value!=="indent"||e!=="/*jshint"&&e!=="/*jslint"?f.value!=="maxerr"||e!=="/*jshint"&&e!=="/*jslint"?f.value!=="maxlen"||e!=="/*jshint"&&e!=="/*jslint"?f.value==="validthis"?k["(global)"]?bk("Option 'validthis' can't be used in a global scope."):g.value==="true"||g.value==="false"?b[f.value]=g.value==="true":bk("Bad option value.",g):g.value==="true"?b[f.value]=!0:g.value==="false"?b[f.value]=!1:bk("Bad option value.",g):(a=+g.value,(typeof a!="number"||!isFinite(a)||a<=0||Math.floor(a)!==a)&&bk("Expected a small integer and instead saw '{a}'.",g,g.value),b.maxlen=a):(a=+g.value,(typeof a!="number"||!isFinite(a)||a<=0||Math.floor(a)!==a)&&bk("Expected a small integer and instead saw '{a}'.",g,g.value),b.maxerr=a):(a=+g.value,(typeof a!="number"||!isFinite(a)||a<=0||Math.floor(a)!==a)&&bk("Expected a small integer and instead saw '{a}'.",g,g.value),b.white=!0,b.indent=a),f=bm.token()):((e==="/*jshint"||e==="/*jslint")&&bk("Missing option value.",f),b[f.value]=!1,f=g)}d&&bf()}function bp(a){var b=a||0,c=0,d;while(c<=b)d=u[c],d||(d=u[c]=bm.token()),c+=1;return d}function bq(b,c){switch(P.id){case"(number)":y.id==="."&&bi("A dot following a number can be confused with a decimal point.",P);break;case"-":(y.id==="-"||y.id==="--")&&bi("Confusing minusses.");break;case"+":(y.id==="+"||y.id==="++")&&bi("Confusing plusses.")}if(P.type==="(string)"||P.identifier)a=P.value;b&&y.id!==b&&(c?y.id==="(end)"?bi("Unmatched '{a}'.",c,c.id):bi("Expected '{a}' to match '{b}' from line {c} and instead saw '{d}'.",y,b,c.id,c.line,y.value):(y.type!=="(identifier)"||y.value!==b)&&bi("Expected '{a}' and instead saw '{b}'.",y,b,y.value)),E=P,P=y;for(;;){y=u.shift()||bm.token();if(y.id==="(end)"||y.id==="(error)")return;if(y.type==="special")bo();else if(y.id!=="(endline)")break}}function br(b,c){var d,e=!1,f=!1;y.id==="(end)"&&bk("Unexpected early end of program.",P),bq(),c&&(a="anonymous",k["(verb)"]=P.value);if(c===!0&&P.fud)d=P.fud();else{if(P.nud)d=P.nud();else{if(y.type==="(number)"&&P.id===".")return bi("A leading decimal point can be confused with a dot: '.{a}'.",P,y.value),bq(),P;bk("Expected an identifier and instead saw '{a}'.",P,P.id)}while(b<y.lbp)e=P.value==="Array",f=P.value==="Object",bq(),e&&P.id==="("&&y.id===")"&&bi("Use the array literal notation [].",P),f&&P.id==="("&&y.id===")"&&bi("Use the object literal notation {}.",P),P.led?d=P.led(d):bk("Expected an operator and instead saw '{a}'.",P,P.id)}return d}function bs(a,b){a=a||P,b=b||y,B.white&&a.character!==b.from&&a.line===b.line&&(a.from+=a.character-a.from,bi("Unexpected space after '{a}'.",a,a.value))}function bt(a,b){a=a||P,b=b||y,B.white&&(a.character!==b.from||a.line!==b.line)&&bi("Unexpected space before '{a}'.",b,b.value)}function bu(a,b){a=a||P,b=b||y,B.white&&!a.comment&&a.line===b.line&&bs(a,b)}function bv(a,b){B.white&&(a=a||P,b=b||y,a.line===b.line&&a.character===b.from&&(a.from+=a.character-a.from,bi("Missing space after '{a}'.",a,a.value)))}function bw(a,b){a=a||P,b=b||y,!B.laxbreak&&a.line!==b.line?bi("Bad line breaking before '{a}'.",b,b.id):B.white&&(a=a||P,b=b||y,a.character===b.from&&(a.from+=a.character-a.from,bi("Missing space after '{a}'.",a,a.value)))}function bx(a){var b;B.white&&y.id!=="(end)"&&(b=q+(a||0),y.from!==b&&bi("Expected '{a}' to have an indentation at {b} instead at {c}.",y,y.value,b,y.from))}function by(a){a=a||P,a.line!==y.line&&bi("Line breaking error '{a}'.",a,a.value)}function bz(){P.line!==y.line?B.laxcomma||(bz.first&&(bi("Comma warnings can be turned off with 'laxcomma'"),bz.first=!1),bi("Bad line breaking before '{a}'.",P,y.id)):!P.comment&&P.character!==y.from&&B.white&&(P.from+=P.character-P.from,bi("Unexpected space after '{a}'.",P,P.value)),bq(","),bv(P,y)}function bA(a,b){var c=N[a];if(!c||typeof c!="object")N[a]=c={id:a,lbp:b,value:a};return c}function bB(a){return bA(a,0)}function bC(a,b){var c=bB(a);return c.identifier=c.reserved=!0,c.fud=b,c}function bD(a,b){var c=bC(a,b);return c.block=!0,c}function bE(a){var b=a.id.charAt(0);if(b>="a"&&b<="z"||b>="A"&&b<="Z")a.identifier=a.reserved=!0;return a}function bF(a,b){var c=bA(a,150);return bE(c),c.nud=typeof b=="function"?b:function(){this.right=br(150),this.arity="unary";if(this.id==="++"||this.id==="--")B.plusplus?bi("Unexpected use of '{a}'.",this,this.id):(!this.right.identifier||this.right.reserved)&&this.right.id!=="."&&this.right.id!=="["&&bi("Bad operand.",this);return this},c}function bG(a,b){var c=bB(a);return c.type=a,c.nud=b,c}function bH(a,b){var c=bG(a,b);return c.identifier=c.reserved=!0,c}function bI(a,b){return bH(a,function(){return typeof b=="function"&&b(this),this})}function bJ(a,b,c,d){var e=bA(a,c);return bE(e),e.led=function(e){return d||(bw(E,P),bv(P,y)),a==="in"&&e.id==="!"&&bi("Confusing use of '{a}'.",e,"!"),typeof b=="function"?b(e,this):(this.left=e,this.right=br(c),this)},e}function bK(a,b){var c=bA(a,100);return c.led=function(a){bw(E,P),bv(P,y);var c=br(100);return a&&a.id==="NaN"||c&&c.id==="NaN"?bi("Use the isNaN function to compare with NaN.",this):b&&b.apply(this,[a,c]),a.id==="!"&&bi("Confusing use of '{a}'.",a,"!"),c.id==="!"&&bi("Confusing use of '{a}'.",c,"!"),this.left=a,this.right=c,this},c}function bL(a){return a&&(a.type==="(number)"&&+a.value===0||a.type==="(string)"&&a.value===""||a.type==="null"&&!B.eqnull||a.type==="true"||a.type==="false"||a.type==="undefined")}function bM(a,b){return bA(a,20).exps=!0,bJ(a,function(a,b){var c;b.left=a,C[a.value]===!1&&H[a.value]["(global)"]===!0?bi("Read only.",a):a["function"]&&bi("'{a}' is a function.",a,a.value);if(a){B.esnext&&k[a.value]==="const"&&bi("Attempting to override '{a}' which is a constant",a,a.value);if(a.id==="."||a.id==="[")return(!a.left||a.left.value==="arguments")&&bi("Bad assignment.",b),b.right=br(19),b;if(a.identifier&&!a.reserved)return k[a.value]==="exception"&&bi("Do not assign to the exception parameter.",a),b.right=br(19),b;a===N["function"]&&bi("Expected an identifier in an assignment and instead saw a function invocation.",P)}bk("Bad assignment.",b)},20)}function bN(a,b,c){var d=bA(a,c);return bE(d),d.led=typeof b=="function"?b:function(a){return B.bitwise&&bi("Unexpected use of '{a}'.",this,this.id),this.left=a,this.right=br(c),this},d}function bO(a){return bA(a,20).exps=!0,bJ(a,function(a,b){B.bitwise&&bi("Unexpected use of '{a}'.",b,b.id),bv(E,P),bv(P,y);if(a)return a.id==="."||a.id==="["||a.identifier&&!a.reserved?(br(19),b):(a===N["function"]&&bi("Expected an identifier in an assignment, and instead saw a function invocation.",P),b);bk("Bad assignment.",b)},20)}function bP(a,b){var c=bA(a,150);return c.led=function(a){return B.plusplus?bi("Unexpected use of '{a}'.",this,this.id):(!a.identifier||a.reserved)&&a.id!=="."&&a.id!=="["&&bi("Bad operand.",this),this.left=a,this},c}function bQ(a){if(y.identifier)return bq(),P.reserved&&!B.es5&&(!a||P.value!=="undefined")&&bi("Expected an identifier and instead saw '{a}' (a reserved word).",P,P.id),P.value}function bR(a){var b=bQ(a);if(b)return b;P.id==="function"&&y.id==="("?bi("Missing name in function declaration."):bk("Expected an identifier and instead saw '{a}'.",y,y.value)}function bS(a){var b=0,c;if(y.id!==";"||A)return;for(;;){c=bp(b);if(c.reach)return;if(c.id!=="(endline)"){if(c.id==="function"){if(!B.latedef)break;bi("Inner functions should be listed at the top of the outer function.",c);break}bi("Unreachable '{a}' after '{b}'.",c,c.value,a);break}b+=1}}function bT(a){var b=q,c,d=H,e=y;if(e.id===";"){bq(";");return}e.identifier&&!e.reserved&&bp().id===":"&&(bq(),bq(":"),H=Object.create(d),bn(e.value,"label"),y.labelled||bi("Label '{a}' on {b} statement.",y,e.value,y.value),_.test(e.value+":")&&bi("Label '{a}' looks like a javascript url.",e,e.value),y.label=e.value,e=y),a||bx(),c=br(0,!0);if(!e.block){!B.expr&&(!c||!c.exps)?bi("Expected an assignment or function call and instead saw an expression.",P):B.nonew&&c.id==="("&&c.left.id==="new"&&bi("Do not use 'new' for side effects.");if(y.id===",")return bz();y.id!==";"?B.asi||(!B.lastsemic||y.id!=="}"||y.line!==P.line)&&bj("Missing semicolon.",P.line,P.character):(bs(P,y),bq(";"),bv(P,y))}return q=b,H=d,c}function bU(a){var b=[],c,d;while(!y.reach&&y.id!=="(end)")y.id===";"?(d=bp(),(!d||d.id!=="(")&&bi("Unnecessary semicolon."),bq(";")):b.push(bT(a===y.line));return b}function bV(){var a,b,c;for(;;){if(y.id==="(string)"){b=bp(0);if(b.id==="(endline)"){a=1;do c=bp(a),a+=1;while(c.id==="(endline)");if(c.id!==";"){if(c.id!=="(string)"&&c.id!=="(number)"&&c.id!=="(regexp)"&&c.identifier!==!0&&c.id!=="}")break;bi("Missing semicolon.",y)}else b=c}else if(b.id==="}")bi("Missing semicolon.",b);else if(b.id!==";")break;bx(),bq(),M[P.value]&&bi('Unnecessary directive "{a}".',P,P.value),P.value==="use strict"&&(B.newcap=!0,B.undef=!0),M[P.value]=!0,b.id===";"&&bq(";");continue}break}}function bW(a,b,c){var d,e=p,f=q,g,h=H,i,j,l;p=a;if(!a||!B.funcscope)H=Object.create(H);bv(P,y),i=y;if(y.id==="{"){bq("{"),j=P.line;if(y.id!=="}"){q+=B.indent;while(!a&&y.from>q)q+=B.indent;if(c){g={};for(l in M)bc(M,l)&&(g[l]=M[l]);bV(),B.strict&&k["(context)"]["(global)"]&&!g["use strict"]&&!M["use strict"]&&bi('Missing "use strict" statement.')}d=bU(j),c&&(M=g),q-=B.indent,j!==y.line&&bx()}else j!==y.line&&bx();bq("}",i),q=f}else a?((!b||B.curly)&&bi("Expected '{a}' and instead saw '{b}'.",y,"{",y.value),A=!0,q+=B.indent,d=[bT(y.line===P.line)],q-=B.indent,A=!1):bk("Expected '{a}' and instead saw '{b}'.",y,"{",y.value);k["(verb)"]=null;if(!a||!B.funcscope)H=h;return p=e,a&&B.noempty&&(!d||d.length===0)&&bi("Empty block."),d}function bX(a){w&&typeof w[a]!="boolean"&&bi("Unexpected /*member '{a}'.",P,a),typeof v[a]=="number"?v[a]+=1:v[a]=1}function bY(a){var b=a.value,c=a.line,d=o[b];typeof d=="function"&&(d=!1),d?d[d.length-1]!==c&&d.push(c):(d=[c],o[b]=d)}function bZ(){var a=bQ(!0);return a||(y.id==="(string)"?(a=y.value,bq()):y.id==="(number)"&&(a=y.value.toString(),bq())),a}function b$(){var a,b=y,c=[];bq("("),bu();if(y.id===")"){bq(")");return}for(;;){a=bR(!0),c.push(a),bn(a,"parameter");if(y.id===",")bz();else return bq(")",b),bu(E,P),c}}function b_(b,c){var d,e=B,f=H;return B=Object.create(B),H=Object.create(H),k={"(name)":b||'"'+a+'"',"(line)":y.line,"(context)":k,"(breakage)":0,"(loopage)":0,"(scope)":H,"(statement)":c},d=k,P.funct=k,m.push(k),b&&bn(b,"function"),k["(params)"]=b$(),bW(!1,!1,!0),H=f,B=e,k["(last)"]=P.line,k=k["(context)"],d}function cb(){function a(){var a={},b=y;bq("{");if(y.id!=="}")for(;;){if(y.id==="(end)")bk("Missing '}' to match '{' from line {a}.",y,b.line);else{if(y.id==="}"){bi("Unexpected comma.",P);break}y.id===","?bk("Unexpected comma.",y):y.id!=="(string)"&&bi("Expected a string and instead saw {a}.",y,y.value)}a[y.value]===!0?bi("Duplicate key '{a}'.",y,y.value):y.value==="__proto__"&&!B.proto||y.value==="__iterator__"&&!B.iterator?bi("The '{a}' key may produce unexpected results.",y,y.value):a[y.value]=!0,bq(),bq(":"),cb();if(y.id!==",")break;bq(",")}bq("}")}function b(){var a=y;bq("[");if(y.id!=="]")for(;;){if(y.id==="(end)")bk("Missing ']' to match '[' from line {a}.",y,a.line);else{if(y.id==="]"){bi("Unexpected comma.",P);break}y.id===","&&bk("Unexpected comma.",y)}cb();if(y.id!==",")break;bq(",")}bq("]")}switch(y.id){case"{":a();break;case"[":b();break;case"true":case"false":case"null":case"(number)":case"(string)":bq();break;case"-":bq("-"),P.character!==y.from&&bi("Unexpected space after '-'.",P),bs(P,y),bq("(number)");break;default:bk("Expected a JSON value.",y)}}var a,b={"<":!0,"<=":!0,"==":!0,"===":!0,"!==":!0,"!=":!0,">":!0,">=":!0,"+":!0,"-":!0,"*":!0,"/":!0,"%":!0},c={asi:!0,bitwise:!0,boss:!0,browser:!0,couch:!0,curly:!0,debug:!0,devel:!0,dojo:!0,eqeqeq:!0,eqnull:!0,es5:!0,esnext:!0,evil:!0,expr:!0,forin:!0,funcscope:!0,globalstrict:!0,immed:!0,iterator:!0,jquery:!0,lastsemic:!0,latedef:!0,laxbreak:!0,laxcomma:!0,loopfunc:!0,mootools:!0,multistr:!0,newcap:!0,noarg:!0,node:!0,noempty:!0,nonew:!0,nonstandard:!0,nomen:!0,onevar:!0,onecase:!0,passfail:!0,plusplus:!0,proto:!0,prototypejs:!0,regexdash:!0,regexp:!0,rhino:!0,undef:!0,scripturl:!0,shadow:!0,smarttabs:!0,strict:!0,sub:!0,supernew:!0,trailing:!0,validthis:!0,withstmt:!0,white:!0,wsh:!0},e={maxlen:!1,indent:!1,maxerr:!1,predef:!1},f={ArrayBuffer:!1,ArrayBufferView:!1,Audio:!1,addEventListener:!1,applicationCache:!1,atob:!1,blur:!1,btoa:!1,clearInterval:!1,clearTimeout:!1,close:!1,closed:!1,DataView:!1,DOMParser:!1,defaultStatus:!1,document:!1,event:!1,FileReader:!1,Float32Array:!1,Float64Array:!1,FormData:!1,focus:!1,frames:!1,getComputedStyle:!1,HTMLElement:!1,HTMLAnchorElement:!1,HTMLBaseElement:!1,HTMLBlockquoteElement:!1,HTMLBodyElement:!1,HTMLBRElement:!1,HTMLButtonElement:!1,HTMLCanvasElement:!1,HTMLDirectoryElement:!1,HTMLDivElement:!1,HTMLDListElement:!1,HTMLFieldSetElement:!1,HTMLFontElement:!1,HTMLFormElement:!1,HTMLFrameElement:!1,HTMLFrameSetElement:!1,HTMLHeadElement:!1,HTMLHeadingElement:!1,HTMLHRElement:!1,HTMLHtmlElement:!1,HTMLIFrameElement:!1,HTMLImageElement:!1,HTMLInputElement:!1,HTMLIsIndexElement:!1,HTMLLabelElement:!1,HTMLLayerElement:!1,HTMLLegendElement:!1,HTMLLIElement:!1,HTMLLinkElement:!1,HTMLMapElement:!1,HTMLMenuElement:!1,HTMLMetaElement:!1,HTMLModElement:!1,HTMLObjectElement:!1,HTMLOListElement:!1,HTMLOptGroupElement:!1,HTMLOptionElement:!1,HTMLParagraphElement:!1,HTMLParamElement:!1,HTMLPreElement:!1,HTMLQuoteElement:!1,HTMLScriptElement:!1,HTMLSelectElement:!1,HTMLStyleElement:!1,HTMLTableCaptionElement:!1,HTMLTableCellElement:!1,HTMLTableColElement:!1,HTMLTableElement:!1,HTMLTableRowElement:!1,HTMLTableSectionElement:!1,HTMLTextAreaElement:!1,HTMLTitleElement:!1,HTMLUListElement:!1,HTMLVideoElement:!1,history:!1,Int16Array:!1,Int32Array:!1,Int8Array:!1,Image:!1,length:!1,localStorage:!1,location:!1,MessageChannel:!1,MessageEvent:!1,MessagePort:!1,moveBy:!1,moveTo:!1,name:!1,navigator:!1,onbeforeunload:!0,onblur:!0,onerror:!0,onfocus:!0,onload:!0,onresize:!0,onunload:!0,open:!1,openDatabase:!1,opener:!1,Option:!1,parent:!1,print:!1,removeEventListener:!1,resizeBy:!1,resizeTo:!1,screen:!1,scroll:!1,scrollBy:!1,scrollTo:!1,sessionStorage:!1,setInterval:!1,setTimeout:!1,SharedWorker:!1,status:!1,top:!1,Uint16Array:!1,Uint32Array:!1,Uint8Array:!1,WebSocket:!1,window:!1,Worker:!1,XMLHttpRequest:!1,XMLSerializer:!1,XPathEvaluator:!1,XPathException:!1,XPathExpression:!1,XPathNamespace:!1,XPathNSResolver:!1,XPathResult:!1},g={require:!1,respond:!1,getRow:!1,emit:!1,send:!1,start:!1,sum:!1,log:!1,exports:!1,module:!1,provides:!1},h={alert:!1,confirm:!1,console:!1,Debug:!1,opera:!1,prompt:!1},i={dojo:!1,dijit:!1,dojox:!1,define:!1,require:!1},j={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"/":"\\/","\\":"\\\\"},k,l=["closure","exception","global","label","outer","unused","var"],m,n,o,p,q,r,s={$:!1,jQuery:!1},t,u,v,w,x={$:!1,$$:!1,Assets:!1,Browser:!1,Chain:!1,Class:!1,Color:!1,Cookie:!1,Core:!1,Document:!1,DomReady:!1,DOMReady:!1,Drag:!1,Element:!1,Elements:!1,Event:!1,Events:!1,Fx:!1,Group:!1,Hash:!1,HtmlTable:!1,Iframe:!1,IframeShim:!1,InputValidator:!1,instanceOf:!1,Keyboard:!1,Locale:!1,Mask:!1,MooTools:!1,Native:!1,Options:!1,OverText:!1,Request:!1,Scroller:!1,Slick:!1,Slider:!1,Sortables:!1,Spinner:!1,Swiff:!1,Tips:!1,Type:!1,typeOf:!1,URI:!1,Window:!1},y,z={__filename:!1,__dirname:!1,Buffer:!1,console:!1,exports:!1,GLOBAL:!1,global:!1,module:!1,process:!1,require:!1,setTimeout:!1,clearTimeout:!1,setInterval:!1,clearInterval:!1},A,B,C,D,E,F={$:!1,$$:!1,$A:!1,$F:!1,$H:!1,$R:!1,$break:!1,$continue:!1,$w:!1,Abstract:!1,Ajax:!1,Class:!1,Enumerable:!1,Element:!1,Event:!1,Field:!1,Form:!1,Hash:!1,Insertion:!1,ObjectRange:!1,PeriodicalExecuter:!1,Position:!1,Prototype:!1,Selector:!1,Template:!1,Toggle:!1,Try:!1,Autocompleter:!1,Builder:!1,Control:!1,Draggable:!1,Draggables:!1,Droppables:!1,Effect:!1,Sortable:!1,SortableObserver:!1,Sound:!1,Scriptaculous:!1},G={defineClass:!1,deserialize:!1,gc:!1,help:!1,importPackage:!1,java:!1,load:!1,loadClass:!1,print:!1,quit:!1,readFile:!1,readUrl:!1,runCommand:!1,seal:!1,serialize:!1,spawn:!1,sync:!1,toint32:!1,version:!1},H,I,J={Array:!1,Boolean:!1,Date:!1,decodeURI:!1,decodeURIComponent:!1,encodeURI:!1,encodeURIComponent:!1,Error:!1,eval:!1,EvalError:!1,Function:!1,hasOwnProperty:!1,isFinite:!1,isNaN:!1,JSON:!1,Math:!1,Number:!1,Object:!1,parseInt:!1,parseFloat:!1,RangeError:!1,ReferenceError:!1,RegExp:!1,String:!1,SyntaxError:!1,TypeError:!1,URIError:!1},K={escape:!1,unescape:!1},L={E:!0,LN2:!0,LN10:!0,LOG2E:!0,LOG10E:!0,MAX_VALUE:!0,MIN_VALUE:!0,NEGATIVE_INFINITY:!0,PI:!0,POSITIVE_INFINITY:!0,SQRT1_2:!0,SQRT2:!0},M,N={},O,P,Q,R,S,T={ActiveXObject:!0,Enumerator:!0,GetObject:!0,ScriptEngine:!0,ScriptEngineBuildVersion:!0,ScriptEngineMajorVersion:!0,ScriptEngineMinorVersion:!0,VBArray:!0,WSH:!0,WScript:!0,XDomainRequest:!0},U,V,W,X,Y,Z,$,_,ba;(function(){U=/@cc|<\/?|script|\]\s*\]|<\s*!|&lt/i,V=/[\u0000-\u001f\u007f-\u009f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/,W=/^\s*([(){}\[.,:;'"~\?\]#@]|==?=?|\/(\*(jshint|jslint|members?|global)?|=|\/)?|\*[\/=]?|\+(?:=|\++)?|-(?:=|-+)?|%=?|&[&=]?|\|[|=]?|>>?>?=?|<([\/=!]|\!(\[|--)?|<=?)?|\^=?|\!=?=?|[a-zA-Z_$][a-zA-Z0-9_$]*|[0-9]+([xX][0-9a-fA-F]+|\.[0-9]*)?([eE][+\-]?[0-9]+)?)/,X=/[\u0000-\u001f&<"\/\\\u007f-\u009f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/,Y=/[\u0000-\u001f&<"\/\\\u007f-\u009f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,Z=/\*\/|\/\*/,$=/^([a-zA-Z_$][a-zA-Z0-9_$]*)$/,_=/^(?:javascript|jscript|ecmascript|vbscript|mocha|livescript)\s*:/i,ba=/^\s*\/\*\s*falls\sthrough\s*\*\/\s*$/})(),typeof Array.isArray!="function"&&(Array.isArray=function(a){return Object.prototype.toString.apply(a)==="[object Array]"}),typeof Object.create!="function"&&(Object.create=function(a){return bb.prototype=a,new bb}),typeof Object.keys!="function"&&(Object.keys=function(a){var b=[],c;for(c in a)bc(a,c)&&b.push(c);return b}),typeof String.prototype.entityify!="function"&&(String.prototype.entityify=function(){return this.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}),typeof String.prototype.isAlpha!="function"&&(String.prototype.isAlpha=function(){return this>="a"&&this<="z￿"||this>="A"&&this<="Z￿"}),typeof String.prototype.isDigit!="function"&&(String.prototype.isDigit=function(){return this>="0"&&this<="9"}),typeof String.prototype.supplant!="function"&&(String.prototype.supplant=function(a){return this.replace(/\{([^{}]*)\}/g,function(b,c){var d=a[c];return typeof d=="string"||typeof d=="number"?d:b})}),typeof String.prototype.name!="function"&&(String.prototype.name=function(){return $.test(this)?this:X.test(this)?'"'+this.replace(Y,function(a){var b=j[a];return b?b:"\\u"+("0000"+a.charCodeAt().toString(16)).slice(-4)})+'"':'"'+this+'"'});var bm=function(){function f(){var a,c;return d>=t.length?!1:(b=1,e=t[d],d+=1,B.smarttabs?a=e.search(/ \t/):a=e.search(/ \t|\t /),a>=0&&bj("Mixed spaces and tabs.",d,a+1),e=e.replace(/\t/g,O),a=e.search(V),a>=0&&bj("Unsafe character.",d,a),B.maxlen&&B.maxlen<e.length&&bj("Line too long.",d,e.length),c=B.trailing&&e.match(/^(.*?)\s+$/),c&&!/^\s+$/.test(e)&&bj("Trailing whitespace.",d,c[1].length+1),!0)}function g(a,e){var f,g;return a==="(color)"||a==="(range)"?g={type:a}:a==="(punctuator)"||a==="(identifier)"&&bc(N,e)?g=N[e]||N["(error)"]:g=N[a],g=Object.create(g),(a==="(string)"||a==="(range)")&&!B.scripturl&&_.test(e)&&bj("Script URL.",d,c),a==="(identifier)"&&(g.identifier=!0,e==="__proto__"&&!B.proto?bj("The '{a}' property is deprecated.",d,c,e):e==="__iterator__"&&!B.iterator?bj("'{a}' is only available in JavaScript 1.7.",d,c,e):B.nomen&&(e.charAt(0)==="_"||e.charAt(e.length-1)==="_")&&(!B.node||P.id==="."||e!=="__dirname"&&e!=="__filename")&&bj("Unexpected {a} in '{b}'.",d,c,"dangling '_'",e)),g.value=e,g.line=d,g.character=b,g.from=c,f=g.id,f!=="(endline)"&&(D=f&&("(,=:[!&|?{};".indexOf(f.charAt(f.length-1))>=0||f==="return"||f==="case")),g}var b,c,d,e;return{init:function(a){typeof a=="string"?t=a.replace(/\r\n/g,"\n").replace(/\r/g,"\n").split("\n"):t=a,t[0]&&t[0].substr(0,2)==="#!"&&(t[0]=""),d=0,f(),c=1},range:function(a,f){var h,i="";c=b,e.charAt(0)!==a&&bl("Expected '{a}' and instead saw '{b}'.",d,b,a,e.charAt(0));for(;;){e=e.slice(1),b+=1,h=e.charAt(0);switch(h){case"":bl("Missing '{a}'.",d,b,h);break;case f:return e=e.slice(1),b+=1,g("(range)",i);case"\\":bj("Unexpected '{a}'.",d,b,h)}i+=h}},token:function(){function v(a){var d=a.exec(e),f;if(d)return n=d[0].length,f=d[1],h=f.charAt(0),e=e.substr(n),c=b+n-f.length,b+=n,f}function w(a){function l(a){var c=parseInt(e.substr(i+1,a),16);i+=a,c>=32&&c<=126&&c!==34&&c!==92&&c!==39&&bj("Unnecessary escapement.",d,b),b+=a,h=String.fromCharCode(c)}var h,i,j="",k=!1;r&&a!=='"'&&bj("Strings must use doublequote.",d,b),i=0;a:for(;;){while(i>=e.length){i=0;var m=d,n=c;if(!f()){bl("Unclosed string.",m,n);break a}k?k=!1:bj("Unclosed string.",m,n)}h=e.charAt(i);if(h===a)return b+=1,e=e.substr(i+1),g("(string)",j,a);if(h<" "){if(h==="\n"||h==="\r")break;bj("Control character in string: {a}.",d,b+i,e.slice(0,i))}else if(h==="\\"){i+=1,b+=1,h=e.charAt(i),u=e.charAt(i+1);switch(h){case"\\":case'"':case"/":break;case"'":r&&bj("Avoid \\'.",d,b);break;case"b":h="\b";break;case"f":h="\f";break;case"n":h="\n";break;case"r":h="\r";break;case"t":h="\t";break;case"0":h="\0",u>=0&&u<=7&&M["use strict"]&&bj("Octal literals are not allowed in strict mode.",d,b);break;case"u":l(4);break;case"v":r&&bj("Avoid \\v.",d,b),h="";break;case"x":r&&bj("Avoid \\x-.",d,b),l(2);break;case"":k=!0;if(B.multistr){r&&bj("Avoid EOL escapement.",d,b),h="",b-=1;break}bj("Bad escapement of EOL. Use option multistr if needed.",d,b);break;default:bj("Bad escapement.",d,b)}}j+=h,b+=1,i+=1}}var a,h,i,j,k,l,m,n,o,p,q,s,t,u;for(;;){if(!e)return g(f()?"(endline)":"(end)","");q=v(W);if(!q){q="",h="";while(e&&e<"!")e=e.substr(1);e&&(bl("Unexpected '{a}'.",d,b,e.substr(0,1)),e="")}else{if(h.isAlpha()||h==="_"||h==="$")return g("(identifier)",q);if(h.isDigit())return isFinite(Number(q))||bj("Bad number '{a}'.",d,b,q),e.substr(0,1).isAlpha()&&bj("Missing space after '{a}'.",d,b,q),h==="0"&&(j=q.substr(1,1),j.isDigit()?P.id!=="."&&bj("Don't use extra leading zeros '{a}'.",d,b,q):r&&(j==="x"||j==="X")&&bj("Avoid 0x-. '{a}'.",d,b,q)),q.substr(q.length-1)==="."&&bj("A trailing decimal point can be confused with a dot '{a}'.",d,b,q),g("(number)",q);switch(q){case'"':case"'":return w(q);case"//":e="",P.comment=!0;break;case"/*":for(;;){m=e.search(Z);if(m>=0)break;f()||bl("Unclosed comment.",d,b)}b+=m+2,e.substr(m,1)==="/"&&bl("Nested comment.",d,b),e=e.substr(m+2),P.comment=!0;break;case"/*members":case"/*member":case"/*jshint":case"/*jslint":case"/*global":case"*/":return{value:q,type:"special",line:d,character:b,from:c};case"":break;case"/":P.id==="/="&&bl("A regular expression literal can be confused with '/='.",d,c);if(D){k=0,i=0,n=0;for(;;){a=!0,h=e.charAt(n),n+=1;switch(h){case"":return bl("Unclosed regular expression.",d,c),bg("Stopping.",d,c);case"/":k>0&&bj("{a} unterminated regular expression group(s).",d,c+n,k),h=e.substr(0,n-1),p={g:!0,i:!0,m:!0};while(p[e.charAt(n)]===!0)p[e.charAt(n)]=!1,n+=1;return b+=n,e=e.substr(n),p=e.charAt(0),(p==="/"||p==="*")&&bl("Confusing regular expression.",d,c),g("(regexp)",h);case"\\":h=e.charAt(n),h<" "?bj("Unexpected control character in regular expression.",d,c+n):h==="<"&&bj("Unexpected escaped character '{a}' in regular expression.",d,c+n,h),n+=1;break;case"(":k+=1,a=!1;if(e.charAt(n)==="?"){n+=1;switch(e.charAt(n)){case":":case"=":case"!":n+=1;break;default:bj("Expected '{a}' and instead saw '{b}'.",d,c+n,":",e.charAt(n))}}else i+=1;break;case"|":a=!1;break;case")":k===0?bj("Unescaped '{a}'.",d,c+n,")"):k-=1;break;case" ":p=1;while(e.charAt(n)===" ")n+=1,p+=1;p>1&&bj("Spaces are hard to count. Use {{a}}.",d,c+n,p);break;case"[":h=e.charAt(n),h==="^"&&(n+=1,B.regexp?bj("Insecure '{a}'.",d,c+n,h):e.charAt(n)==="]"&&bl("Unescaped '{a}'.",d,c+n,"^")),h==="]"&&bj("Empty class.",d,c+n-1),s=!1,t=!1;a:do{h=e.charAt(n),n+=1;switch(h){case"[":case"^":bj("Unescaped '{a}'.",d,c+n,h),t?t=!1:s=!0;break;case"-":s&&!t?(s=!1,t=!0):t?t=!1:e.charAt(n)==="]"?t=!0:(B.regexdash!==(n===2||n===3&&e.charAt(1)==="^")&&bj("Unescaped '{a}'.",d,c+n-1,"-"),s=!0);break;case"]":t&&!B.regexdash&&bj("Unescaped '{a}'.",d,c+n-1,"-");break a;case"\\":h=e.charAt(n),h<" "?bj("Unexpected control character in regular expression.",d,c+n):h==="<"&&bj("Unexpected escaped character '{a}' in regular expression.",d,c+n,h),n+=1,/[wsd]/i.test(h)?(t&&(bj("Unescaped '{a}'.",d,c+n,"-"),t=!1),s=!1):t?t=!1:s=!0;break;case"/":bj("Unescaped '{a}'.",d,c+n-1,"/"),t?t=!1:s=!0;break;case"<":t?t=!1:s=!0;break;default:t?t=!1:s=!0}}while(h);break;case".":B.regexp&&bj("Insecure '{a}'.",d,c+n,h);break;case"]":case"?":case"{":case"}":case"+":case"*":bj("Unescaped '{a}'.",d,c+n,h)}if(a)switch(e.charAt(n)){case"?":case"+":case"*":n+=1,e.charAt(n)==="?"&&(n+=1);break;case"{":n+=1,h=e.charAt(n),(h<"0"||h>"9")&&bj("Expected a number and instead saw '{a}'.",d,c+n,h),n+=1,o=+h;for(;;){h=e.charAt(n);if(h<"0"||h>"9")break;n+=1,o=+h+o*10}l=o;if(h===","){n+=1,l=Infinity,h=e.charAt(n);if(h>="0"&&h<="9"){n+=1,l=+h;for(;;){h=e.charAt(n);if(h<"0"||h>"9")break;n+=1,l=+h+l*10}}}e.charAt(n)!=="}"?bj("Expected '{a}' and instead saw '{b}'.",d,c+n,"}",h):n+=1,e.charAt(n)==="?"&&(n+=1),o>l&&bj("'{a}' should not be greater than '{b}'.",d,c+n,o,l)}}return h=e.substr(0,n-1),b+=n,e=e.substr(n),g("(regexp)",h)}return g("(punctuator)",q);case"#":return g("(punctuator)",q);default:return g("(punctuator)",q)}}}}}}();bG("(number)",function(){return this}),bG("(string)",function(){return this}),N["(identifier)"]={type:"(identifier)",lbp:0,identifier:!0,nud:function(){var b=this.value,c=H[b],d;typeof c=="function"?c=undefined:typeof c=="boolean"&&(d=k,k=m[0],bn(b,"var"),c=k,k=d);if(k===c)switch(k[b]){case"unused":k[b]="var";break;case"unction":k[b]="function",this["function"]=!0;break;case"function":this["function"]=!0;break;case"label":bi("'{a}' is a statement label.",P,b)}else if(k["(global)"])B.undef&&typeof C[b]!="boolean"&&(a!=="typeof"&&a!=="delete"||y&&(y.value==="."||y.value==="["))&&bh(k,"'{a}' is not defined.",P,b),bY(P);else switch(k[b]){case"closure":case"function":case"var":case"unused":bi("'{a}' used out of scope.",P,b);break;case"label":bi("'{a}' is a statement label.",P,b);break;case"outer":case"global":break;default:if(c===!0)k[b]=!0;else if(c===null)bi("'{a}' is not allowed.",P,b),bY(P);else if(typeof c!="object")B.undef&&(a!=="typeof"&&a!=="delete"||y&&(y.value==="."||y.value==="["))&&bh(k,"'{a}' is not defined.",P,b),k[b]=!0,bY(P);else switch(c[b]){case"function":case"unction":this["function"]=!0,c[b]="closure",k[b]=c["(global)"]?"global":"outer";break;case"var":case"unused":c[b]="closure",k[b]=c["(global)"]?"global":"outer";break;case"closure":case"parameter":k[b]=c["(global)"]?"global":"outer";break;case"label":bi("'{a}' is a statement label.",P,b)}}return this},led:function(){bk("Expected an operator and instead saw '{a}'.",y,y.value)}},bG("(regexp)",function(){return this}),bB("(endline)"),bB("(begin)"),bB("(end)").reach=!0,bB("</").reach=!0,bB("<!"),bB("<!--"),bB("-->"),bB("(error)").reach=!0,bB("}").reach=!0,bB(")"),bB("]"),bB('"').reach=!0,bB("'").reach=!0,bB(";"),bB(":").reach=!0,bB(","),bB("#"),bB("@"),bH("else"),bH("case").reach=!0,bH("catch"),bH("default").reach=!0,bH("finally"),bI("arguments",function(a){M["use strict"]&&k["(global)"]&&bi("Strict violation.",a)}),bI("eval"),bI("false"),bI("Infinity"),bI("NaN"),bI("null"),bI("this",function(a){M["use strict"]&&!B.validthis&&(k["(statement)"]&&k["(name)"].charAt(0)>"Z"||k["(global)"])&&bi("Possible strict violation.",a)}),bI("true"),bI("undefined"),bM("=","assign",20),bM("+=","assignadd",20),bM("-=","assignsub",20),bM("*=","assignmult",20),bM("/=","assigndiv",20).nud=function(){bk("A regular expression literal can be confused with '/='.")},bM("%=","assignmod",20),bO("&=","assignbitand",20),bO("|=","assignbitor",20),bO("^=","assignbitxor",20),bO("<<=","assignshiftleft",20),bO(">>=","assignshiftright",20),bO(">>>=","assignshiftrightunsigned",20),bJ("?",function(a,b){return b.left=a,b.right=br(10),bq(":"),b["else"]=br(10),b},30),bJ("||","or",40),bJ("&&","and",50),bN("|","bitor",70),bN("^","bitxor",80),bN("&","bitand",90),bK("==",function(a,b){var c=B.eqnull&&(a.value==="null"||b.value==="null");return!c&&B.eqeqeq?bi("Expected '{a}' and instead saw '{b}'.",this,"===","=="):bL(a)?bi("Use '{a}' to compare with '{b}'.",this,"===",a.value):bL(b)&&bi("Use '{a}' to compare with '{b}'.",this,"===",b.value),this}),bK("==="),bK("!=",function(a,b){var c=B.eqnull&&(a.value==="null"||b.value==="null");return!c&&B.eqeqeq?bi("Expected '{a}' and instead saw '{b}'.",this,"!==","!="):bL(a)?bi("Use '{a}' to compare with '{b}'.",this,"!==",a.value):bL(b)&&bi("Use '{a}' to compare with '{b}'.",this,"!==",b.value),this}),bK("!=="),bK("<"),bK(">"),bK("<="),bK(">="),bN("<<","shiftleft",120),bN(">>","shiftright",120),bN(">>>","shiftrightunsigned",120),bJ("in","in",120),bJ("instanceof","instanceof",120),bJ("+",function(a,b){var c=br(130);return a&&c&&a.id==="(string)"&&c.id==="(string)"?(a.value+=c.value,a.character=c.character,!B.scripturl&&_.test(a.value)&&bi("JavaScript URL.",a),a):(b.left=a,b.right=c,b)},130),bF("+","num"),bF("+++",function(){return bi("Confusing pluses."),this.right=br(150),this.arity="unary",this}),bJ("+++",function(a){return bi("Confusing pluses."),this.left=a,this.right=br(130),this},130),bJ("-","sub",130),bF("-","neg"),bF("---",function(){return bi("Confusing minuses."),this.right=br(150),this.arity="unary",this}),bJ("---",function(a){return bi("Confusing minuses."),this.left=a,this.right=br(130),this},130),bJ("*","mult",140),bJ("/","div",140),bJ("%","mod",140),bP("++","postinc"),bF("++","preinc"),N["++"].exps=!0,bP("--","postdec"),bF("--","predec"),N["--"].exps=!0,bF("delete",function(){var a=br(0);return(!a||a.id!=="."&&a.id!=="[")&&bi("Variables should not be deleted."),this.first=a,this}).exps=!0,bF("~",function(){return B.bitwise&&bi("Unexpected '{a}'.",this,"~"),br(150),this}),bF("!",function(){return this.right=br(150),this.arity="unary",b[this.right.id]===!0&&bi("Confusing use of '{a}'.",this,"!"),this}),bF("typeof","typeof"),bF("new",function(){var a=br(155),b;if(a&&a.id!=="function")if(a.identifier){a["new"]=!0;switch(a.value){case"Number":case"String":case"Boolean":case"Math":case"JSON":bi("Do not use {a} as a constructor.",P,a.value);break;case"Function":B.evil||bi("The Function constructor is eval.");break;case"Date":case"RegExp":break;default:a.id!=="function"&&(b=a.value.substr(0,1),B.newcap&&(b<"A"||b>"Z")&&bi("A constructor name should start with an uppercase letter.",P))}}else a.id!=="."&&a.id!=="["&&a.id!=="("&&bi("Bad constructor.",P);else B.supernew||bi("Weird construction. Delete 'new'.",this);return bs(P,y),y.id!=="("&&!B.supernew&&bi("Missing '()' invoking a constructor."),this.first=a,this}),N["new"].exps=!0,bF("void").exps=!0,bJ(".",function(a,b){bs(E,P),bt();var c=bR();return typeof c=="string"&&bX(c),b.left=a,b.right=c,!a||a.value!=="arguments"||c!=="callee"&&c!=="caller"?!B.evil&&a&&a.value==="document"&&(c==="write"||c==="writeln")&&bi("document.write can be a form of eval.",a):B.noarg?bi("Avoid arguments.{a}.",a,c):M["use strict"]&&bk("Strict violation."),!B.evil&&(c==="eval"||c==="execScript")&&bi("eval is evil."),b},160,!0),bJ("(",function(a,b){E.id!=="}"&&E.id!==")"&&bt(E,P),bu(),B.immed&&!a.immed&&a.id==="function"&&bi("Wrap an immediate function invocation in parentheses to assist the reader in understanding that the expression is the result of a function, and not the function itself.");var c=0,d=[];a&&a.type==="(identifier)"&&a.value.match(/^[A-Z]([A-Z0-9_$]*[a-z][A-Za-z0-9_$]*)?$/)&&a.value!=="Number"&&a.value!=="String"&&a.value!=="Boolean"&&a.value!=="Date"&&(a.value==="Math"?bi("Math is not a function.",a):B.newcap&&bi("Missing 'new' prefix when invoking a constructor.",a));if(y.id!==")")for(;;){d[d.length]=br(10),c+=1;if(y.id!==",")break;bz()}return bq(")"),bu(E,P),typeof a=="object"&&(a.value==="parseInt"&&c===1&&bi("Missing radix parameter.",a),B.evil||(a.value==="eval"||a.value==="Function"||a.value==="execScript"?bi("eval is evil.",a):d[0]&&d[0].id==="(string)"&&(a.value==="setTimeout"||a.value==="setInterval")&&bi("Implied eval is evil. Pass a function instead of a string.",a)),!a.identifier&&a.id!=="."&&a.id!=="["&&a.id!=="("&&a.id!=="&&"&&a.id!=="||"&&a.id!=="?"&&bi("Bad invocation.",a)),b.left=a,b},155,!0).exps=!0,bF("(",function(){bu(),y.id==="function"&&(y.immed=!0);var a=br(0);return bq(")",this),bu(E,P),B.immed&&a.id==="function"&&(y.id==="("||y.id==="."&&(bp().value==="call"||bp().value==="apply")?bi("Move the invocation into the parens that contain the function.",y):bi("Do not wrap function literals in parens unless they are to be immediately invoked.",this)),a}),bJ("[",function(a,b){bt(E,P),bu();var c=br(0),d;return c&&c.type==="(string)"&&(!B.evil&&(c.value==="eval"||c.value==="execScript")&&bi("eval is evil.",b),bX(c.value),!B.sub&&$.test(c.value)&&(d=N[c.value],(!d||!d.reserved)&&bi("['{a}'] is better written in dot notation.",c,c.value))),bq("]",b),bu(E,P),b.left=a,b.right=c,b},160,!0),bF("[",function(){var a=P.line!==y.line;this.first=[],a&&(q+=B.indent,y.from===q+B.indent&&(q+=B.indent));while(y.id!=="(end)"){while(y.id===",")bi("Extra comma."),bq(",");if(y.id==="]")break;a&&P.line!==y.line&&bx(),this.first.push(br(10));if(y.id!==",")break;bz();if(y.id==="]"&&!B.es5){bi("Extra comma.",P);break}}return a&&(q-=B.indent,bx()),bq("]",this),this},160),function(a){a.nud=function(){function h(a,b){g[a]&&bc(g,a)?bi("Duplicate member '{a}'.",y,c):g[a]={},g[a].basic=!0,g[a].basicToken=b}function i(a,b){g[a]&&bc(g,a)?(g[a].basic||g[a].setter)&&bi("Duplicate member '{a}'.",y,c):g[a]={},g[a].setter=!0,g[a].setterToken=b}function j(a){g[a]&&bc(g,a)?(g[a].basic||g[a].getter)&&bi("Duplicate member '{a}'.",y,c):g[a]={},g[a].getter=!0,g[a].getterToken=P}var a,b,c,d,e,f,g={};a=P.line!==y.line,a&&(q+=B.indent,y.from===q+B.indent&&(q+=B.indent));for(;;){if(y.id==="}")break;a&&bx();if(y.value==="get"&&bp().id!==":")bq("get"),B.es5||bk("get/set are ES5 features."),c=bZ(),c||bk("Missing property name."),j(c),f=y,bs(P,y),b=b_(),e=b["(params)"],e&&bi("Unexpected parameter '{a}' in get {b} function.",f,e[0],c),bs(P,y);else if(y.value==="set"&&bp().id!==":")bq("set"),B.es5||bk("get/set are ES5 features."),c=bZ(),c||bk("Missing property name."),i(c,y),f=y,bs(P,y),b=b_(),e=b["(params)"],(!e||e.length!==1)&&bi("Expected a single parameter in set {a} function.",f,c);else{c=bZ(),h(c,y);if(typeof c!="string")break;bq(":"),bv(P,y),br(10)}bX(c);if(y.id===",")bz(),y.id===","?bi("Extra comma.",P):y.id==="}"&&!B.es5&&bi("Extra comma.",P);else break}a&&(q-=B.indent,bx()),bq("}",this);if(B.es5)for(var k in g)bc(g,k)&&g[k].setter&&!g[k].getter&&bi("Setter is defined without getter.",g[k].setterToken);return this},a.fud=function(){bk("Expected to see a statement and instead saw a block.",P)}}(bB("{")),R=function(){var a=bC("const",function(a){var b,c,d;this.first=[];for(;;){bv(P,y),b=bR(),k[b]==="const"&&bi("const '"+b+"' has already been declared"),k["(global)"]&&C[b]===!1&&bi("Redefinition of '{a}'.",P,b),bn(b,"const");if(a)break;c=P,this.first.push(P),y.id!=="="&&bi("const '{a}' is initialized to 'undefined'.",P,b),y.id==="="&&(bv(P,y),bq("="),bv(P,y),y.id==="undefined"&&bi("It is not necessary to initialize '{a}' to 'undefined'.",P,b),bp(0).id==="="&&y.identifier&&bk("Constant {a} was not declared correctly.",y,y.value),d=br(0),c.first=d);if(y.id!==",")break;bz()}return this});a.exps=!0};var ca=bC("var",function(a){var b,c,d;k["(onevar)"]&&B.onevar?bi("Too many var statements."):k["(global)"]||(k["(onevar)"]=!0),this.first=[];for(;;){bv(P,y),b=bR(),B.esnext&&k[b]==="const"&&bi("const '"+b+"' has already been declared"),k["(global)"]&&C[b]===!1&&bi("Redefinition of '{a}'.",P,b),bn(b,"unused");if(a)break;c=P,this.first.push(P),y.id==="="&&(bv(P,y),bq("="),bv(P,y),y.id==="undefined"&&bi("It is not necessary to initialize '{a}' to 'undefined'.",P,b),bp(0).id==="="&&y.identifier&&bk("Variable {a} was not declared correctly.",y,y.value),d=br(0),c.first=d);if(y.id!==",")break;bz()}return this});ca.exps=!0,bD("function",function(){p&&bi("Function declarations should not be placed in blocks. Use a function expression or move the statement to the top of the outer function.",P);var a=bR();return B.esnext&&k[a]==="const"&&bi("const '"+a+"' has already been declared"),bs(P,y),bn(a,"unction"),b_(a,!0),y.id==="("&&y.line===P.line&&bk("Function declarations are not invocable. Wrap the whole function invocation in parens."),this}),bF("function",function(){var a=bQ();return a?bs(P,y):bv(P,y),b_(a),!B.loopfunc&&k["(loopage)"]&&bi("Don't make functions within a loop."),this}),bD("if",function(){var a=y;return bq("("),bv(this,a),bu(),br(20),y.id==="="&&(B.boss||bi("Expected a conditional expression and instead saw an assignment."),bq("="),br(20)),bq(")",a),bu(E,P),bW(!0,!0),y.id==="else"&&(bv(P,y),bq("else"),y.id==="if"||y.id==="switch"?bT(!0):bW(!0,!0)),this}),bD("try",function(){var a,b,c;bW(!1),y.id==="catch"&&(bq("catch"),bv(P,y),bq("("),c=H,H=Object.create(c),b=y.value,y.type!=="(identifier)"?bi("Expected an identifier and instead saw '{a}'.",y,b):bn(b,"exception"),bq(),bq(")"),bW(!1),a=!0,H=c);if(y.id==="finally"){bq("finally"),bW(!1);return}return a||bk("Expected '{a}' and instead saw '{b}'.",y,"catch",y.value),this}),bD("while",function(){var a=y;return k["(breakage)"]+=1,k["(loopage)"]+=1,bq("("),bv(this,a),bu(),br(20),y.id==="="&&(B.boss||bi("Expected a conditional expression and instead saw an assignment."),bq("="),br(20)),bq(")",a),bu(E,P),bW(!0,!0),k["(breakage)"]-=1,k["(loopage)"]-=1,this}).labelled=!0,bD("with",function(){var a=y;return M["use strict"]?bk("'with' is not allowed in strict mode.",P):B.withstmt||bi("Don't use 'with'.",P),bq("("),bv(this,a),bu(),br(0),bq(")",a),bu(E,P),bW(!0,!0),this}),bD("switch",function(){var a=y,b=!1;k["(breakage)"]+=1,bq("("),bv(this,a),bu(),this.condition=br(20),bq(")",a),bu(E,P),bv(P,y),a=y,bq("{"),bv(P,y),q+=B.indent,this.cases=[];for(;;)switch(y.id){case"case":switch(k["(verb)"]){case"break":case"case":case"continue":case"return":case"switch":case"throw":break;default:ba.test(t[y.line-2])||bi("Expected a 'break' statement before 'case'.",P)}bx(-B.indent),bq("case"),this.cases.push(br(20)),b=!0,bq(":"),k["(verb)"]="case";break;case"default":switch(k["(verb)"]){case"break":case"continue":case"return":case"throw":break;default:ba.test(t[y.line-2])||bi("Expected a 'break' statement before 'default'.",P)}bx(-B.indent),bq("default"),b=!0,bq(":");break;case"}":q-=B.indent,bx(),bq("}",a);if(this.cases.length===1||this.condition.id==="true"||this.condition.id==="false")B.onecase||bi("This 'switch' should be an 'if'.",this);k["(breakage)"]-=1,k["(verb)"]=undefined;return;case"(end)":bk("Missing '{a}'.",y,"}");return;default:if(b)switch(P.id){case",":bk("Each value should have its own case label.");return;case":":b=!1,bU();break;default:bk("Missing ':' on a case clause.",P);return}else if(P.id===":")bq(":"),bk("Unexpected '{a}'.",P,":"),bU();else{bk("Expected '{a}' and instead saw '{b}'.",y,"case",y.value);return}}}).labelled=!0,bC("debugger",function(){return B.debug||bi("All 'debugger' statements should be removed."),this}).exps=!0,function(){var a=bC("do",function(){k["(breakage)"]+=1,k["(loopage)"]+=1,this.first=bW(!0),bq("while");var a=y;return bv(P,a),bq("("),bu(),br(20),y.id==="="&&(B.boss||bi("Expected a conditional expression and instead saw an assignment."),bq("="),br(20)),bq(")",a),bu(E,P),k["(breakage)"]-=1,k["(loopage)"]-=1,this});a.labelled=!0,a.exps=!0}(),bD("for",function(){var a,b=y;k["(breakage)"]+=1,k["(loopage)"]+=1,bq("("),bv(this,b),bu();if(bp(y.id==="var"?1:0).id==="in"){if(y.id==="var")bq("var"),ca.fud.call(ca,!0);else{switch(k[y.value]){case"unused":k[y.value]="var";break;case"var":break;default:bi("Bad for in variable '{a}'.",y,y.value)}bq()}return bq("in"),br(20),bq(")",b),a=bW(!0,!0),B.forin&&a&&(a.length>1||typeof a[0]!="object"||a[0].value!=="if")&&bi("The body of a for in should be wrapped in an if statement to filter unwanted properties from the prototype.",this),k["(breakage)"]-=1,k["(loopage)"]-=1,this}if(y.id!==";")if(y.id==="var")bq("var"),ca.fud.call(ca);else for(;;){br(0,"for");if(y.id!==",")break;bz()}by(P),bq(";"),y.id!==";"&&(br(20),y.id==="="&&(B.boss||bi("Expected a conditional expression and instead saw an assignment."),bq("="),br(20))),by(P),bq(";"),y.id===";"&&bk("Expected '{a}' and instead saw '{b}'.",y,")",";");if(y.id!==")")for(;;){br(0,"for");if(y.id!==",")break;bz()}return bq(")",b),bu(E,P),bW(!0,!0),k["(breakage)"]-=1,k["(loopage)"]-=1,this}).labelled=!0,bC("break",function(){var a=y.value;return k["(breakage)"]===0&&bi("Unexpected '{a}'.",y,this.value),B.asi||by(this),y.id!==";"&&P.line===y.line&&(k[a]!=="label"?bi("'{a}' is not a statement label.",y,a):H[a]!==k&&bi("'{a}' is out of scope.",y,a),this.first=y,bq()),bS("break"),this}).exps=!0,bC("continue",function(){var a=y.value;return k["(breakage)"]===0&&bi("Unexpected '{a}'.",y,this.value),B.asi||by(this),y.id!==";"?P.line===y.line&&(k[a]!=="label"?bi("'{a}' is not a statement label.",y,a):H[a]!==k&&bi("'{a}' is out of scope.",y,a),this.first=y,bq()):k["(loopage)"]||bi("Unexpected '{a}'.",y,this.value),bS("continue"),this}).exps=!0,bC("return",function(){return this.line===y.line?(y.id==="(regexp)"&&bi("Wrap the /regexp/ literal in parens to disambiguate the slash operator."),y.id!==";"&&!y.reach&&(bv(P,y),bp().value==="="&&!B.boss&&bj("Did you mean to return a conditional instead of an assignment?",P.line,P.character+1),this.first=br(0))):B.asi||by(this),bS("return"),this}).exps=!0,bC("throw",function(){return by(this),bv(P,y),this.first=br(20),bS("throw"),this}).exps=!0,bH("class"),bH("const"),bH("enum"),bH("export"),bH("extends"),bH("import"),bH("super"),bH("let"),bH("yield"),bH("implements"),bH("interface"),bH("package"),bH("private"),bH("protected"),bH("public"),bH("static");var cc=function(a,b,c){var e,f,g;d.errors=[],d.undefs=[],C=Object.create(J),be(C,c||{});if(b){e=b.predef;if(e)if(Array.isArray(e))for(f=0;f<e.length;f+=1)C[e[f]]=!0;else if(typeof e=="object"){g=Object.keys(e);for(f=0;f<g.length;f+=1)C[g[f]]=!!e[g[f]]}B=b}else B={};B.indent=B.indent||4,B.maxerr=B.maxerr||50,O="";for(f=0;f<B.indent;f+=1)O+=" ";q=1,n=Object.create(C),H=n,k={"(global)":!0,"(name)":"(global)","(scope)":H,"(breakage)":0,"(loopage)":0},m=[k],Q=[],I=null,v={},w=null,o={},p=!1,u=[],r=!1,S=0,bm.init(a),D=!0,M={},E=P=y=N["(begin)"];for(var h in b)bc(b,h)&&bd(h,P);bf(),be(C,c||{}),bz.first=!0;try{bq();switch(y.id){case"{":case"[":B.laxbreak=!0,r=!0,cb();break;default:bV(),M["use strict"]&&!B.globalstrict&&bi('Use the function form of "use strict".',E),bU()}bq("(end)");var i=function(a,b){do{if(typeof b[a]=="string")return b[a]==="unused"?b[a]="var":b[a]==="unction"&&(b[a]="closure"),!0;b=b["(context)"]}while(b);return!1},j=function(a,b){if(!o[a])return;var c=[];for(var d=0;d<o[a].length;d+=1)o[a][d]!==b&&c.push(o[a][d]);c.length===0?delete o[a]:o[a]=c};for(f=0;f<d.undefs.length;f+=1)g=d.undefs[f].slice(0),i(g[2].value,g[0])?j(g[2].value,g[2].line):bi.apply(bi,g.slice(1))}catch(l){if(l){var s=y||{};d.errors.push({raw:l.raw,reason:l.message,line:l.line||s.line,character:l.character||s.from},null)}}return d.errors.length===0};return cc.data=function(){var a={functions:[],options:B},b,c,d=[],e,f,g,h=[],i,j=[],k;cc.errors.length&&(a.errors=cc.errors),r&&(a.json=!0);for(i in o)bc(o,i)&&d.push({name:i,line:o[i]});d.length>0&&(a.implieds=d),Q.length>0&&(a.urls=Q),c=Object.keys(H),c.length>0&&(a.globals=c);for(f=1;f<m.length;f+=1){e=m[f],b={};for(g=0;g<l.length;g+=1)b[l[g]]=[];for(i in e)bc(e,i)&&i.charAt(0)!=="("&&(k=e[i],k==="unction"&&(k="unused"),Array.isArray(b[k])&&(b[k].push(i),k==="unused"&&j.push({name:i,line:e["(line)"],"function":e["(name)"]})));for(g=0;g<l.length;g+=1)b[l[g]].length===0&&delete b[l[g]];b.name=e["(name)"],b.param=e["(params)"],b.line=e["(line)"],b.last=e["(last)"],a.functions.push(b)}j.length>0&&(a.unused=j),h=[];for(i in v)if(typeof v[i]=="number"){a.member=v;break}return a},cc.report=function(a){function o(a,b){var c,d,e;if(b){m.push("<div><i>"+a+"</i> "),b=b.sort();for(d=0;d<b.length;d+=1)b[d]!==e&&(e=b[d],m.push((c?", ":"")+e),c=!0);m.push("</div>")}}var b=cc.data(),c=[],d,e,f,g,h,i,j,k="",l,m=[],n;if(b.errors||b.implieds||b.unused){f=!0,m.push("<div id=errors><i>Error:</i>");if(b.errors)for(h=0;h<b.errors.length;h+=1)d=b.errors[h],d&&(e=d.evidence||"",m.push("<p>Problem"+(isFinite(d.line)?" at line "+d.line+" character "+d.character:"")+": "+d.reason.entityify()+"</p><p class=evidence>"+(e&&(e.length>80?e.slice(0,77)+"...":e).entityify())+"</p>"));if(b.implieds){n=[];for(h=0;h<b.implieds.length;h+=1)n[h]="<code>"+b.implieds[h].name+"</code>&nbsp;<i>"+b.implieds[h].line+"</i>";m.push("<p><i>Implied global:</i> "+n.join(", ")+"</p>")}if(b.unused){n=[];for(h=0;h<b.unused.length;h+=1)n[h]="<code><u>"+b.unused[h].name+"</u></code>&nbsp;<i>"+b.unused[h].line+"</i> <code>"+b.unused[h]["function"]+"</code>";m.push("<p><i>Unused variable:</i> "+n.join(", ")+"</p>")}b.json&&m.push("<p>JSON: bad.</p>"),m.push("</div>")}if(!a){m.push("<br><div id=functions>"),b.urls&&o("URLs<br>",b.urls,"<br>"),b.json&&!f?m.push("<p>JSON: good.</p>"):b.globals?m.push("<div><i>Global</i> "+b.globals.sort().join(", ")+"</div>"):m.push("<div><i>No new global variables introduced.</i></div>");for(h=0;h<b.functions.length;h+=1)g=b.functions[h],m.push("<br><div class=function><i>"+g.line+"-"+g.last+"</i> "+(g.name||"")+"("+(g.param?g.param.join(", "):"")+")</div>"),o("<big><b>Unused</b></big>",g.unused),o("Closure",g.closure),o("Variable",g["var"]),o("Exception",g.exception),o("Outer",g.outer),o("Global",g.global),o("Label",g.label);if(b.member){c=Object.keys(b.member);if(c.length){c=c.sort(),k="<br><pre id=members>/*members ",j=10;for(h=0;h<c.length;h+=1)i=c[h],l=i.name(),j+l.length>72&&(m.push(k+"<br>"),k="    ",j=1),j+=l.length+2,b.member[i]===1&&(l="<i>"+l+"</i>"),h<c.length-1&&(l+=", "),k+=l;m.push(k+"<br>*/</pre>")}m.push("</div>")}}return m.join("")},cc.jshint=cc,cc}();typeof b=="object"&&b&&(b.JSHINT=d)}),define("ext/jslanguage/debugger",["require","exports","module","ext/language/base_handler"],function(a,b,c){var d=a("ext/language/base_handler"),e=c.exports=Object.create(d);e.handlesLanguage=function(a){return a==="javascript"},e.buildExpression=function(a){return a?f(a):null};var f=function(a){if(a.value)return a.value;var b;return a.rewrite("VarDeclInit(x, _)",function(a){b=a.x.value},"VarDecl(x)",function(a){b=a.x.value},"PropAccess(e, x)",function(a){b=f(a.e)+"."+a.x.value},"Var(x)",function(a){b=a.x.value},"Call(e, args)",function(a){var c=f(a.e),d=a.args.toArray().map(f).join(", ");b=c+"("+d+")"},"Num(n)",function(a){b=a.n.value},"Index(e, idx)",function(a){b=f(a.e)+"["+f(a.idx)+"]"},"New(e, args)",function(a){var c=f(a.e),d=a.args.toArray().map(f).join(", ");b="new "+c+"("+d+")"},"FArg(x)",function(a){b=a.x.value},"Op(op, e1, e2)",function(a){b=f(a.e1)+" "+a.op.value+" "+f(a.e2)},function(){b||(b="")}),b}}),define("client/js/worker/worker.js",function(){})