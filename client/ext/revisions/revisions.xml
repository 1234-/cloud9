<a:application xmlns:a="http://ajax.org/2005/aml">
    <a:skin id="revisions"
        src = "{require('ext/revisions/revisions').skin}"
        media-path = "/static/ext/revisions/images/" />

    <a:window
      id        = "winQuestionRev"
      title     = "Question"
      icon      = ""
      center    = "true"
      kbclose   = "true"
      buttons   = "close"
      width     = "550"      
      skin      = "bk-window2"
      onkeydown = "
        if(event.keyCode == 89) {
            btnQuestionYes.dispatchEvent('click', {htmlEvent: {}});
        }
        if(event.keyCode == 78) {
            btnQuestionNo.dispatchEvent('click', {htmlEvent: {}});
        }
      "
      class     = "relative">
        <a:vbox padding="10" edge="15 20 25 20">
            <h3 id="winQuestionRevHeader"></h3>
            <div id="winQuestionRevMsg" class="alertMsg">An unexpected error occurred. Please refresh your browser.</div>
        </a:vbox>

        <a:hbox edge="6 10 10" pack="end" padding="8">
            <a:button id="btnQuestionRevYes" default="3" skin="btn-default-css3" class="btn-green">Yes, and add it as a revision</a:button>
            <a:filler/>
            <a:button id="btnQuestionRevNo" skin="btn-default-css3" class="btn-red">No, keep changes in a revision</a:button>
        </a:hbox>
    </a:window>

    <a:vbox id = "pgRevisions"
      skinset = "revisions"
      class   = "revisionsHolder"
      anchors = "0 0 0 0">
        <a:hbox height = "20" class="topbar" margin="0 0 -1 0">
            <span>File Revisions</span>
            <a:button
              height  = "20"
              onclick = "require('ext/revisions/revisions').hide() " />
        </a:hbox>
        <a:list
          id           = "lstRevisions"
          flex         = "1"
          model        = "{require('ext/revisions/revisions').model}"
          multiselect  = "false"
          autoselect   = "false"
          drag         = "false"
          drop         = "false"
          scrollbar    = "sbShared 2 2 2"
          viewport2    = "virtual"
          skin         = "revisions-list"
          bufferselect = "true"
          each         = "[revision]">
            <a:caption><?lm
                 <div class="revision-icon">{
                    if ([@restoring] != '') {
                        <div class="rev-restoration" title="Restored"></div>
                    }
                    else if ([@silentsave] != 'true') {
                        <span class="rev-usersave" title="Saved by user">U</span>
                    }
                    else {
                        <span class="rev-autosave" title="Autosave">A</span>
                    }
                }</div>
                <div class="revision-info">{
                    <div class="revision-title">[@name]</div>
                    <ul class="contributors">{
                        each ([contributors/contributor]) {
                            <li>
                                <span class="coloredSquare" 
                                  style='background-color: {require("ext/revisions/revisions").getUserColorByEmail([@email])}'>&#9632;</span>
                                <span>[@email]</span>
                            </li>
                        }
                    }</ul>
                    
                    if ([@loading_preview] == 'true' or [@loading] == 'true') {
                        <button class="btnRecover" disabled="disabled"></button>
                    }
                    else {
                        <button class="btnRecover" onclick="require('ext/revisions/revisions').loadRevision([@id], 'apply')"></button>
                    }
                }</div>
            ?></a:caption>
            <a:remove match="[revision]" />
        </a:list>
        <a:hbox edge="3 2 3 4" class="show-details">
            <a:checkbox
                skin    = "checkbox_grey"
                top     = "-25"
                right   = "10"
                checked = "{require('ext/revisions/revisions').useCompactList == false ? 'true' : 'false'}"
                label   = "Show Details"
                onafterchange = "
                    var model = tabEditors.getPage().$mdlRevisions;
                    require('ext/revisions/revisions').toggleListView(model);
            " />
        </a:hbox>
    </a:vbox>
    
	 <a:menu id = "revisionsInfo"
	  class   = "c9-revisionsInfo menu-bk mnuSbPrefs upward moveleft menu-bkFocus">
	    <a:vbox padding="10" edge="15">
	        <a:text id="revisionsInfoText" class="revisionsInfoDesc" value="Auto-Save is a feature designed to give you extra relief when working on your code in Cloud9. Every revision of your file can be saved automatically by the server.&lt;br/>&lt;br/>However, none of your previous changes are lost throughout the course of your development.&lt;br/>&lt;br/>You can view your entire history of revisions at any time through the Revision History pane. Feel free to rollback to a previous state, or navigate through the revisions to make comparisons."/>
	    </a:vbox>
	   <a:hbox padding="10" pack="center" edge="10 10 10 20" align="center">
	        <a:button id="revisionsInfoButtonClose" 
	          default = "2" 
	          class   = "btn-green" 
	          skin    = "btn-default-css3" 
	          onclick = "require('ext/revisions/revisions').toggleInfoDiv(0)">Got it!</a:button>
	    </a:hbox>
	</a:menu>
</a:application>
