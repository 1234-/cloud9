<a:application xmlns:a="http://ajax.org/2005/aml">
    <a:hbox id="mainUiRecorder" anchors="0 0 0 0" edge="0 4 3 6" padding="3" visible="false" splitters="true">
        <a:vbox width="340" id="vboxUiRecorder">
            <a:bar id="barUiRecorder" skin="basic" style="padding:2px;">
                <a:hbox align="center" padding="5">
                    <a:button id="btnUiRecordStart" onclick="require('ext/selenium/editor').start()">Record</a:button>
                    <a:button id="btnUiRecordStop" icon="stop.png" visible="false" onclick="require('ext/selenium/editor').stop()">Stop</a:button>
                    
                    <a:button id="btnUiRecordRemove" disabled="{!dgUiRecorder.selected}" onclick="dgUiRecorder.remove()">Remove</a:button>
                    <a:button id="btnUiRecordAddAssert" disabled="{'action|assert'.indexOf(dgUiRecorder.selected and dgUiRecorder.selected.localName) == -1}" onclick="require('ext/selenium/editor').startAddAssert()">Add Assertion</a:button>
                    <a:button onclick="
                        uiRecordPreview.setAttribute('visible', !uiRecordPreview.visible);
                        if (uiRecordPreview.visible) {
                            vboxUiRecorder.setAttribute('width', vboxUiRecorder.lastWidth);
                            vboxUiRecorder.removeAttribute('flex');
                        }
                        else {
                            vboxUiRecorder.lastWidth = vboxUiRecorder.width;
                            vboxUiRecorder.removeAttribute('width');
                            vboxUiRecorder.setAttribute('flex', 2);
                        }
                    " caption="{uiRecordPreview.visible ? '&gt;&gt;' : '&lt;&lt;'}" />
                </a:hbox>
            </a:bar>
            
            <a:menu id="mnuUiRecorder">
                <a:item match="[action|assert|test]" onclick="dgUiRecorder.remove()">Remove</a:item>
                <a:item match="[action|assert]" onclick="require('ext/selenium/editor').startAddAssert()">Add Assertion</a:item>
            </a:menu>
        
            <a:bar skin="basic" flex="1">
                <a:datagrid 
                  id   = "dgUiRecorder"
                  options = "size"
                  anchors = "0 0 0 0"
                  each = "[action|assert|test]"
                  multiselect = "true"
                  class = "noscrollbar"
                  startcollapsed = "false"
                  contextmenu = "mnuUiRecorder"
                  onmouseover = "require('ext/selenium/editor').highlightElement(event)"
                  onmouseout  = "require('ext/selenium/editor').hideHighlightElements(event)">
                    <a:column caption="Name" width="140" value="[@name]" tree="1" check2="1" editor="textbox" skin="tbsimple" class="tbtree" />
                    <a:column caption="Value" width="100%" value="[@value]" editor="textbox" skin="tbsimple" />
                    
                    <a:css match="[test]" value="testhead" />
                    
                    <a:drag match="[action|assert|test]" />
                    <a:drop 
                      match  = "[action]" 
                      target = "[action]" 
                      action = "insert-before" />
                    <a:drop 
                      match  = "[action]" 
                      target = "[test]" 
                      action = "tree-append" />
                    <a:drop 
                      match  = "[test]" 
                      target = "[test]" 
                      action = "insert-before" />
                    <a:drop 
                      match  = "[assert]" 
                      target = "[action]" 
                      action = "tree-append" />
                    <a:drop 
                      match  = "[assert]" 
                      target = "[assert]" 
                      action = "insert-before" />
                </a:datagrid>
                
                <a:scrollbar
                    for      = "dgUiRecorder"
                    id       = "sbUiRecorder"
                    margin   = "2"
                    skin     = "sbios"
                    top      = "20"
                    right    = "1"
                    bottom   = "1"
                    width    = "7"
                    showonscroll = "true"
                />
            </a:bar>
        </a:vbox>
        <a:vbox id="uiRecordPreview" flex="3" style="border:1px solid #c6c6c6">
            <a:bar skin="basic" style="padding:2px;background:white;">
                <a:hbox align="center" padding="3" edge="0 20 0 20">
                    <a:button onclick="brSeleniumPreview.back()">&lt;</a:button>
                    <a:button onclick="brSeleniumPreview.forward()">&gt;</a:button>
                    <a:button onclick="brSeleniumPreview.reload()">reload</a:button>
                    <a:textbox flex="1" focusselect="true" id="tbUiRecordLoc" />
                </a:hbox>
            </a:bar>
            <a:browser id="brSeleniumPreview" flex="1" style="border: 0;background:white;" />
        </a:vbox>
    </a:hbox>
</a:application>