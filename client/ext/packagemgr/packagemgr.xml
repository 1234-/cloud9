<a:application xmlns:a="http://ajax.org/2005/aml">
    <a:skin id="pcmSkin" 
      src       = "{require('ext/packagemgr/packagemgr').skin}" />
      
    <a:model id="mdlPacmanInstalled"/>
    <a:model id="mdlPacmanSearchResult"/>
    <a:window
      id        = "winPack"
      title     = "Package Manager"
      icon      = ""
      class     = "pacman-window"
      skinset   = "pcmSkin"
      center    = "true"
      resizable = "true"
      buttons   = "close"
      width     = "600"
      height    = "550"
      kbclose   = "true">
        <a:vbox anchors="0 0 0 0" edge="10 10 5 10">
            <a:hbox align="center" edge="0 0 5 0" padding="5">
                <a:textbox id="tbPackQuery" flex="1" 
                  realtime   = "true" />
                <a:button width="80"
                  default = "1"
                  id = "pmSearch"
                  caption = "Search"
                  disabled = "{!tbPackQuery.value.trim()}" />
            </a:hbox>
            <!--<div class="sources">
                <span class="{lstPacmanInstalled.visible ? 'active' : ''}">
                    <a href="#" onclick="lstPacmanInstalled.setAttribute('visible', true); return false">Your packages</a>
                </span> 
                <span class="{lstPacmanSearchResult.visible ? 'active' : ''}">
                    <a href="#" onclick="lstPacmanSearchResult.setAttribute('visible', true); return false">NPM</a>
                </span>
            </div>-->
            <div model="mdlPacmanInstalled" id="lstPacmanInstalled" class="list"><?lm
                foreach([package]) {
                  <div class="package">
                    <div class="col-l">
                        <h3>[name]</h3>
                        <span class="version">[version]</span><br/>
                        <span class="url"><a href="[url]" target="_blank">[url]</a></span>
                        <p class="description">[description]</p>
                    </div>
                    <div class="col-r">
                        <button class="install" onclick="require('ext/packagemgr/packagemgr').uninstall('[name]')">Uninstall</button>
                        <span class="isuptodate">[uptodate]</span>
                    </div>
                  </div>
                }
            ?></div>
            <div model="mdlPacmanSearchResult" id="lstPacmanSearchResult" class="list" visible="false"><?lm
                foreach([package]) {
                  <div class="package">
                    <div class="col-l">
                        <h3>[name]</h3>
                        <span class="version">[version]</span><br/>
                        <span class="url"><a href="[url]" target="_blank">[url]</a></span>
                        <p class="description">[description]</p>
                    </div>
                    <div class="col-r">
                        <button class="uninstall" onclick="require('ext/packagemgr/packagemgr').install('[name]')"
                        {(apf.isTrue([installDisabled]) ? " disabled='disabled'" : "")}>
                            [installLabel]
                        </button>
                    </div>
                  </div>
                }
            ?></div>
            <a:hbox edge="10 0 0 0">
                <a:button id="pacUpdateButton" default="3" width="160" onclick="require('ext/packagemgr/packagemgr').updateAll()" enabled="false" caption="All up to date"></a:button>
                <a:filler />
                <a:button default="3" width="80" onclick="winPack.hide()">Done</a:button>
            </a:hbox>
        </a:vbox>
    </a:window>
</a:application>