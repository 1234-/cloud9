<a:application xmlns:a="http://ajax.org/2005/aml">
    <a:window id="winSearchInFiles"
      onhide  = "require('ext/searchinfiles/searchinfiles').onHide()"
      title   = "Search in Files"
      buttons = "close"
      skin    = "bk-window"
      class   = "relative"
      modal   = "false"
      center  = "true"
      width   = "450"
      kbclose = "true">
        <a:vbox edge="10" padding="5">
            <a:hbox >
                <a:label width="95">Containing Text</a:label>
                <a:textarea id="txtSFFind" flex="1" focusselect="true" rows="2" cols="70"/>
            </a:hbox>
            <a:hbox align="center">
                <a:label width="95">Filename Patterns</a:label>
                <a:textbox id="ddSFPatterns" flex="1" focusselect="true" initial-message="*.*"/>
            </a:hbox>
            <a:hbox id="barReplace" align="center">
                <a:label width="95">Replace With</a:label>
                <a:textbox id="txtReplace" flex="1" />
            </a:hbox>
            <a:hbox edge="10 0 5">
                <a:fieldset flex="1" caption="Options" margin="0 0 1">
                    <a:checkbox id="chkSFMatchCase"
                      checked = "false"
                      skin    = "checkbox_grey"
                      margin  = "0 0 2"
                      label   = "Match Case" />
                    <!--a:checkbox id="chkSFWholeWords" label="Whole Words" /-->
                    <a:checkbox id="chkSFRegEx"
                      skin  = "checkbox_grey"
                      label = "Regular Expressions" />
                </a:fieldset>
                <a:fieldset flex="1" caption="Scope" margin="0 0 1 5">
                    <a:radiobutton
                      group  = "grpSFScope"
                      skin   = "radio_grey"
                      value  = "projects"
                      margin = "0 0 2"
                      label  = "Project" />
                    <a:radiobutton id="rbSFSelection"
                      group  = "grpSFScope"
                      skin   = "radio_grey"
                      value  = "selection"
                      label  = "Selection"
                      selected = "true" />
                </a:fieldset>
            </a:hbox>
        </a:vbox>
        <a:hbox padding="10" pack="end" edge="6 10 10">
            <a:button id="btnReplaceAll" skin="btn-default-css3">Replace All</a:button>
            <a:button id="btnSFFind" default="2" class="btn-green" skin="btn-default-css3">Find All</a:button>
            <a:button onclick="winSearchInFiles.hide()" skin="btn-default-css3">Close</a:button>
        </a:hbox>
    </a:window>

    <a:hbox id="trSFHbox" anchors="0 0 0 0" visible="false" render="runtime">
        <a:tree id        = "trSFResult"
          skinset         = "searchinfiles"
          border          = "0"
          visible         = "false"
          each            = "[d:response[position() &lt; 50]|d:excerpt[position() &lt; 50]|d:maxreached|d:querydetail]"
          loading-message = "Searching..."
          style           = "position:absolute;top:0;left:0;bottom:0;right:17px;"
          autoselect      = "false">
            <a:model />
            <a:caption match="[d:querydetail]">Search results for '{apf.htmlentities([@query])}'</a:caption>
            <a:caption match="[d:replacement]">Into '{apf.htmlentities([@replacement])}'</a:caption>
            <a:caption match="[d:maxreached]">Your search yielded too many results. The first hits are listed below:</a:caption>
            <a:caption match="[d:response]">[@path] (#[d:excerpt])</a:caption>
            <a:caption match="[d:excerpt]"><div class="linenumber">[@line]</div><pre class="excerpt">{apf.htmlentities([text()])}</pre></a:caption>
        </a:tree>
        <a:scrollbar
          id        = "sbSFResult"
          for       = "trSFResult"
          margin    = "0"
          skin      = "console_scrollbar"
          style     = "position:absolute;top:0;bottom:0;right:0;"
          width     = "17" />
    </a:hbox>
</a:application>
